(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Hw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kw={exports:{}},Gh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1=Symbol.for("react.transitional.element"),o1=Symbol.for("react.fragment");function $w(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:s1,type:t,key:i,ref:e!==void 0?e:null,props:n}}Gh.Fragment=o1;Gh.jsx=$w;Gh.jsxs=$w;Kw.exports=Gh;var R=Kw.exports,Yw={exports:{}},ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cy=Symbol.for("react.transitional.element"),a1=Symbol.for("react.portal"),l1=Symbol.for("react.fragment"),u1=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),d1=Symbol.for("react.consumer"),f1=Symbol.for("react.context"),h1=Symbol.for("react.forward_ref"),p1=Symbol.for("react.suspense"),m1=Symbol.for("react.memo"),Jw=Symbol.for("react.lazy"),g1=Symbol.for("react.activity"),GE=Symbol.iterator;function _1(t){return t===null||typeof t!="object"?null:(t=GE&&t[GE]||t["@@iterator"],typeof t=="function"?t:null)}var Qw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ww=Object.assign,Xw={};function ml(t,e,n){this.props=t,this.context=e,this.refs=Xw,this.updater=n||Qw}ml.prototype.isReactComponent={};ml.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ml.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zw(){}Zw.prototype=ml.prototype;function dy(t,e,n){this.props=t,this.context=e,this.refs=Xw,this.updater=n||Qw}var fy=dy.prototype=new Zw;fy.constructor=dy;Ww(fy,ml.prototype);fy.isPureReactComponent=!0;var zE=Array.isArray;function Ig(){}var ze={H:null,A:null,T:null,S:null},jw=Object.prototype.hasOwnProperty;function hy(t,e,n){var i=n.ref;return{$$typeof:cy,type:t,key:e,ref:i!==void 0?i:null,props:n}}function y1(t,e){return hy(t.type,e,t.props)}function py(t){return typeof t=="object"&&t!==null&&t.$$typeof===cy}function v1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var HE=/\/+/g;function mm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v1(""+t.key):e.toString(36)}function T1(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ig,Ig):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function na(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cy:case a1:o=!0;break;case Jw:return o=t._init,na(o(t._payload),e,n,i,r)}}if(o)return r=r(t),o=i===""?"."+mm(t,0):i,zE(r)?(n="",o!=null&&(n=o.replace(HE,"$&/")+"/"),na(r,e,n,"",function(u){return u})):r!=null&&(py(r)&&(r=y1(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(HE,"$&/")+"/")+o)),e.push(r)),1;o=0;var a=i===""?".":i+":";if(zE(t))for(var l=0;l<t.length;l++)i=t[l],s=a+mm(i,l),o+=na(i,e,n,s,r);else if(l=_1(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=a+mm(i,l++),o+=na(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return na(T1(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function Od(t,e,n){if(t==null)return t;var i=[],r=0;return na(t,i,"","",function(s){return e.call(n,s,r++)}),i}function E1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var KE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},I1={map:Od,forEach:function(t,e,n){Od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Od(t,function(){e++}),e},toArray:function(t){return Od(t,function(e){return e})||[]},only:function(t){if(!py(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Activity=g1;ae.Children=I1;ae.Component=ml;ae.Fragment=l1;ae.Profiler=c1;ae.PureComponent=dy;ae.StrictMode=u1;ae.Suspense=p1;ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ze;ae.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ze.H.useMemoCache(t)}};ae.cache=function(t){return function(){return t.apply(null,arguments)}};ae.cacheSignal=function(){return null};ae.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=Ww({},t.props),r=t.key;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)!jw.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];i.children=o}return hy(t.type,r,i)};ae.createContext=function(t){return t={$$typeof:f1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:d1,_context:t},t};ae.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)jw.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return hy(t,s,r)};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:h1,render:t}};ae.isValidElement=py;ae.lazy=function(t){return{$$typeof:Jw,_payload:{_status:-1,_result:t},_init:E1}};ae.memo=function(t,e){return{$$typeof:m1,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=ze.T,n={};ze.T=n;try{var i=t(),r=ze.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(Ig,KE)}catch(s){KE(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),ze.T=e}};ae.unstable_useCacheRefresh=function(){return ze.H.useCacheRefresh()};ae.use=function(t){return ze.H.use(t)};ae.useActionState=function(t,e,n){return ze.H.useActionState(t,e,n)};ae.useCallback=function(t,e){return ze.H.useCallback(t,e)};ae.useContext=function(t){return ze.H.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t,e){return ze.H.useDeferredValue(t,e)};ae.useEffect=function(t,e){return ze.H.useEffect(t,e)};ae.useEffectEvent=function(t){return ze.H.useEffectEvent(t)};ae.useId=function(){return ze.H.useId()};ae.useImperativeHandle=function(t,e,n){return ze.H.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return ze.H.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return ze.H.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return ze.H.useMemo(t,e)};ae.useOptimistic=function(t,e){return ze.H.useOptimistic(t,e)};ae.useReducer=function(t,e,n){return ze.H.useReducer(t,e,n)};ae.useRef=function(t){return ze.H.useRef(t)};ae.useState=function(t){return ze.H.useState(t)};ae.useSyncExternalStore=function(t,e,n){return ze.H.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return ze.H.useTransition()};ae.version="19.2.0";Yw.exports=ae;var W=Yw.exports;const S1=Hw(W);var eC={exports:{}},zh={},tC={exports:{}},nC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ie){var re=K.length;K.push(ie);e:for(;0<re;){var De=re-1>>>1,ke=K[De];if(0<r(ke,ie))K[De]=ie,K[re]=ke,re=De;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ie=K[0],re=K.pop();if(re!==ie){K[0]=re;e:for(var De=0,ke=K.length,Rr=ke>>>1;De<Rr;){var Rt=2*(De+1)-1,tt=K[Rt],Gn=Rt+1,hn=K[Gn];if(0>r(tt,re))Gn<ke&&0>r(hn,tt)?(K[De]=hn,K[Gn]=re,De=Gn):(K[De]=tt,K[Rt]=re,De=Rt);else if(Gn<ke&&0>r(hn,re))K[De]=hn,K[Gn]=re,De=Gn;else break e}}return ie}function r(K,ie){var re=K.sortIndex-ie.sortIndex;return re!==0?re:K.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,p=null,m=3,_=!1,S=!1,b=!1,P=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function N(K){for(var ie=n(u);ie!==null;){if(ie.callback===null)i(u);else if(ie.startTime<=K)i(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(u)}}function L(K){if(b=!1,N(K),!S)if(n(l)!==null)S=!0,F||(F=!0,k());else{var ie=n(u);ie!==null&&Ct(L,ie.startTime-K)}}var F=!1,C=-1,E=5,w=-1;function x(){return P?!0:!(t.unstable_now()-w<E)}function M(){if(P=!1,F){var K=t.unstable_now();w=K;var ie=!0;try{e:{S=!1,b&&(b=!1,v(C),C=-1),_=!0;var re=m;try{t:{for(N(K),p=n(l);p!==null&&!(p.expirationTime>K&&x());){var De=p.callback;if(typeof De=="function"){p.callback=null,m=p.priorityLevel;var ke=De(p.expirationTime<=K);if(K=t.unstable_now(),typeof ke=="function"){p.callback=ke,N(K),ie=!0;break t}p===n(l)&&i(l),N(K)}else i(l);p=n(l)}if(p!==null)ie=!0;else{var Rr=n(u);Rr!==null&&Ct(L,Rr.startTime-K),ie=!1}}break e}finally{p=null,m=re,_=!1}ie=void 0}}finally{ie?k():F=!1}}}var k;if(typeof A=="function")k=function(){A(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Kt=D.port2;D.port1.onmessage=M,k=function(){Kt.postMessage(null)}}else k=function(){T(M,0)};function Ct(K,ie){C=T(function(){K(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var re=m;m=ie;try{return K()}finally{m=re}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=m;m=K;try{return ie()}finally{m=re}},t.unstable_scheduleCallback=function(K,ie,re){var De=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?De+re:De):re=De,K){case 1:var ke=-1;break;case 2:ke=250;break;case 5:ke=1073741823;break;case 4:ke=1e4;break;default:ke=5e3}return ke=re+ke,K={id:f++,callback:ie,priorityLevel:K,startTime:re,expirationTime:ke,sortIndex:-1},re>De?(K.sortIndex=re,e(u,K),n(l)===null&&K===n(u)&&(b?(v(C),C=-1):b=!0,Ct(L,re-De))):(K.sortIndex=ke,e(l,K),S||_||(S=!0,F||(F=!0,k()))),K},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(K){var ie=m;return function(){var re=m;m=ie;try{return K.apply(this,arguments)}finally{m=re}}}})(nC);tC.exports=nC;var A1=tC.exports,iC={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1=W;function rC(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Mr(){}var ln={d:{f:Mr,r:function(){throw Error(rC(522))},D:Mr,C:Mr,L:Mr,m:Mr,X:Mr,S:Mr,M:Mr},p:0,findDOMNode:null},C1=Symbol.for("react.portal");function R1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C1,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Nu=w1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Hh(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ln;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(rC(299));return R1(t,e,null,n)};fn.flushSync=function(t){var e=Nu.T,n=ln.p;try{if(Nu.T=null,ln.p=2,t)return t()}finally{Nu.T=e,ln.p=n,ln.d.f()}};fn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,ln.d.C(t,e))};fn.prefetchDNS=function(t){typeof t=="string"&&ln.d.D(t)};fn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=Hh(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?ln.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ln.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};fn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Hh(e.as,e.crossOrigin);ln.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&ln.d.M(t)};fn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=Hh(n,e.crossOrigin);ln.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};fn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Hh(e.as,e.crossOrigin);ln.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else ln.d.m(t)};fn.requestFormReset=function(t){ln.d.r(t)};fn.unstable_batchedUpdates=function(t,e){return t(e)};fn.useFormState=function(t,e,n){return Nu.H.useFormState(t,e,n)};fn.useFormStatus=function(){return Nu.H.useHostTransitionStatus()};fn.version="19.2.0";function sC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sC)}catch(t){console.error(t)}}sC(),iC.exports=fn;var Kh=iC.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At=A1,oC=W,b1=Kh;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function aC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uC(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $E(t){if(Fc(t)!==t)throw Error(B(188))}function x1(t){var e=t.alternate;if(!e){if(e=Fc(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return $E(r),t;if(s===i)return $E(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function cC(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=cC(t),e!==null)return e;t=t.sibling}return null}var He=Object.assign,N1=Symbol.for("react.element"),Fd=Symbol.for("react.transitional.element"),vu=Symbol.for("react.portal"),ca=Symbol.for("react.fragment"),dC=Symbol.for("react.strict_mode"),Sg=Symbol.for("react.profiler"),fC=Symbol.for("react.consumer"),Wi=Symbol.for("react.context"),my=Symbol.for("react.forward_ref"),Ag=Symbol.for("react.suspense"),wg=Symbol.for("react.suspense_list"),gy=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),Cg=Symbol.for("react.activity"),D1=Symbol.for("react.memo_cache_sentinel"),YE=Symbol.iterator;function nu(t){return t===null||typeof t!="object"?null:(t=YE&&t[YE]||t["@@iterator"],typeof t=="function"?t:null)}var P1=Symbol.for("react.client.reference");function Rg(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P1?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ca:return"Fragment";case Sg:return"Profiler";case dC:return"StrictMode";case Ag:return"Suspense";case wg:return"SuspenseList";case Cg:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case vu:return"Portal";case Wi:return t.displayName||"Context";case fC:return(t._context.displayName||"Context")+".Consumer";case my:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gy:return e=t.displayName||null,e!==null?e:Rg(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return Rg(t(e))}catch{}}return null}var Tu=Array.isArray,se=oC.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=b1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,to={pending:!1,data:null,method:null,action:null},bg=[],da=-1;function Ui(t){return{current:t}}function Mt(t){0>da||(t.current=bg[da],bg[da]=null,da--)}function Ue(t,e){da++,bg[da]=t.current,t.current=e}var bi=Ui(null),tc=Ui(null),es=Ui(null),Gf=Ui(null);function zf(t,e){switch(Ue(es,e),Ue(tc,t),Ue(bi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?j0(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=j0(e),t=Pb(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Mt(bi),Ue(bi,t)}function Ba(){Mt(bi),Mt(tc),Mt(es)}function xg(t){t.memoizedState!==null&&Ue(Gf,t);var e=bi.current,n=Pb(e,t.type);e!==n&&(Ue(tc,t),Ue(bi,n))}function Hf(t){tc.current===t&&(Mt(bi),Mt(tc)),Gf.current===t&&(Mt(Gf),fc._currentValue=to)}var gm,JE;function Bs(t){if(gm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gm=e&&e[1]||"",JE=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gm+t+JE}var _m=!1;function ym(t,e){if(!t||_m)return"";_m=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_){var m=_}Reflect.construct(t,[],p)}else{try{p.call()}catch(_){m=_}t.call(p.prototype)}}else{try{throw Error()}catch(_){m=_}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),u=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===u.length)for(i=l.length-1,r=u.length-1;1<=i&&0<=r&&l[i]!==u[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==u[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==u[r]){var f=`
`+l[i].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=i&&0<=r);break}}}finally{_m=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Bs(n):""}function M1(t,e){switch(t.tag){case 26:case 27:case 5:return Bs(t.type);case 16:return Bs("Lazy");case 13:return t.child!==e&&e!==null?Bs("Suspense Fallback"):Bs("Suspense");case 19:return Bs("SuspenseList");case 0:case 15:return ym(t.type,!1);case 11:return ym(t.type.render,!1);case 1:return ym(t.type,!0);case 31:return Bs("Activity");default:return""}}function QE(t){try{var e="",n=null;do e+=M1(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Ng=Object.prototype.hasOwnProperty,_y=At.unstable_scheduleCallback,vm=At.unstable_cancelCallback,k1=At.unstable_shouldYield,V1=At.unstable_requestPaint,kn=At.unstable_now,U1=At.unstable_getCurrentPriorityLevel,hC=At.unstable_ImmediatePriority,pC=At.unstable_UserBlockingPriority,Kf=At.unstable_NormalPriority,L1=At.unstable_LowPriority,mC=At.unstable_IdlePriority,O1=At.log,F1=At.unstable_setDisableYieldValue,qc=null,Vn=null;function $r(t){if(typeof O1=="function"&&F1(t),Vn&&typeof Vn.setStrictMode=="function")try{Vn.setStrictMode(qc,t)}catch{}}var Un=Math.clz32?Math.clz32:G1,q1=Math.log,B1=Math.LN2;function G1(t){return t>>>=0,t===0?32:31-(q1(t)/B1|0)|0}var qd=256,Bd=262144,Gd=4194304;function Gs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $h(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~s,i!==0?r=Gs(i):(o&=a,o!==0?r=Gs(o):n||(n=a&~t,n!==0&&(r=Gs(n))))):(a=i&~s,a!==0?r=Gs(a):o!==0?r=Gs(o):n||(n=i&~t,n!==0&&(r=Gs(n)))),r===0?0:e!==0&&e!==r&&!(e&s)&&(s=r&-r,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:r}function Bc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function z1(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gC(){var t=Gd;return Gd<<=1,!(Gd&62914560)&&(Gd=4194304),t}function Tm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gc(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function H1(t,e,n,i,r,s){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,l=t.expirationTimes,u=t.hiddenUpdates;for(n=o&~n;0<n;){var f=31-Un(n),p=1<<f;a[f]=0,l[f]=-1;var m=u[f];if(m!==null)for(u[f]=null,f=0;f<m.length;f++){var _=m[f];_!==null&&(_.lane&=-536870913)}n&=~p}i!==0&&_C(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(o&~e))}function _C(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Un(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function yC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Un(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function vC(t,e){var n=e&-e;return n=n&42?1:yy(n),n&(t.suspendedLanes|e)?0:n}function yy(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vy(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function TC(){var t=Se.p;return t!==0?t:(t=window.event,t===void 0?32:zb(t.type))}function WE(t,e){var n=Se.p;try{return Se.p=t,e()}finally{Se.p=n}}var ws=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ws,An="__reactProps$"+ws,gl="__reactContainer$"+ws,Dg="__reactEvents$"+ws,K1="__reactListeners$"+ws,$1="__reactHandles$"+ws,XE="__reactResources$"+ws,zc="__reactMarker$"+ws;function Ty(t){delete t[Ot],delete t[An],delete t[Dg],delete t[K1],delete t[$1]}function fa(t){var e=t[Ot];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gl]||n[Ot]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rI(t);t!==null;){if(n=t[Ot])return n;t=rI(t)}return e}t=n,n=t.parentNode}return null}function _l(t){if(t=t[Ot]||t[gl]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Eu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function Aa(t){var e=t[XE];return e||(e=t[XE]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Pt(t){t[zc]=!0}var EC=new Set,IC={};function No(t,e){Ga(t,e),Ga(t+"Capture",e)}function Ga(t,e){for(IC[t]=e,t=0;t<e.length;t++)EC.add(e[t])}var Y1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ZE={},jE={};function J1(t){return Ng.call(jE,t)?!0:Ng.call(ZE,t)?!1:Y1.test(t)?jE[t]=!0:(ZE[t]=!0,!1)}function ff(t,e,n){if(J1(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function zd(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Gi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Kn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function SC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q1(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pg(t){if(!t._valueTracker){var e=SC(t)?"checked":"value";t._valueTracker=Q1(t,e,""+t[e])}}function AC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=SC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function $f(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var W1=/[\n"\\]/g;function Jn(t){return t.replace(W1,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Mg(t,e,n,i,r,s,o,a){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Kn(e)):t.value!==""+Kn(e)&&(t.value=""+Kn(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?kg(t,o,Kn(e)):n!=null?kg(t,o,Kn(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+Kn(a):t.removeAttribute("name")}function wC(t,e,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){Pg(t);return}n=n!=null?""+Kn(n):"",e=e!=null?""+Kn(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),Pg(t)}function kg(t,e,n){e==="number"&&$f(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function wa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Kn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function CC(t,e,n){if(e!=null&&(e=""+Kn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Kn(n):""}function RC(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(Tu(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Kn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Pg(t)}function za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var X1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function e0(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||X1.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function bC(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&e0(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&e0(t,s,e[s])}function Ey(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hf(t){return j1.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Xi(){}var Vg=null;function Iy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ha=null,Ca=null;function t0(t){var e=_l(t);if(e&&(t=e.stateNode)){var n=t[An]||null;e:switch(t=e.stateNode,e.type){case"input":if(Mg(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Jn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[An]||null;if(!r)throw Error(B(90));Mg(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&AC(i)}break e;case"textarea":CC(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&wa(t,!!n.multiple,e,!1)}}}var Em=!1;function xC(t,e,n){if(Em)return t(e,n);Em=!0;try{var i=t(e);return i}finally{if(Em=!1,(ha!==null||Ca!==null)&&(rp(),ha&&(e=ha,t=Ca,Ca=ha=null,t0(e),t)))for(e=0;e<t.length;e++)t0(t[e])}}function nc(t,e){var n=t.stateNode;if(n===null)return null;var i=n[An]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ug=!1;if(lr)try{var iu={};Object.defineProperty(iu,"passive",{get:function(){Ug=!0}}),window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{Ug=!1}var Yr=null,Sy=null,pf=null;function NC(){if(pf)return pf;var t,e=Sy,n=e.length,i,r="value"in Yr?Yr.value:Yr.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return pf=r.slice(t,1<i?1-i:void 0)}function mf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hd(){return!0}function n0(){return!1}function wn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hd:n0,this.isPropagationStopped=n0,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hd)},persist:function(){},isPersistent:Hd}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yh=wn(Do),Hc=He({},Do,{view:0,detail:0}),ek=wn(Hc),Im,Sm,ru,Jh=He({},Hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ru&&(ru&&t.type==="mousemove"?(Im=t.screenX-ru.screenX,Sm=t.screenY-ru.screenY):Sm=Im=0,ru=t),Im)},movementY:function(t){return"movementY"in t?t.movementY:Sm}}),i0=wn(Jh),tk=He({},Jh,{dataTransfer:0}),nk=wn(tk),ik=He({},Hc,{relatedTarget:0}),Am=wn(ik),rk=He({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),sk=wn(rk),ok=He({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ak=wn(ok),lk=He({},Do,{data:0}),r0=wn(lk),uk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ck={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dk[t])?!!e[t]:!1}function Ay(){return fk}var hk=He({},Hc,{key:function(t){if(t.key){var e=uk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ck[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(t){return t.type==="keypress"?mf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pk=wn(hk),mk=He({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s0=wn(mk),gk=He({},Hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),_k=wn(gk),yk=He({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),vk=wn(yk),Tk=He({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ek=wn(Tk),Ik=He({},Do,{newState:0,oldState:0}),Sk=wn(Ik),Ak=[9,13,27,32],wy=lr&&"CompositionEvent"in window,Du=null;lr&&"documentMode"in document&&(Du=document.documentMode);var wk=lr&&"TextEvent"in window&&!Du,DC=lr&&(!wy||Du&&8<Du&&11>=Du),o0=" ",a0=!1;function PC(t,e){switch(t){case"keyup":return Ak.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pa=!1;function Ck(t,e){switch(t){case"compositionend":return MC(e);case"keypress":return e.which!==32?null:(a0=!0,o0);case"textInput":return t=e.data,t===o0&&a0?null:t;default:return null}}function Rk(t,e){if(pa)return t==="compositionend"||!wy&&PC(t,e)?(t=NC(),pf=Sy=Yr=null,pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DC&&e.locale!=="ko"?null:e.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bk[t.type]:e==="textarea"}function kC(t,e,n,i){ha?Ca?Ca.push(i):Ca=[i]:ha=i,e=ch(e,"onChange"),0<e.length&&(n=new Yh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Pu=null,ic=null;function xk(t){xb(t,0)}function Qh(t){var e=Eu(t);if(AC(e))return t}function u0(t,e){if(t==="change")return e}var VC=!1;if(lr){var wm;if(lr){var Cm="oninput"in document;if(!Cm){var c0=document.createElement("div");c0.setAttribute("oninput","return;"),Cm=typeof c0.oninput=="function"}wm=Cm}else wm=!1;VC=wm&&(!document.documentMode||9<document.documentMode)}function d0(){Pu&&(Pu.detachEvent("onpropertychange",UC),ic=Pu=null)}function UC(t){if(t.propertyName==="value"&&Qh(ic)){var e=[];kC(e,ic,t,Iy(t)),xC(xk,e)}}function Nk(t,e,n){t==="focusin"?(d0(),Pu=e,ic=n,Pu.attachEvent("onpropertychange",UC)):t==="focusout"&&d0()}function Dk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qh(ic)}function Pk(t,e){if(t==="click")return Qh(e)}function Mk(t,e){if(t==="input"||t==="change")return Qh(e)}function kk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:kk;function rc(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ng.call(e,r)||!Fn(t[r],e[r]))return!1}return!0}function f0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h0(t,e){var n=f0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f0(n)}}function LC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OC(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=$f(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$f(t.document)}return e}function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Vk=lr&&"documentMode"in document&&11>=document.documentMode,ma=null,Lg=null,Mu=null,Og=!1;function p0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Og||ma==null||ma!==$f(i)||(i=ma,"selectionStart"in i&&Cy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Mu&&rc(Mu,i)||(Mu=i,i=ch(Lg,"onSelect"),0<i.length&&(e=new Yh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ma)))}function Fs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ga={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},Rm={},FC={};lr&&(FC=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Po(t){if(Rm[t])return Rm[t];if(!ga[t])return t;var e=ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in FC)return Rm[t]=e[n];return t}var qC=Po("animationend"),BC=Po("animationiteration"),GC=Po("animationstart"),Uk=Po("transitionrun"),Lk=Po("transitionstart"),Ok=Po("transitioncancel"),zC=Po("transitionend"),HC=new Map,Fg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fg.push("scrollEnd");function fi(t,e){HC.set(t,e),No(e,[t])}var Yf=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Hn=[],_a=0,Ry=0;function Wh(){for(var t=_a,e=Ry=_a=0;e<t;){var n=Hn[e];Hn[e++]=null;var i=Hn[e];Hn[e++]=null;var r=Hn[e];Hn[e++]=null;var s=Hn[e];if(Hn[e++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&KC(n,r,s)}}function Xh(t,e,n,i){Hn[_a++]=t,Hn[_a++]=e,Hn[_a++]=n,Hn[_a++]=i,Ry|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function by(t,e,n,i){return Xh(t,e,n,i),Jf(t)}function Mo(t,e){return Xh(t,null,null,e),Jf(t)}function KC(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,r&&e!==null&&(r=31-Un(n),t=s.hiddenUpdates,i=t[r],i===null?t[r]=[e]:i.push(e),e.lane=n|536870912),s):null}function Jf(t){if(50<Gu)throw Gu=0,o_=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var ya={};function Fk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,i){return new Fk(t,e,n,i)}function xy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ir(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function $C(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function gf(t,e,n,i,r,s){var o=0;if(i=t,typeof t=="function")xy(t)&&(o=1);else if(typeof t=="string")o=HV(t,n,bi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Cg:return t=Dn(31,n,e,r),t.elementType=Cg,t.lanes=s,t;case ca:return no(n.children,r,s,e);case dC:o=8,r|=24;break;case Sg:return t=Dn(12,n,e,r|2),t.elementType=Sg,t.lanes=s,t;case Ag:return t=Dn(13,n,e,r),t.elementType=Ag,t.lanes=s,t;case wg:return t=Dn(19,n,e,r),t.elementType=wg,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wi:o=10;break e;case fC:o=9;break e;case my:o=11;break e;case gy:o=14;break e;case Or:o=16,i=null;break e}o=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=Dn(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function no(t,e,n,i){return t=Dn(7,t,i,e),t.lanes=n,t}function bm(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function YC(t){var e=Dn(18,null,null,0);return e.stateNode=t,e}function xm(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var m0=new WeakMap;function Qn(t,e){if(typeof t=="object"&&t!==null){var n=m0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:QE(e)},m0.set(t,e),e)}return{value:t,source:e,stack:QE(e)}}var va=[],Ta=0,Qf=null,sc=0,$n=[],Yn=0,ds=null,Ii=1,Si="";function Yi(t,e){va[Ta++]=sc,va[Ta++]=Qf,Qf=t,sc=e}function JC(t,e,n){$n[Yn++]=Ii,$n[Yn++]=Si,$n[Yn++]=ds,ds=t;var i=Ii;t=Si;var r=32-Un(i)-1;i&=~(1<<r),n+=1;var s=32-Un(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ii=1<<32-Un(e)+r|n<<r|i,Si=s+t}else Ii=1<<s|n<<r|i,Si=t}function Ny(t){t.return!==null&&(Yi(t,1),JC(t,1,0))}function Dy(t){for(;t===Qf;)Qf=va[--Ta],va[Ta]=null,sc=va[--Ta],va[Ta]=null;for(;t===ds;)ds=$n[--Yn],$n[Yn]=null,Si=$n[--Yn],$n[Yn]=null,Ii=$n[--Yn],$n[Yn]=null}function QC(t,e){$n[Yn++]=Ii,$n[Yn++]=Si,$n[Yn++]=ds,Ii=e.id,Si=e.overflow,ds=t}var Ft=null,Be=null,_e=!1,ts=null,Wn=!1,qg=Error(B(519));function fs(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oc(Qn(e,t)),qg}function g0(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Ot]=t,e[An]=i,n){case"dialog":de("cancel",e),de("close",e);break;case"iframe":case"object":case"embed":de("load",e);break;case"video":case"audio":for(n=0;n<cc.length;n++)de(cc[n],e);break;case"source":de("error",e);break;case"img":case"image":case"link":de("error",e),de("load",e);break;case"details":de("toggle",e);break;case"input":de("invalid",e),wC(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":de("invalid",e);break;case"textarea":de("invalid",e),RC(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||Db(e.textContent,n)?(i.popover!=null&&(de("beforetoggle",e),de("toggle",e)),i.onScroll!=null&&de("scroll",e),i.onScrollEnd!=null&&de("scrollend",e),i.onClick!=null&&(e.onclick=Xi),e=!0):e=!1,e||fs(t,!0)}function _0(t){for(Ft=t.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Ft=Ft.return}}function Jo(t){if(t!==Ft)return!1;if(!_e)return _0(t),_e=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||d_(t.type,t.memoizedProps)),n=!n),n&&Be&&fs(t),_0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=iI(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Be=iI(t)}else e===27?(e=Be,Cs(t.type)?(t=m_,m_=null,Be=t):Be=e):Be=Ft?ei(t.stateNode.nextSibling):null;return!0}function co(){Be=Ft=null,_e=!1}function Nm(){var t=ts;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),ts=null),t}function oc(t){ts===null?ts=[t]:ts.push(t)}var Bg=Ui(null),ko=null,Zi=null;function qr(t,e,n){Ue(Bg,e._currentValue),e._currentValue=n}function rr(t){t._currentValue=Bg.current,Mt(Bg)}function Gg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function zg(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<e.length;l++)if(a.context===e[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Gg(s.return,n,t),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(B(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Gg(o,n,t),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function yl(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(B(387));if(o=o.memoizedProps,o!==null){var a=r.type;Fn(r.pendingProps.value,o.value)||(t!==null?t.push(a):t=[a])}}else if(r===Gf.current){if(o=r.alternate,o===null)throw Error(B(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(fc):t=[fc])}r=r.return}t!==null&&zg(e,t,n,i),e.flags|=262144}function Wf(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function fo(t){ko=t,Zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return WC(ko,t)}function Kd(t,e){return ko===null&&fo(t),WC(t,e)}function WC(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Zi===null){if(t===null)throw Error(B(308));Zi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zi=Zi.next=e;return n}var qk=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Bk=At.unstable_scheduleCallback,Gk=At.unstable_NormalPriority,Tt={$$typeof:Wi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Py(){return{controller:new qk,data:new Map,refCount:0}}function Kc(t){t.refCount--,t.refCount===0&&Bk(Gk,function(){t.controller.abort()})}var ku=null,Hg=0,Ha=0,Ra=null;function zk(t,e){if(ku===null){var n=ku=[];Hg=0,Ha=iv(),Ra={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Hg++,e.then(y0,y0),e}function y0(){if(--Hg===0&&ku!==null){Ra!==null&&(Ra.status="fulfilled");var t=ku;ku=null,Ha=0,Ra=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Hk(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var v0=se.S;se.S=function(t,e){cb=kn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&zk(t,e),v0!==null&&v0(t,e)};var io=Ui(null);function My(){var t=io.current;return t!==null?t:Me.pooledCache}function _f(t,e){e===null?Ue(io,io.current):Ue(io,e.pool)}function XC(){var t=My();return t===null?null:{parent:Tt._currentValue,pool:t}}var vl=Error(B(460)),ky=Error(B(474)),Zh=Error(B(542)),Xf={then:function(){}};function T0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ZC(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Xi,Xi),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,I0(t),t;default:if(typeof e.status=="string")e.then(Xi,Xi);else{if(t=Me,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,I0(t),t}throw ro=e,vl}}function zs(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ro=n,vl):n}}var ro=null;function E0(){if(ro===null)throw Error(B(459));var t=ro;return ro=null,t}function I0(t){if(t===vl||t===Zh)throw Error(B(483))}var ba=null,ac=0;function $d(t){var e=ac;return ac+=1,ba===null&&(ba=[]),ZC(ba,t,e)}function su(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Yd(t,e){throw e.$$typeof===N1?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function jC(t){function e(T,v){if(t){var A=T.deletions;A===null?(T.deletions=[v],T.flags|=16):A.push(v)}}function n(T,v){if(!t)return null;for(;v!==null;)e(T,v),v=v.sibling;return null}function i(T){for(var v=new Map;T!==null;)T.key!==null?v.set(T.key,T):v.set(T.index,T),T=T.sibling;return v}function r(T,v){return T=ir(T,v),T.index=0,T.sibling=null,T}function s(T,v,A){return T.index=A,t?(A=T.alternate,A!==null?(A=A.index,A<v?(T.flags|=67108866,v):A):(T.flags|=67108866,v)):(T.flags|=1048576,v)}function o(T){return t&&T.alternate===null&&(T.flags|=67108866),T}function a(T,v,A,N){return v===null||v.tag!==6?(v=bm(A,T.mode,N),v.return=T,v):(v=r(v,A),v.return=T,v)}function l(T,v,A,N){var L=A.type;return L===ca?f(T,v,A.props.children,N,A.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Or&&zs(L)===v.type)?(v=r(v,A.props),su(v,A),v.return=T,v):(v=gf(A.type,A.key,A.props,null,T.mode,N),su(v,A),v.return=T,v)}function u(T,v,A,N){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=xm(A,T.mode,N),v.return=T,v):(v=r(v,A.children||[]),v.return=T,v)}function f(T,v,A,N,L){return v===null||v.tag!==7?(v=no(A,T.mode,N,L),v.return=T,v):(v=r(v,A),v.return=T,v)}function p(T,v,A){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=bm(""+v,T.mode,A),v.return=T,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fd:return A=gf(v.type,v.key,v.props,null,T.mode,A),su(A,v),A.return=T,A;case vu:return v=xm(v,T.mode,A),v.return=T,v;case Or:return v=zs(v),p(T,v,A)}if(Tu(v)||nu(v))return v=no(v,T.mode,A,null),v.return=T,v;if(typeof v.then=="function")return p(T,$d(v),A);if(v.$$typeof===Wi)return p(T,Kd(T,v),A);Yd(T,v)}return null}function m(T,v,A,N){var L=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return L!==null?null:a(T,v,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Fd:return A.key===L?l(T,v,A,N):null;case vu:return A.key===L?u(T,v,A,N):null;case Or:return A=zs(A),m(T,v,A,N)}if(Tu(A)||nu(A))return L!==null?null:f(T,v,A,N,null);if(typeof A.then=="function")return m(T,v,$d(A),N);if(A.$$typeof===Wi)return m(T,v,Kd(T,A),N);Yd(T,A)}return null}function _(T,v,A,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return T=T.get(A)||null,a(v,T,""+N,L);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fd:return T=T.get(N.key===null?A:N.key)||null,l(v,T,N,L);case vu:return T=T.get(N.key===null?A:N.key)||null,u(v,T,N,L);case Or:return N=zs(N),_(T,v,A,N,L)}if(Tu(N)||nu(N))return T=T.get(A)||null,f(v,T,N,L,null);if(typeof N.then=="function")return _(T,v,A,$d(N),L);if(N.$$typeof===Wi)return _(T,v,A,Kd(v,N),L);Yd(v,N)}return null}function S(T,v,A,N){for(var L=null,F=null,C=v,E=v=0,w=null;C!==null&&E<A.length;E++){C.index>E?(w=C,C=null):w=C.sibling;var x=m(T,C,A[E],N);if(x===null){C===null&&(C=w);break}t&&C&&x.alternate===null&&e(T,C),v=s(x,v,E),F===null?L=x:F.sibling=x,F=x,C=w}if(E===A.length)return n(T,C),_e&&Yi(T,E),L;if(C===null){for(;E<A.length;E++)C=p(T,A[E],N),C!==null&&(v=s(C,v,E),F===null?L=C:F.sibling=C,F=C);return _e&&Yi(T,E),L}for(C=i(C);E<A.length;E++)w=_(C,T,E,A[E],N),w!==null&&(t&&w.alternate!==null&&C.delete(w.key===null?E:w.key),v=s(w,v,E),F===null?L=w:F.sibling=w,F=w);return t&&C.forEach(function(M){return e(T,M)}),_e&&Yi(T,E),L}function b(T,v,A,N){if(A==null)throw Error(B(151));for(var L=null,F=null,C=v,E=v=0,w=null,x=A.next();C!==null&&!x.done;E++,x=A.next()){C.index>E?(w=C,C=null):w=C.sibling;var M=m(T,C,x.value,N);if(M===null){C===null&&(C=w);break}t&&C&&M.alternate===null&&e(T,C),v=s(M,v,E),F===null?L=M:F.sibling=M,F=M,C=w}if(x.done)return n(T,C),_e&&Yi(T,E),L;if(C===null){for(;!x.done;E++,x=A.next())x=p(T,x.value,N),x!==null&&(v=s(x,v,E),F===null?L=x:F.sibling=x,F=x);return _e&&Yi(T,E),L}for(C=i(C);!x.done;E++,x=A.next())x=_(C,T,E,x.value,N),x!==null&&(t&&x.alternate!==null&&C.delete(x.key===null?E:x.key),v=s(x,v,E),F===null?L=x:F.sibling=x,F=x);return t&&C.forEach(function(k){return e(T,k)}),_e&&Yi(T,E),L}function P(T,v,A,N){if(typeof A=="object"&&A!==null&&A.type===ca&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Fd:e:{for(var L=A.key;v!==null;){if(v.key===L){if(L=A.type,L===ca){if(v.tag===7){n(T,v.sibling),N=r(v,A.props.children),N.return=T,T=N;break e}}else if(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Or&&zs(L)===v.type){n(T,v.sibling),N=r(v,A.props),su(N,A),N.return=T,T=N;break e}n(T,v);break}else e(T,v);v=v.sibling}A.type===ca?(N=no(A.props.children,T.mode,N,A.key),N.return=T,T=N):(N=gf(A.type,A.key,A.props,null,T.mode,N),su(N,A),N.return=T,T=N)}return o(T);case vu:e:{for(L=A.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){n(T,v.sibling),N=r(v,A.children||[]),N.return=T,T=N;break e}else{n(T,v);break}else e(T,v);v=v.sibling}N=xm(A,T.mode,N),N.return=T,T=N}return o(T);case Or:return A=zs(A),P(T,v,A,N)}if(Tu(A))return S(T,v,A,N);if(nu(A)){if(L=nu(A),typeof L!="function")throw Error(B(150));return A=L.call(A),b(T,v,A,N)}if(typeof A.then=="function")return P(T,v,$d(A),N);if(A.$$typeof===Wi)return P(T,v,Kd(T,A),N);Yd(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,v!==null&&v.tag===6?(n(T,v.sibling),N=r(v,A),N.return=T,T=N):(n(T,v),N=bm(A,T.mode,N),N.return=T,T=N),o(T)):n(T,v)}return function(T,v,A,N){try{ac=0;var L=P(T,v,A,N);return ba=null,L}catch(C){if(C===vl||C===Zh)throw C;var F=Dn(29,C,null,T.mode);return F.lanes=N,F.return=T,F}finally{}}}var ho=jC(!0),eR=jC(!1),Fr=!1;function Vy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function is(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ie&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=Jf(t),KC(t,null,n),e}return Xh(t,i,e,n),Jf(t)}function Vu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yC(t,n)}}function Dm(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var $g=!1;function Uu(){if($g){var t=Ra;if(t!==null)throw t}}function Lu(t,e,n,i){$g=!1;var r=t.updateQueue;Fr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;o=0,f=u=l=null,a=s;do{var m=a.lane&-536870913,_=m!==a.lane;if(_?(me&m)===m:(i&m)===m){m!==0&&m===Ha&&($g=!0),f!==null&&(f=f.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var S=t,b=a;m=e;var P=n;switch(b.tag){case 1:if(S=b.payload,typeof S=="function"){p=S.call(P,p,m);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=b.payload,m=typeof S=="function"?S.call(P,p,m):S,m==null)break e;p=He({},p,m);break e;case 2:Fr=!0}}m=a.callback,m!==null&&(t.flags|=64,_&&(t.flags|=8192),_=r.callbacks,_===null?r.callbacks=[m]:_.push(m))}else _={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=_,l=p):f=f.next=_,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;_=a,a=_.next,_.next=null,r.lastBaseUpdate=_,r.shared.pending=null}}while(!0);f===null&&(l=p),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=f,s===null&&(r.shared.lanes=0),ps|=o,t.lanes=o,t.memoizedState=p}}function tR(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function nR(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)tR(n[t],e)}var Ka=Ui(null),Zf=Ui(0);function S0(t,e){t=fr,Ue(Zf,t),Ue(Ka,e),fr=t|e.baseLanes}function Yg(){Ue(Zf,fr),Ue(Ka,Ka.current)}function Uy(){fr=Zf.current,Mt(Ka),Mt(Zf)}var qn=Ui(null),jn=null;function Br(t){var e=t.alternate;Ue(ct,ct.current&1),Ue(qn,t),jn===null&&(e===null||Ka.current!==null||e.memoizedState!==null)&&(jn=t)}function Jg(t){Ue(ct,ct.current),Ue(qn,t),jn===null&&(jn=t)}function iR(t){t.tag===22?(Ue(ct,ct.current),Ue(qn,t),jn===null&&(jn=t)):Gr()}function Gr(){Ue(ct,ct.current),Ue(qn,qn.current)}function xn(t){Mt(qn),jn===t&&(jn=null),Mt(ct)}var ct=Ui(0);function jf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||h_(n)||p_(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ur=0,ue=null,xe=null,yt=null,eh=!1,xa=!1,po=!1,th=0,lc=0,Na=null,Kk=0;function it(){throw Error(B(321))}function Ly(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function Oy(t,e,n,i,r,s){return ur=s,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,se.H=t===null||t.memoizedState===null?kR:Qy,po=!1,s=n(i,r),po=!1,xa&&(s=sR(e,n,i,r)),rR(t),s}function rR(t){se.H=uc;var e=xe!==null&&xe.next!==null;if(ur=0,yt=xe=ue=null,eh=!1,lc=0,Na=null,e)throw Error(B(300));t===null||Et||(t=t.dependencies,t!==null&&Wf(t)&&(Et=!0))}function sR(t,e,n,i){ue=t;var r=0;do{if(xa&&(Na=null),lc=0,xa=!1,25<=r)throw Error(B(301));if(r+=1,yt=xe=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}se.H=VR,s=e(n,i)}while(xa);return s}function $k(){var t=se.H,e=t.useState()[0];return e=typeof e.then=="function"?$c(e):e,t=t.useState()[0],(xe!==null?xe.memoizedState:null)!==t&&(ue.flags|=1024),e}function Fy(){var t=th!==0;return th=0,t}function qy(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function By(t){if(eh){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}eh=!1}ur=0,yt=xe=ue=null,xa=!1,lc=th=0,Na=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?ue.memoizedState=yt=t:yt=yt.next=t,yt}function ft(){if(xe===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=xe.next;var e=yt===null?ue.memoizedState:yt.next;if(e!==null)yt=e,xe=t;else{if(t===null)throw ue.alternate===null?Error(B(467)):Error(B(310));xe=t,t={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},yt===null?ue.memoizedState=yt=t:yt=yt.next=t}return yt}function jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(t){var e=lc;return lc+=1,Na===null&&(Na=[]),t=ZC(Na,t,e),e=ue,(yt===null?e.memoizedState:yt.next)===null&&(e=e.alternate,se.H=e===null||e.memoizedState===null?kR:Qy),t}function ep(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return $c(t);if(t.$$typeof===Wi)return Bt(t)}throw Error(B(438,String(t)))}function Gy(t){var e=null,n=ue.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ue.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=jh(),ue.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=D1;return e.index++,n}function cr(t,e){return typeof e=="function"?e(t):e}function yf(t){var e=ft();return zy(e,xe,t)}function zy(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var a=o=null,l=null,u=e,f=!1;do{var p=u.lane&-536870913;if(p!==u.lane?(me&p)===p:(ur&p)===p){var m=u.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===Ha&&(f=!0);else if((ur&m)===m){u=u.next,m===Ha&&(f=!0);continue}else p={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(a=l=p,o=s):l=l.next=p,ue.lanes|=m,ps|=m;p=u.action,po&&n(s,p),s=u.hasEagerState?u.eagerState:n(s,p)}else m={lane:p,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(a=l=m,o=s):l=l.next=m,ue.lanes|=p,ps|=p;u=u.next}while(u!==null&&u!==e);if(l===null?o=s:l.next=a,!Fn(s,t.memoizedState)&&(Et=!0,f&&(n=Ra,n!==null)))throw n;t.memoizedState=s,t.baseState=o,t.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Pm(t){var e=ft(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Fn(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function oR(t,e,n){var i=ue,r=ft(),s=_e;if(s){if(n===void 0)throw Error(B(407));n=n()}else n=e();var o=!Fn((xe||r).memoizedState,n);if(o&&(r.memoizedState=n,Et=!0),r=r.queue,Hy(uR.bind(null,i,r,t),[t]),r.getSnapshot!==e||o||yt!==null&&yt.memoizedState.tag&1){if(i.flags|=2048,$a(9,{destroy:void 0},lR.bind(null,i,r,n,e),null),Me===null)throw Error(B(349));s||ur&127||aR(i,e,n)}return n}function aR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e=jh(),ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lR(t,e,n,i){e.value=n,e.getSnapshot=i,cR(e)&&dR(t)}function uR(t,e,n){return n(function(){cR(e)&&dR(t)})}function cR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function dR(t){var e=Mo(t,2);e!==null&&Sn(e,t,2)}function Qg(t){var e=rn();if(typeof t=="function"){var n=t;if(t=n(),po){$r(!0);try{n()}finally{$r(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:t},e}function fR(t,e,n,i){return t.baseState=n,zy(t,xe,typeof i=="function"?i:cr)}function Yk(t,e,n,i,r){if(np(t))throw Error(B(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};se.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,hR(e,s)):(s.next=n.next,e.pending=n.next=s)}}function hR(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=se.T,o={};se.T=o;try{var a=n(r,i),l=se.S;l!==null&&l(o,a),A0(t,e,a)}catch(u){Wg(t,e,u)}finally{s!==null&&o.types!==null&&(s.types=o.types),se.T=s}}else try{s=n(r,i),A0(t,e,s)}catch(u){Wg(t,e,u)}}function A0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){w0(t,e,i)},function(i){return Wg(t,e,i)}):w0(t,e,n)}function w0(t,e,n){e.status="fulfilled",e.value=n,pR(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,hR(t,n)))}function Wg(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,pR(e),e=e.next;while(e!==i)}t.action=null}function pR(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function mR(t,e){return e}function C0(t,e){if(_e){var n=Me.formState;if(n!==null){e:{var i=ue;if(_e){if(Be){t:{for(var r=Be,s=Wn;r.nodeType!==8;){if(!s){r=null;break t}if(r=ei(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Be=ei(r.nextSibling),i=r.data==="F!";break e}}fs(i)}i=!1}i&&(e=n[0])}}return n=rn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mR,lastRenderedState:e},n.queue=i,n=DR.bind(null,ue,i),i.dispatch=n,i=Qg(!1),s=Jy.bind(null,ue,!1,i.queue),i=rn(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=Yk.bind(null,ue,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function R0(t){var e=ft();return gR(e,xe,t)}function gR(t,e,n){if(e=zy(t,e,mR)[0],t=yf(cr)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=$c(e)}catch(o){throw o===vl?Zh:o}else i=e;e=ft();var r=e.queue,s=r.dispatch;return n!==e.memoizedState&&(ue.flags|=2048,$a(9,{destroy:void 0},Jk.bind(null,r,n),null)),[i,s,t]}function Jk(t,e){t.action=e}function b0(t){var e=ft(),n=xe;if(n!==null)return gR(e,n,t);ft(),e=e.memoizedState,n=ft();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function $a(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ue.updateQueue,e===null&&(e=jh(),ue.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function _R(){return ft().memoizedState}function vf(t,e,n,i){var r=rn();ue.flags|=t,r.memoizedState=$a(1|e,{destroy:void 0},n,i===void 0?null:i)}function tp(t,e,n,i){var r=ft();i=i===void 0?null:i;var s=r.memoizedState.inst;xe!==null&&i!==null&&Ly(i,xe.memoizedState.deps)?r.memoizedState=$a(e,s,n,i):(ue.flags|=t,r.memoizedState=$a(1|e,s,n,i))}function x0(t,e){vf(8390656,8,t,e)}function Hy(t,e){tp(2048,8,t,e)}function Qk(t){ue.flags|=4;var e=ue.updateQueue;if(e===null)e=jh(),ue.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function yR(t){var e=ft().memoizedState;return Qk({ref:e,nextImpl:t}),function(){if(Ie&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function vR(t,e){return tp(4,2,t,e)}function TR(t,e){return tp(4,4,t,e)}function ER(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IR(t,e,n){n=n!=null?n.concat([t]):null,tp(4,4,ER.bind(null,e,t),n)}function Ky(){}function SR(t,e){var n=ft();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Ly(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function AR(t,e){var n=ft();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Ly(e,i[1]))return i[0];if(i=t(),po){$r(!0);try{t()}finally{$r(!1)}}return n.memoizedState=[i,e],i}function $y(t,e,n){return n===void 0||ur&1073741824&&!(me&261930)?t.memoizedState=e:(t.memoizedState=n,t=fb(),ue.lanes|=t,ps|=t,n)}function wR(t,e,n,i){return Fn(n,e)?n:Ka.current!==null?(t=$y(t,n,i),Fn(t,e)||(Et=!0),t):!(ur&42)||ur&1073741824&&!(me&261930)?(Et=!0,t.memoizedState=n):(t=fb(),ue.lanes|=t,ps|=t,e)}function CR(t,e,n,i,r){var s=Se.p;Se.p=s!==0&&8>s?s:8;var o=se.T,a={};se.T=a,Jy(t,!1,e,n);try{var l=r(),u=se.S;if(u!==null&&u(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var f=Hk(l,i);Ou(t,e,f,Ln(t))}else Ou(t,e,i,Ln(t))}catch(p){Ou(t,e,{then:function(){},status:"rejected",reason:p},Ln())}finally{Se.p=s,o!==null&&a.types!==null&&(o.types=a.types),se.T=o}}function Wk(){}function Xg(t,e,n,i){if(t.tag!==5)throw Error(B(476));var r=RR(t).queue;CR(t,r,e,to,n===null?Wk:function(){return bR(t),n(i)})}function RR(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:to,baseState:to,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:to},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function bR(t){var e=RR(t);e.next===null&&(e=t.alternate.memoizedState),Ou(t,e.next.queue,{},Ln())}function Yy(){return Bt(fc)}function xR(){return ft().memoizedState}function NR(){return ft().memoizedState}function Xk(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ln();t=ns(n);var i=is(e,t,n);i!==null&&(Sn(i,e,n),Vu(i,e,n)),e={cache:Py()},t.payload=e;return}e=e.return}}function Zk(t,e,n){var i=Ln();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},np(t)?PR(e,n):(n=by(t,e,n,i),n!==null&&(Sn(n,t,i),MR(n,e,i)))}function DR(t,e,n){var i=Ln();Ou(t,e,n,i)}function Ou(t,e,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(np(t))PR(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Fn(a,o))return Xh(t,e,r,0),Me===null&&Wh(),!1}catch{}finally{}if(n=by(t,e,r,i),n!==null)return Sn(n,t,i),MR(n,e,i),!0}return!1}function Jy(t,e,n,i){if(i={lane:2,revertLane:iv(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},np(t)){if(e)throw Error(B(479))}else e=by(t,n,i,2),e!==null&&Sn(e,t,2)}function np(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function PR(t,e){xa=eh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MR(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,yC(t,n)}}var uc={readContext:Bt,use:ep,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};uc.useEffectEvent=it;var kR={readContext:Bt,use:ep,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:x0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,vf(4194308,4,ER.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vf(4194308,4,t,e)},useInsertionEffect:function(t,e){vf(4,2,t,e)},useMemo:function(t,e){var n=rn();e=e===void 0?null:e;var i=t();if(po){$r(!0);try{t()}finally{$r(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=rn();if(n!==void 0){var r=n(e);if(po){$r(!0);try{n(e)}finally{$r(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=Zk.bind(null,ue,t),[i.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:function(t){t=Qg(t);var e=t.queue,n=DR.bind(null,ue,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Ky,useDeferredValue:function(t,e){var n=rn();return $y(n,t,e)},useTransition:function(){var t=Qg(!1);return t=CR.bind(null,ue,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ue,r=rn();if(_e){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Me===null)throw Error(B(349));me&127||aR(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,x0(uR.bind(null,i,s,t),[t]),i.flags|=2048,$a(9,{destroy:void 0},lR.bind(null,i,s,n,e),null),n},useId:function(){var t=rn(),e=Me.identifierPrefix;if(_e){var n=Si,i=Ii;n=(i&~(1<<32-Un(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=th++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=Kk++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Yy,useFormState:C0,useActionState:C0,useOptimistic:function(t){var e=rn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Jy.bind(null,ue,!0,n),n.dispatch=e,[t,e]},useMemoCache:Gy,useCacheRefresh:function(){return rn().memoizedState=Xk.bind(null,ue)},useEffectEvent:function(t){var e=rn(),n={impl:t};return e.memoizedState=n,function(){if(Ie&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},Qy={readContext:Bt,use:ep,useCallback:SR,useContext:Bt,useEffect:Hy,useImperativeHandle:IR,useInsertionEffect:vR,useLayoutEffect:TR,useMemo:AR,useReducer:yf,useRef:_R,useState:function(){return yf(cr)},useDebugValue:Ky,useDeferredValue:function(t,e){var n=ft();return wR(n,xe.memoizedState,t,e)},useTransition:function(){var t=yf(cr)[0],e=ft().memoizedState;return[typeof t=="boolean"?t:$c(t),e]},useSyncExternalStore:oR,useId:xR,useHostTransitionStatus:Yy,useFormState:R0,useActionState:R0,useOptimistic:function(t,e){var n=ft();return fR(n,xe,t,e)},useMemoCache:Gy,useCacheRefresh:NR};Qy.useEffectEvent=yR;var VR={readContext:Bt,use:ep,useCallback:SR,useContext:Bt,useEffect:Hy,useImperativeHandle:IR,useInsertionEffect:vR,useLayoutEffect:TR,useMemo:AR,useReducer:Pm,useRef:_R,useState:function(){return Pm(cr)},useDebugValue:Ky,useDeferredValue:function(t,e){var n=ft();return xe===null?$y(n,t,e):wR(n,xe.memoizedState,t,e)},useTransition:function(){var t=Pm(cr)[0],e=ft().memoizedState;return[typeof t=="boolean"?t:$c(t),e]},useSyncExternalStore:oR,useId:xR,useHostTransitionStatus:Yy,useFormState:b0,useActionState:b0,useOptimistic:function(t,e){var n=ft();return xe!==null?fR(n,xe,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Gy,useCacheRefresh:NR};VR.useEffectEvent=yR;function Mm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zg={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ln(),r=ns(i);r.payload=e,n!=null&&(r.callback=n),e=is(t,r,i),e!==null&&(Sn(e,t,i),Vu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ln(),r=ns(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=is(t,r,i),e!==null&&(Sn(e,t,i),Vu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ln(),i=ns(n);i.tag=2,e!=null&&(i.callback=e),e=is(t,i,n),e!==null&&(Sn(e,t,n),Vu(e,t,n))}};function N0(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!rc(n,i)||!rc(r,s):!0}function D0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Zg.enqueueReplaceState(e,e.state,null)}function mo(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=He({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}function UR(t){Yf(t)}function LR(t){console.error(t)}function OR(t){Yf(t)}function nh(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function P0(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function jg(t,e,n){return n=ns(n),n.tag=3,n.payload={element:null},n.callback=function(){nh(t,e)},n}function FR(t){return t=ns(t),t.tag=3,t}function qR(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){P0(e,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){P0(e,n,i),typeof r!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function jk(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&yl(e,n,r,!0),n=qn.current,n!==null){switch(n.tag){case 31:case 13:return jn===null?ah():n.alternate===null&&rt===0&&(rt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Xf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Hm(t,i,r)),!1;case 22:return n.flags|=65536,i===Xf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Hm(t,i,r)),!1}throw Error(B(435,n.tag))}return Hm(t,i,r),ah(),!1}if(_e)return e=qn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==qg&&(t=Error(B(422),{cause:i}),oc(Qn(t,n)))):(i!==qg&&(e=Error(B(423),{cause:i}),oc(Qn(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=Qn(i,n),r=jg(t.stateNode,i,r),Dm(t,r),rt!==4&&(rt=2)),!1;var s=Error(B(520),{cause:i});if(s=Qn(s,n),Bu===null?Bu=[s]:Bu.push(s),rt!==4&&(rt=2),e===null)return!0;i=Qn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=jg(n.stateNode,i,t),Dm(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(rs===null||!rs.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=FR(r),qR(r,t,n,i),Dm(n,r),!1}n=n.return}while(n!==null);return!1}var Wy=Error(B(461)),Et=!1;function Ut(t,e,n,i){e.child=t===null?eR(e,null,n,i):ho(e,t.child,n,i)}function M0(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return fo(e),i=Oy(t,e,n,o,s,r),a=Fy(),t!==null&&!Et?(qy(t,e,r),dr(t,e,r)):(_e&&a&&Ny(e),e.flags|=1,Ut(t,e,i,r),e.child)}function k0(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!xy(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,BR(t,e,s,i,r)):(t=gf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Xy(t,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:rc,n(o,i)&&t.ref===e.ref)return dr(t,e,r)}return e.flags|=1,t=ir(s,i),t.ref=e.ref,t.return=e,e.child=t}function BR(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(rc(s,i)&&t.ref===e.ref)if(Et=!1,e.pendingProps=i=s,Xy(t,r))t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,dr(t,e,r)}return e_(t,e,n,i,r)}function GR(t,e,n,i){var r=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~s}else i=0,e.child=null;return V0(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_f(e,s!==null?s.cachePool:null),s!==null?S0(e,s):Yg(),iR(e);else return i=e.lanes=536870912,V0(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(_f(e,s.cachePool),S0(e,s),Gr(),e.memoizedState=null):(t!==null&&_f(e,null),Yg(),Gr());return Ut(t,e,r,n),e.child}function Iu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function V0(t,e,n,i,r){var s=My();return s=s===null?null:{parent:Tt._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&_f(e,null),Yg(),iR(e),t!==null&&yl(t,e,i,!0),e.childLanes=r,null}function Tf(t,e){return e=ih({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function U0(t,e,n){return ho(e,t.child,null,n),t=Tf(e,e.pendingProps),t.flags|=2,xn(e),e.memoizedState=null,t}function eV(t,e,n){var i=e.pendingProps,r=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(_e){if(i.mode==="hidden")return t=Tf(e,i),e.lanes=536870912,Iu(null,t);if(Jg(e),(t=Be)?(t=kb(t,Wn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ds!==null?{id:Ii,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},n=YC(t),n.return=e,e.child=n,Ft=e,Be=null)):t=null,t===null)throw fs(e);return e.lanes=536870912,null}return Tf(e,i)}var s=t.memoizedState;if(s!==null){var o=s.dehydrated;if(Jg(e),r)if(e.flags&256)e.flags&=-257,e=U0(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(Et||yl(t,e,n,!1),r=(n&t.childLanes)!==0,Et||r){if(i=Me,i!==null&&(o=vC(i,n),o!==0&&o!==s.retryLane))throw s.retryLane=o,Mo(t,o),Sn(i,t,o),Wy;ah(),e=U0(t,e,n)}else t=s.treeContext,Be=ei(o.nextSibling),Ft=e,_e=!0,ts=null,Wn=!1,t!==null&&QC(e,t),e=Tf(e,i),e.flags|=4096;return e}return t=ir(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Ef(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function e_(t,e,n,i,r){return fo(e),n=Oy(t,e,n,i,void 0,r),i=Fy(),t!==null&&!Et?(qy(t,e,r),dr(t,e,r)):(_e&&i&&Ny(e),e.flags|=1,Ut(t,e,n,r),e.child)}function L0(t,e,n,i,r,s){return fo(e),e.updateQueue=null,n=sR(e,i,n,r),rR(t),i=Fy(),t!==null&&!Et?(qy(t,e,s),dr(t,e,s)):(_e&&i&&Ny(e),e.flags|=1,Ut(t,e,n,s),e.child)}function O0(t,e,n,i,r){if(fo(e),e.stateNode===null){var s=ya,o=n.contextType;typeof o=="object"&&o!==null&&(s=Bt(o)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Zg,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},Vy(e),o=n.contextType,s.context=typeof o=="object"&&o!==null?Bt(o):ya,s.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Mm(e,n,o,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&Zg.enqueueReplaceState(s,s.state,null),Lu(e,i,s,r),Uu(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var a=e.memoizedProps,l=mo(n,a);s.props=l;var u=s.context,f=n.contextType;o=ya,typeof f=="object"&&f!==null&&(o=Bt(f));var p=n.getDerivedStateFromProps;f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||u!==o)&&D0(e,s,i,o),Fr=!1;var m=e.memoizedState;s.state=m,Lu(e,i,s,r),Uu(),u=e.memoizedState,a||m!==u||Fr?(typeof p=="function"&&(Mm(e,n,p,i),u=e.memoizedState),(l=Fr||N0(e,n,l,i,m,u,o))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),s.props=i,s.state=u,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Kg(t,e),o=e.memoizedProps,f=mo(n,o),s.props=f,p=e.pendingProps,m=s.context,u=n.contextType,l=ya,typeof u=="object"&&u!==null&&(l=Bt(u)),a=n.getDerivedStateFromProps,(u=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==p||m!==l)&&D0(e,s,i,l),Fr=!1,m=e.memoizedState,s.state=m,Lu(e,i,s,r),Uu();var _=e.memoizedState;o!==p||m!==_||Fr||t!==null&&t.dependencies!==null&&Wf(t.dependencies)?(typeof a=="function"&&(Mm(e,n,a,i),_=e.memoizedState),(f=Fr||N0(e,n,f,i,m,_,l)||t!==null&&t.dependencies!==null&&Wf(t.dependencies))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),s.props=i,s.state=_,s.context=l,i=f):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Ef(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=ho(e,t.child,null,r),e.child=ho(e,null,n,r)):Ut(t,e,n,r),e.memoizedState=s.state,t=e.child):t=dr(t,e,r),t}function F0(t,e,n,i){return co(),e.flags|=256,Ut(t,e,n,i),e.child}var km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(t){return{baseLanes:t,cachePool:XC()}}function Um(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Pn),t}function zR(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(ct.current&2)!==0),o&&(r=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(_e){if(r?Br(e):Gr(),(t=Be)?(t=kb(t,Wn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:ds!==null?{id:Ii,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},n=YC(t),n.return=e,e.child=n,Ft=e,Be=null)):t=null,t===null)throw fs(e);return p_(t)?e.lanes=32:e.lanes=536870912,null}var a=i.children;return i=i.fallback,r?(Gr(),r=e.mode,a=ih({mode:"hidden",children:a},r),i=no(i,r,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i=e.child,i.memoizedState=Vm(n),i.childLanes=Um(t,o,n),e.memoizedState=km,Iu(null,i)):(Br(e),t_(e,a))}var l=t.memoizedState;if(l!==null&&(a=l.dehydrated,a!==null)){if(s)e.flags&256?(Br(e),e.flags&=-257,e=Lm(t,e,n)):e.memoizedState!==null?(Gr(),e.child=t.child,e.flags|=128,e=null):(Gr(),a=i.fallback,r=e.mode,i=ih({mode:"visible",children:i.children},r),a=no(a,r,n,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,ho(e,t.child,null,n),i=e.child,i.memoizedState=Vm(n),i.childLanes=Um(t,o,n),e.memoizedState=km,e=Iu(null,i));else if(Br(e),p_(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var u=o.dgst;o=u,i=Error(B(419)),i.stack="",i.digest=o,oc({value:i,source:null,stack:null}),e=Lm(t,e,n)}else if(Et||yl(t,e,n,!1),o=(n&t.childLanes)!==0,Et||o){if(o=Me,o!==null&&(i=vC(o,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,Mo(t,i),Sn(o,t,i),Wy;h_(a)||ah(),e=Lm(t,e,n)}else h_(a)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Be=ei(a.nextSibling),Ft=e,_e=!0,ts=null,Wn=!1,t!==null&&QC(e,t),e=t_(e,i.children),e.flags|=4096);return e}return r?(Gr(),a=i.fallback,r=e.mode,l=t.child,u=l.sibling,i=ir(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,u!==null?a=ir(u,a):(a=no(a,r,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,Iu(null,i),i=e.child,a=t.child.memoizedState,a===null?a=Vm(n):(r=a.cachePool,r!==null?(l=Tt._currentValue,r=r.parent!==l?{parent:l,pool:l}:r):r=XC(),a={baseLanes:a.baseLanes|n,cachePool:r}),i.memoizedState=a,i.childLanes=Um(t,o,n),e.memoizedState=km,Iu(t.child,i)):(Br(e),n=t.child,t=n.sibling,n=ir(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function t_(t,e){return e=ih({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function ih(t,e){return t=Dn(22,t,null,e),t.lanes=0,t}function Lm(t,e,n){return ho(e,t.child,null,n),t=t_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Gg(t.return,e,n)}function Om(t,e,n,i,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r,o.treeForkCount=s)}function HR(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;i=i.children;var o=ct.current,a=(o&2)!==0;if(a?(o=o&1|2,e.flags|=128):o&=1,Ue(ct,o),Ut(t,e,i,n),i=_e?sc:0,!a&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q0(t,n,e);else if(t.tag===19)q0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&jf(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Om(e,!1,r,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&jf(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Om(e,!0,n,null,s,i);break;case"together":Om(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))if(t!==null){if(yl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xy(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Wf(t)))}function tV(t,e,n){switch(e.tag){case 3:zf(e,e.stateNode.containerInfo),qr(e,Tt,t.memoizedState.cache),co();break;case 27:case 5:xg(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:qr(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Jg(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Br(e),e.flags|=128,null):n&e.child.childLanes?zR(t,e,n):(Br(e),t=dr(t,e,n),t!==null?t.sibling:null);Br(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(yl(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return HR(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ue(ct,ct.current),i)break;return null;case 22:return e.lanes=0,GR(t,e,n,e.pendingProps);case 24:qr(e,Tt,t.memoizedState.cache)}return dr(t,e,n)}function KR(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Et=!0;else{if(!Xy(t,n)&&!(e.flags&128))return Et=!1,tV(t,e,n);Et=!!(t.flags&131072)}else Et=!1,_e&&e.flags&1048576&&JC(e,sc,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=zs(e.elementType),e.type=t,typeof t=="function")xy(t)?(i=mo(t,i),e.tag=1,e=O0(null,e,t,i,n)):(e.tag=0,e=e_(null,e,t,i,n));else{if(t!=null){var r=t.$$typeof;if(r===my){e.tag=11,e=M0(null,e,t,i,n);break e}else if(r===gy){e.tag=14,e=k0(null,e,t,i,n);break e}}throw e=Rg(t)||t,Error(B(306,e,""))}}return e;case 0:return e_(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=mo(i,e.pendingProps),O0(t,e,i,r,n);case 3:e:{if(zf(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var s=e.memoizedState;r=s.element,Kg(t,e),Lu(e,i,null,n);var o=e.memoizedState;if(i=o.cache,qr(e,Tt,i),i!==s.cache&&zg(e,[Tt],n,!0),Uu(),i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=F0(t,e,i,n);break e}else if(i!==r){r=Qn(Error(B(424)),e),oc(r),e=F0(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Be=ei(t.firstChild),Ft=e,_e=!0,ts=null,Wn=!0,n=eR(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(co(),i===r){e=dr(t,e,n);break e}Ut(t,e,i,n)}e=e.child}return e;case 26:return Ef(t,e),t===null?(n=oI(e.type,null,e.pendingProps,null))?e.memoizedState=n:_e||(n=e.type,t=e.pendingProps,i=dh(es.current).createElement(n),i[Ot]=e,i[An]=t,Gt(i,n,t),Pt(i),e.stateNode=i):e.memoizedState=oI(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return xg(e),t===null&&_e&&(i=e.stateNode=Vb(e.type,e.pendingProps,es.current),Ft=e,Wn=!0,r=Be,Cs(e.type)?(m_=r,Be=ei(i.firstChild)):Be=r),Ut(t,e,e.pendingProps.children,n),Ef(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&_e&&((r=i=Be)&&(i=DV(i,e.type,e.pendingProps,Wn),i!==null?(e.stateNode=i,Ft=e,Be=ei(i.firstChild),Wn=!1,r=!0):r=!1),r||fs(e)),xg(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,d_(r,s)?i=null:o!==null&&d_(r,o)&&(e.flags|=32),e.memoizedState!==null&&(r=Oy(t,e,$k,null,null,n),fc._currentValue=r),Ef(t,e),Ut(t,e,i,n),e.child;case 6:return t===null&&_e&&((t=n=Be)&&(n=PV(n,e.pendingProps,Wn),n!==null?(e.stateNode=n,Ft=e,Be=null,t=!0):t=!1),t||fs(e)),null;case 13:return zR(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ho(e,null,i,n):Ut(t,e,i,n),e.child;case 11:return M0(t,e,e.type,e.pendingProps,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,qr(e,e.type,i.value),Ut(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,fo(e),r=Bt(r),i=i(r),e.flags|=1,Ut(t,e,i,n),e.child;case 14:return k0(t,e,e.type,e.pendingProps,n);case 15:return BR(t,e,e.type,e.pendingProps,n);case 19:return HR(t,e,n);case 31:return eV(t,e,n);case 22:return GR(t,e,n,e.pendingProps);case 24:return fo(e),i=Bt(Tt),t===null?(r=My(),r===null&&(r=Me,s=Py(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},Vy(e),qr(e,Tt,r)):(t.lanes&n&&(Kg(t,e),Lu(e,null,null,n),Uu()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),qr(e,Tt,i)):(i=s.cache,qr(e,Tt,i),i!==r.cache&&zg(e,[Tt],n,!0))),Ut(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function zi(t){t.flags|=4}function Fm(t,e,n,i,r){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(r&335544128)===r)if(t.stateNode.complete)t.flags|=8192;else if(mb())t.flags|=8192;else throw ro=Xf,ky}else t.flags&=-16777217}function B0(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!Ob(e))if(mb())t.flags|=8192;else throw ro=Xf,ky}function Jd(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?gC():536870912,t.lanes|=e,Ya|=e)}function ou(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Fe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function nV(t,e,n){var i=e.pendingProps;switch(Dy(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(e),null;case 1:return Fe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),rr(Tt),Ba(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?zi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nm())),Fe(e),null;case 26:var r=e.type,s=e.memoizedState;return t===null?(zi(e),s!==null?(Fe(e),B0(e,s)):(Fe(e),Fm(e,r,null,i,n))):s?s!==t.memoizedState?(zi(e),Fe(e),B0(e,s)):(Fe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&zi(e),Fe(e),Fm(e,r,t,i,n)),null;case 27:if(Hf(e),n=es.current,r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&zi(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Fe(e),null}t=bi.current,Jo(e)?g0(e):(t=Vb(r,i,n),e.stateNode=t,zi(e))}return Fe(e),null;case 5:if(Hf(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&zi(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Fe(e),null}if(s=bi.current,Jo(e))g0(e);else{var o=dh(es.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?o.createElement(r,{is:i.is}):o.createElement(r)}}s[Ot]=e,s[An]=i;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=s;e:switch(Gt(s,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&zi(e)}}return Fe(e),Fm(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&zi(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=es.current,Jo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Ft,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[Ot]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Db(t.nodeValue,n)),t||fs(e,!0)}else t=dh(t).createTextNode(i),t[Ot]=e,e.stateNode=t}return Fe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Jo(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[Ot]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),t=!1}else n=Nm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(xn(e),e):(xn(e),null);if(e.flags&128)throw Error(B(558))}return Fe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=Jo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Ot]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fe(e),r=!1}else r=Nm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),r=!0;if(!r)return e.flags&256?(xn(e),e):(xn(e),null)}return xn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Jd(e,e.updateQueue),Fe(e),null);case 4:return Ba(),t===null&&rv(e.stateNode.containerInfo),Fe(e),null;case 10:return rr(e.type),Fe(e),null;case 19:if(Mt(ct),i=e.memoizedState,i===null)return Fe(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)ou(i,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=jf(t),s!==null){for(e.flags|=128,ou(i,!1),t=s.updateQueue,e.updateQueue=t,Jd(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)$C(n,t),n=n.sibling;return Ue(ct,ct.current&1|2),_e&&Yi(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&kn()>sh&&(e.flags|=128,r=!0,ou(i,!1),e.lanes=4194304)}else{if(!r)if(t=jf(s),t!==null){if(e.flags|=128,r=!0,t=t.updateQueue,e.updateQueue=t,Jd(e,t),ou(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!_e)return Fe(e),null}else 2*kn()-i.renderingStartTime>sh&&n!==536870912&&(e.flags|=128,r=!0,ou(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=kn(),t.sibling=null,n=ct.current,Ue(ct,r?n&1|2:n&1),_e&&Yi(e,i.treeForkCount),t):(Fe(e),null);case 22:case 23:return xn(e),Uy(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Fe(e),e.subtreeFlags&6&&(e.flags|=8192)):Fe(e),n=e.updateQueue,n!==null&&Jd(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Mt(io),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),rr(Tt),Fe(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function iV(t,e){switch(Dy(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rr(Tt),Ba(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Hf(e),null;case 31:if(e.memoizedState!==null){if(xn(e),e.alternate===null)throw Error(B(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(xn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(ct),null;case 4:return Ba(),null;case 10:return rr(e.type),null;case 22:case 23:return xn(e),Uy(),t!==null&&Mt(io),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return rr(Tt),null;case 25:return null;default:return null}}function $R(t,e){switch(Dy(e),e.tag){case 3:rr(Tt),Ba();break;case 26:case 27:case 5:Hf(e);break;case 4:Ba();break;case 31:e.memoizedState!==null&&xn(e);break;case 13:xn(e);break;case 19:Mt(ct);break;case 10:rr(e.type);break;case 22:case 23:xn(e),Uy(),t!==null&&Mt(io);break;case 24:rr(Tt)}}function Yc(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){we(e,e.return,a)}}function hs(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=e;var l=n,u=a;try{u()}catch(f){we(r,l,f)}}}i=i.next}while(i!==s)}}catch(f){we(e,e.return,f)}}function YR(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{nR(e,n)}catch(i){we(t,t.return,i)}}}function JR(t,e,n){n.props=mo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){we(t,e,i)}}function Fu(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(r){we(t,e,r)}}function Ai(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){we(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function QR(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){we(t,t.return,r)}}function qm(t,e,n){try{var i=t.stateNode;wV(i,t.type,n,e),i[An]=e}catch(r){we(t,t.return,r)}}function WR(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cs(t.type)||t.tag===4}function Bm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function n_(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xi));else if(i!==4&&(i===27&&Cs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(n_(t,e,n),t=t.sibling;t!==null;)n_(t,e,n),t=t.sibling}function rh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Cs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(rh(t,e,n),t=t.sibling;t!==null;)rh(t,e,n),t=t.sibling}function XR(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Gt(e,i,n),e[Ot]=t,e[An]=n}catch(s){we(t,t.return,s)}}var Ji=!1,vt=!1,Gm=!1,G0=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function rV(t,e){if(t=t.containerInfo,u_=mh,t=OC(t),Cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,f=0,p=t,m=null;t:for(;;){for(var _;p!==n||r!==0&&p.nodeType!==3||(a=o+r),p!==s||i!==0&&p.nodeType!==3||(l=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++u===r&&(a=o),m===s&&++f===i&&(l=o),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(c_={focusedElem:t,selectionRange:n},mh=!1,Nt=e;Nt!==null;)if(e=Nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Nt=t;else for(;Nt!==null;){switch(e=Nt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)r=t[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var S=mo(n.type,r);t=i.getSnapshotBeforeUpdate(S,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(b){we(n,n.return,b)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)f_(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":f_(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,Nt=t;break}Nt=e.return}}function ZR(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Ki(t,n),i&4&&Yc(5,n);break;case 1:if(Ki(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){we(n,n.return,o)}else{var r=mo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){we(n,n.return,o)}}i&64&&YR(n),i&512&&Fu(n,n.return);break;case 3:if(Ki(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{nR(t,e)}catch(o){we(n,n.return,o)}}break;case 27:e===null&&i&4&&XR(n);case 26:case 5:Ki(t,n),e===null&&i&4&&QR(n),i&512&&Fu(n,n.return);break;case 12:Ki(t,n);break;case 31:Ki(t,n),i&4&&tb(t,n);break;case 13:Ki(t,n),i&4&&nb(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=hV.bind(null,n),MV(t,n))));break;case 22:if(i=n.memoizedState!==null||Ji,!i){e=e!==null&&e.memoizedState!==null||vt,r=Ji;var s=vt;Ji=i,(vt=e)&&!s?$i(t,n,(n.subtreeFlags&8772)!==0):Ki(t,n),Ji=r,vt=s}break;case 30:break;default:Ki(t,n)}}function jR(t){var e=t.alternate;e!==null&&(t.alternate=null,jR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Ty(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,gn=!1;function Hi(t,e,n){for(n=n.child;n!==null;)eb(t,e,n),n=n.sibling}function eb(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(qc,n)}catch{}switch(n.tag){case 26:vt||Ai(n,e),Hi(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:vt||Ai(n,e);var i=$e,r=gn;Cs(n.type)&&($e=n.stateNode,gn=!1),Hi(t,e,n),zu(n.stateNode),$e=i,gn=r;break;case 5:vt||Ai(n,e);case 6:if(i=$e,r=gn,$e=null,Hi(t,e,n),$e=i,gn=r,$e!==null)if(gn)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(n.stateNode)}catch(s){we(n,e,s)}else try{$e.removeChild(n.stateNode)}catch(s){we(n,e,s)}break;case 18:$e!==null&&(gn?(t=$e,tI(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Xa(t)):tI($e,n.stateNode));break;case 4:i=$e,r=gn,$e=n.stateNode.containerInfo,gn=!0,Hi(t,e,n),$e=i,gn=r;break;case 0:case 11:case 14:case 15:hs(2,n,e),vt||hs(4,n,e),Hi(t,e,n);break;case 1:vt||(Ai(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&JR(n,e,i)),Hi(t,e,n);break;case 21:Hi(t,e,n);break;case 22:vt=(i=vt)||n.memoizedState!==null,Hi(t,e,n),vt=i;break;default:Hi(t,e,n)}}function tb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Xa(t)}catch(n){we(e,e.return,n)}}}function nb(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xa(t)}catch(n){we(e,e.return,n)}}function sV(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new G0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new G0),e;default:throw Error(B(435,t.tag))}}function Qd(t,e){var n=sV(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var r=pV.bind(null,t,i);i.then(r,r)}})}function pn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(Cs(a.type)){$e=a.stateNode,gn=!1;break e}break;case 5:$e=a.stateNode,gn=!1;break e;case 3:case 4:$e=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if($e===null)throw Error(B(160));eb(s,o,r),$e=null,gn=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)ib(e,t),e=e.sibling}var ci=null;function ib(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:pn(e,t),mn(t),i&4&&(hs(3,t,t.return),Yc(3,t),hs(5,t,t.return));break;case 1:pn(e,t),mn(t),i&512&&(vt||n===null||Ai(n,n.return)),i&64&&Ji&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=ci;if(pn(e,t),mn(t),i&512&&(vt||n===null||Ai(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[zc]||s[Ot]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Gt(s,i,n),s[Ot]=t,Pt(s),i=s;break e;case"link":var o=lI("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),Gt(s,i,n),r.head.appendChild(s);break;case"meta":if(o=lI("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),Gt(s,i,n),r.head.appendChild(s);break;default:throw Error(B(468,i))}s[Ot]=t,Pt(s),i=s}t.stateNode=i}else uI(r,t.type,t.stateNode);else t.stateNode=aI(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?uI(r,t.type,t.stateNode):aI(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&qm(t,t.memoizedProps,n.memoizedProps)}break;case 27:pn(e,t),mn(t),i&512&&(vt||n===null||Ai(n,n.return)),n!==null&&i&4&&qm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(pn(e,t),mn(t),i&512&&(vt||n===null||Ai(n,n.return)),t.flags&32){r=t.stateNode;try{za(r,"")}catch(S){we(t,t.return,S)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,qm(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Gm=!0);break;case 6:if(pn(e,t),mn(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(S){we(t,t.return,S)}}break;case 3:if(Af=null,r=ci,ci=fh(e.containerInfo),pn(e,t),ci=r,mn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(e.containerInfo)}catch(S){we(t,t.return,S)}Gm&&(Gm=!1,rb(t));break;case 4:i=ci,ci=fh(t.stateNode.containerInfo),pn(e,t),mn(t),ci=i;break;case 12:pn(e,t),mn(t);break;case 31:pn(e,t),mn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Qd(t,i)));break;case 13:pn(e,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(ip=kn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Qd(t,i)));break;case 22:r=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=Ji,f=vt;if(Ji=u||r,vt=f||l,pn(e,t),vt=f,Ji=u,mn(t),i&8192)e:for(e=t.stateNode,e._visibility=r?e._visibility&-2:e._visibility|1,r&&(n===null||l||Ji||vt||Hs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,r)o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=l.stateNode;var p=l.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(S){we(l,l.return,S)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=r?"":l.memoizedProps}catch(S){we(l,l.return,S)}}}else if(e.tag===18){if(n===null){l=e;try{var _=l.stateNode;r?nI(_,!0):nI(l.stateNode,!1)}catch(S){we(l,l.return,S)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Qd(t,n))));break;case 19:pn(e,t),mn(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Qd(t,i)));break;case 30:break;case 21:break;default:pn(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(WR(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var r=n.stateNode,s=Bm(t);rh(t,s,r);break;case 5:var o=n.stateNode;n.flags&32&&(za(o,""),n.flags&=-33);var a=Bm(t);rh(t,a,o);break;case 3:case 4:var l=n.stateNode.containerInfo,u=Bm(t);n_(t,u,l);break;default:throw Error(B(161))}}catch(f){we(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;rb(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ki(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)ZR(t,e.alternate,e),e=e.sibling}function Hs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:hs(4,e,e.return),Hs(e);break;case 1:Ai(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&JR(e,e.return,n),Hs(e);break;case 27:zu(e.stateNode);case 26:case 5:Ai(e,e.return),Hs(e);break;case 22:e.memoizedState===null&&Hs(e);break;case 30:Hs(e);break;default:Hs(e)}t=t.sibling}}function $i(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,o=s.flags;switch(s.tag){case 0:case 11:case 15:$i(r,s,n),Yc(4,s);break;case 1:if($i(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){we(i,i.return,u)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)tR(l[r],a)}catch(u){we(i,i.return,u)}}n&&o&64&&YR(s),Fu(s,s.return);break;case 27:XR(s);case 26:case 5:$i(r,s,n),n&&i===null&&o&4&&QR(s),Fu(s,s.return);break;case 12:$i(r,s,n);break;case 31:$i(r,s,n),n&&o&4&&tb(r,s);break;case 13:$i(r,s,n),n&&o&4&&nb(r,s);break;case 22:s.memoizedState===null&&$i(r,s,n),Fu(s,s.return);break;case 30:break;default:$i(r,s,n)}e=e.sibling}}function Zy(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Kc(n))}function jy(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Kc(t))}function ui(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sb(t,e,n,i),e=e.sibling}function sb(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:ui(t,e,n,i),r&2048&&Yc(9,e);break;case 1:ui(t,e,n,i);break;case 3:ui(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Kc(t)));break;case 12:if(r&2048){ui(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){we(e,e.return,l)}}else ui(t,e,n,i);break;case 31:ui(t,e,n,i);break;case 13:ui(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,o=e.alternate,e.memoizedState!==null?s._visibility&2?ui(t,e,n,i):qu(t,e):s._visibility&2?ui(t,e,n,i):(s._visibility|=2,ia(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),r&2048&&Zy(o,e);break;case 24:ui(t,e,n,i),r&2048&&jy(e.alternate,e);break;default:ui(t,e,n,i)}}function ia(t,e,n,i,r){for(r=r&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,o=e,a=n,l=i,u=o.flags;switch(o.tag){case 0:case 11:case 15:ia(s,o,a,l,r),Yc(8,o);break;case 23:break;case 22:var f=o.stateNode;o.memoizedState!==null?f._visibility&2?ia(s,o,a,l,r):qu(s,o):(f._visibility|=2,ia(s,o,a,l,r)),r&&u&2048&&Zy(o.alternate,o);break;case 24:ia(s,o,a,l,r),r&&u&2048&&jy(o.alternate,o);break;default:ia(s,o,a,l,r)}e=e.sibling}}function qu(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:qu(n,i),r&2048&&Zy(i.alternate,i);break;case 24:qu(n,i),r&2048&&jy(i.alternate,i);break;default:qu(n,i)}e=e.sibling}}var Su=8192;function Qo(t,e,n){if(t.subtreeFlags&Su)for(t=t.child;t!==null;)ob(t,e,n),t=t.sibling}function ob(t,e,n){switch(t.tag){case 26:Qo(t,e,n),t.flags&Su&&t.memoizedState!==null&&KV(n,ci,t.memoizedState,t.memoizedProps);break;case 5:Qo(t,e,n);break;case 3:case 4:var i=ci;ci=fh(t.stateNode.containerInfo),Qo(t,e,n),ci=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Su,Su=16777216,Qo(t,e,n),Su=i):Qo(t,e,n));break;default:Qo(t,e,n)}}function ab(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function au(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Nt=i,ub(i,t)}ab(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lb(t),t=t.sibling}function lb(t){switch(t.tag){case 0:case 11:case 15:au(t),t.flags&2048&&hs(9,t,t.return);break;case 3:au(t);break;case 12:au(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,If(t)):au(t);break;default:au(t)}}function If(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];Nt=i,ub(i,t)}ab(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:hs(8,e,e.return),If(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,If(e));break;default:If(e)}t=t.sibling}}function ub(t,e){for(;Nt!==null;){var n=Nt;switch(n.tag){case 0:case 11:case 15:hs(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Kc(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Nt=i;else e:for(n=t;Nt!==null;){i=Nt;var r=i.sibling,s=i.return;if(jR(i),i===n){Nt=null;break e}if(r!==null){r.return=s,Nt=r;break e}Nt=s}}}var oV={getCacheForType:function(t){var e=Bt(Tt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Bt(Tt).controller.signal}},aV=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Me=null,he=null,me=0,Ae=0,bn=null,Jr=!1,Tl=!1,ev=!1,fr=0,rt=0,ps=0,so=0,tv=0,Pn=0,Ya=0,Bu=null,_n=null,i_=!1,ip=0,cb=0,sh=1/0,oh=null,rs=null,It=0,ss=null,Ja=null,sr=0,r_=0,s_=null,db=null,Gu=0,o_=null;function Ln(){return Ie&2&&me!==0?me&-me:se.T!==null?iv():TC()}function fb(){if(Pn===0)if(!(me&536870912)||_e){var t=Bd;Bd<<=1,!(Bd&3932160)&&(Bd=262144),Pn=t}else Pn=536870912;return t=qn.current,t!==null&&(t.flags|=32),Pn}function Sn(t,e,n){(t===Me&&(Ae===2||Ae===9)||t.cancelPendingCommit!==null)&&(Qa(t,0),Qr(t,me,Pn,!1)),Gc(t,n),(!(Ie&2)||t!==Me)&&(t===Me&&(!(Ie&2)&&(so|=n),rt===4&&Qr(t,me,Pn,!1)),Li(t))}function hb(t,e,n){if(Ie&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Bc(t,e),r=i?cV(t,e):zm(t,e,!0),s=i;do{if(r===0){Tl&&!i&&Qr(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!lV(n)){r=zm(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var a=t;r=Bu;var l=a.current.memoizedState.isDehydrated;if(l&&(Qa(a,o).flags|=256),o=zm(a,o,!1),o!==2){if(ev&&!l){a.errorRecoveryDisabledLanes|=s,so|=s,r=4;break e}s=_n,_n=r,s!==null&&(_n===null?_n=s:_n.push.apply(_n,s))}r=o}if(s=!1,r!==2)continue}}if(r===1){Qa(t,0),Qr(t,e,0,!0);break}e:{switch(i=t,s=r,s){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:Qr(i,e,Pn,!Jr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(r=ip+300-kn(),10<r)){if(Qr(i,e,Pn,!Jr),$h(i,0,!0)!==0)break e;sr=e,i.timeoutHandle=Mb(z0.bind(null,i,n,_n,oh,i_,e,Pn,so,Ya,Jr,s,"Throttled",-0,0),r);break e}z0(i,n,_n,oh,i_,e,Pn,so,Ya,Jr,s,null,-0,0)}}break}while(!0);Li(t)}function z0(t,e,n,i,r,s,o,a,l,u,f,p,m,_){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xi},ob(e,s,p);var S=(s&62914560)===s?ip-kn():(s&4194048)===s?cb-kn():0;if(S=$V(p,S),S!==null){sr=s,t.cancelPendingCommit=S(K0.bind(null,t,e,s,n,i,r,o,a,l,f,p,null,m,_)),Qr(t,s,o,!u);return}}K0(t,e,s,n,i,r,o,a,l)}function lV(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Fn(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e,n,i){e&=~tv,e&=~so,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-Un(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&_C(t,n,e)}function rp(){return Ie&6?!0:(Jc(0),!1)}function nv(){if(he!==null){if(Ae===0)var t=he.return;else t=he,Zi=ko=null,By(t),ba=null,ac=0,t=he;for(;t!==null;)$R(t.alternate,t),t=t.return;he=null}}function Qa(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,bV(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),sr=0,nv(),Me=t,he=n=ir(t.current,null),me=e,Ae=0,bn=null,Jr=!1,Tl=Bc(t,e),ev=!1,Ya=Pn=tv=so=ps=rt=0,_n=Bu=null,i_=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-Un(i),s=1<<r;e|=t[r],i&=~s}return fr=e,Wh(),n}function pb(t,e){ue=null,se.H=uc,e===vl||e===Zh?(e=E0(),Ae=3):e===ky?(e=E0(),Ae=4):Ae=e===Wy?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,bn=e,he===null&&(rt=1,nh(t,Qn(e,t.current)))}function mb(){var t=qn.current;return t===null?!0:(me&4194048)===me?jn===null:(me&62914560)===me||me&536870912?t===jn:!1}function gb(){var t=se.H;return se.H=uc,t===null?uc:t}function _b(){var t=se.A;return se.A=oV,t}function ah(){rt=4,Jr||(me&4194048)!==me&&qn.current!==null||(Tl=!0),!(ps&134217727)&&!(so&134217727)||Me===null||Qr(Me,me,Pn,!1)}function zm(t,e,n){var i=Ie;Ie|=2;var r=gb(),s=_b();(Me!==t||me!==e)&&(oh=null,Qa(t,e)),e=!1;var o=rt;e:do try{if(Ae!==0&&he!==null){var a=he,l=bn;switch(Ae){case 8:nv(),o=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(e=!0);var u=Ae;if(Ae=0,bn=null,Ea(t,a,l,u),n&&Tl){o=0;break e}break;default:u=Ae,Ae=0,bn=null,Ea(t,a,l,u)}}uV(),o=rt;break}catch(f){pb(t,f)}while(!0);return e&&t.shellSuspendCounter++,Zi=ko=null,Ie=i,se.H=r,se.A=s,he===null&&(Me=null,me=0,Wh()),o}function uV(){for(;he!==null;)yb(he)}function cV(t,e){var n=Ie;Ie|=2;var i=gb(),r=_b();Me!==t||me!==e?(oh=null,sh=kn()+500,Qa(t,e)):Tl=Bc(t,e);e:do try{if(Ae!==0&&he!==null){e=he;var s=bn;t:switch(Ae){case 1:Ae=0,bn=null,Ea(t,e,s,1);break;case 2:case 9:if(T0(s)){Ae=0,bn=null,H0(e);break}e=function(){Ae!==2&&Ae!==9||Me!==t||(Ae=7),Li(t)},s.then(e,e);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:T0(s)?(Ae=0,bn=null,H0(e)):(Ae=0,bn=null,Ea(t,e,s,7));break;case 5:var o=null;switch(he.tag){case 26:o=he.memoizedState;case 5:case 27:var a=he;if(o?Ob(o):a.stateNode.complete){Ae=0,bn=null;var l=a.sibling;if(l!==null)he=l;else{var u=a.return;u!==null?(he=u,sp(u)):he=null}break t}}Ae=0,bn=null,Ea(t,e,s,5);break;case 6:Ae=0,bn=null,Ea(t,e,s,6);break;case 8:nv(),rt=6;break e;default:throw Error(B(462))}}dV();break}catch(f){pb(t,f)}while(!0);return Zi=ko=null,se.H=i,se.A=r,Ie=n,he!==null?0:(Me=null,me=0,Wh(),rt)}function dV(){for(;he!==null&&!k1();)yb(he)}function yb(t){var e=KR(t.alternate,t,fr);t.memoizedProps=t.pendingProps,e===null?sp(t):he=e}function H0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=L0(n,e,e.pendingProps,e.type,void 0,me);break;case 11:e=L0(n,e,e.pendingProps,e.type.render,e.ref,me);break;case 5:By(e);default:$R(n,e),e=he=$C(e,fr),e=KR(n,e,fr)}t.memoizedProps=t.pendingProps,e===null?sp(t):he=e}function Ea(t,e,n,i){Zi=ko=null,By(e),ba=null,ac=0;var r=e.return;try{if(jk(t,r,e,n,me)){rt=1,nh(t,Qn(n,t.current)),he=null;return}}catch(s){if(r!==null)throw he=r,s;rt=1,nh(t,Qn(n,t.current)),he=null;return}e.flags&32768?(_e||i===1?t=!0:Tl||me&536870912?t=!1:(Jr=t=!0,(i===2||i===9||i===3||i===6)&&(i=qn.current,i!==null&&i.tag===13&&(i.flags|=16384))),vb(e,t)):sp(e)}function sp(t){var e=t;do{if(e.flags&32768){vb(e,Jr);return}t=e.return;var n=nV(e.alternate,e,fr);if(n!==null){he=n;return}if(e=e.sibling,e!==null){he=e;return}he=e=t}while(e!==null);rt===0&&(rt=5)}function vb(t,e){do{var n=iV(t.alternate,t);if(n!==null){n.flags&=32767,he=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){he=t;return}he=t=n}while(t!==null);rt=6,he=null}function K0(t,e,n,i,r,s,o,a,l){t.cancelPendingCommit=null;do op();while(It!==0);if(Ie&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(s=e.lanes|e.childLanes,s|=Ry,H1(t,n,s,o,a,l),t===Me&&(he=Me=null,me=0),Ja=e,ss=t,sr=n,r_=s,s_=r,db=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,mV(Kf,function(){return Ab(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=se.T,se.T=null,r=Se.p,Se.p=2,o=Ie,Ie|=4;try{rV(t,e,n)}finally{Ie=o,Se.p=r,se.T=i}}It=1,Tb(),Eb(),Ib()}}function Tb(){if(It===1){It=0;var t=ss,e=Ja,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=se.T,se.T=null;var i=Se.p;Se.p=2;var r=Ie;Ie|=4;try{ib(e,t);var s=c_,o=OC(t.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&LC(a.ownerDocument.documentElement,a)){if(l!==null&&Cy(a)){var u=l.start,f=l.end;if(f===void 0&&(f=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(f,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var _=m.getSelection(),S=a.textContent.length,b=Math.min(l.start,S),P=l.end===void 0?b:Math.min(l.end,S);!_.extend&&b>P&&(o=P,P=b,b=o);var T=h0(a,b),v=h0(a,P);if(T&&v&&(_.rangeCount!==1||_.anchorNode!==T.node||_.anchorOffset!==T.offset||_.focusNode!==v.node||_.focusOffset!==v.offset)){var A=p.createRange();A.setStart(T.node,T.offset),_.removeAllRanges(),b>P?(_.addRange(A),_.extend(v.node,v.offset)):(A.setEnd(v.node,v.offset),_.addRange(A))}}}}for(p=[],_=a;_=_.parentNode;)_.nodeType===1&&p.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var N=p[a];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}mh=!!u_,c_=u_=null}finally{Ie=r,Se.p=i,se.T=n}}t.current=e,It=2}}function Eb(){if(It===2){It=0;var t=ss,e=Ja,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=se.T,se.T=null;var i=Se.p;Se.p=2;var r=Ie;Ie|=4;try{ZR(t,e.alternate,e)}finally{Ie=r,Se.p=i,se.T=n}}It=3}}function Ib(){if(It===4||It===3){It=0,V1();var t=ss,e=Ja,n=sr,i=db;e.subtreeFlags&10256||e.flags&10256?It=5:(It=0,Ja=ss=null,Sb(t,t.pendingLanes));var r=t.pendingLanes;if(r===0&&(rs=null),vy(n),e=e.stateNode,Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(qc,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=se.T,r=Se.p,Se.p=2,se.T=null;try{for(var s=t.onRecoverableError,o=0;o<i.length;o++){var a=i[o];s(a.value,{componentStack:a.stack})}}finally{se.T=e,Se.p=r}}sr&3&&op(),Li(t),r=t.pendingLanes,n&261930&&r&42?t===o_?Gu++:(Gu=0,o_=t):Gu=0,Jc(0)}}function Sb(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Kc(e)))}function op(){return Tb(),Eb(),Ib(),Ab()}function Ab(){if(It!==5)return!1;var t=ss,e=r_;r_=0;var n=vy(sr),i=se.T,r=Se.p;try{Se.p=32>n?32:n,se.T=null,n=s_,s_=null;var s=ss,o=sr;if(It=0,Ja=ss=null,sr=0,Ie&6)throw Error(B(331));var a=Ie;if(Ie|=4,lb(s.current),sb(s,s.current,o,n),Ie=a,Jc(0,!1),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(qc,s)}catch{}return!0}finally{Se.p=r,se.T=i,Sb(t,e)}}function $0(t,e,n){e=Qn(n,e),e=jg(t.stateNode,e,2),t=is(t,e,2),t!==null&&(Gc(t,2),Li(t))}function we(t,e,n){if(t.tag===3)$0(t,t,n);else for(;e!==null;){if(e.tag===3){$0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rs===null||!rs.has(i))){t=Qn(n,t),n=FR(2),i=is(e,n,2),i!==null&&(qR(n,i,e,t),Gc(i,2),Li(i));break}}e=e.return}}function Hm(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new aV;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(ev=!0,r.add(n),t=fV.bind(null,t,e,n),e.then(t,t))}function fV(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Me===t&&(me&n)===n&&(rt===4||rt===3&&(me&62914560)===me&&300>kn()-ip?!(Ie&2)&&Qa(t,0):tv|=n,Ya===me&&(Ya=0)),Li(t)}function wb(t,e){e===0&&(e=gC()),t=Mo(t,e),t!==null&&(Gc(t,e),Li(t))}function hV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wb(t,n)}function pV(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),wb(t,n)}function mV(t,e){return _y(t,e)}var lh=null,ra=null,a_=!1,uh=!1,Km=!1,Wr=0;function Li(t){t!==ra&&t.next===null&&(ra===null?lh=ra=t:ra=ra.next=t),uh=!0,a_||(a_=!0,_V())}function Jc(t,e){if(!Km&&uh){Km=!0;do for(var n=!1,i=lh;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Un(42|t)+1)-1,s&=r&~(o&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Y0(i,s))}else s=me,s=$h(i,i===Me?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Bc(i,s)||(n=!0,Y0(i,s));i=i.next}while(n);Km=!1}}function gV(){Cb()}function Cb(){uh=a_=!1;var t=0;Wr!==0&&RV()&&(t=Wr);for(var e=kn(),n=null,i=lh;i!==null;){var r=i.next,s=Rb(i,e);s===0?(i.next=null,n===null?lh=r:n.next=r,r===null&&(ra=n)):(n=i,(t!==0||s&3)&&(uh=!0)),i=r}It!==0&&It!==5||Jc(t),Wr!==0&&(Wr=0)}function Rb(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var o=31-Un(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=z1(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}if(e=Me,n=me,n=$h(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Ae===2||Ae===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&vm(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Bc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&vm(i),vy(n)){case 2:case 8:n=pC;break;case 32:n=Kf;break;case 268435456:n=mC;break;default:n=Kf}return i=bb.bind(null,t),n=_y(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&vm(i),t.callbackPriority=2,t.callbackNode=null,2}function bb(t,e){if(It!==0&&It!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(op()&&t.callbackNode!==n)return null;var i=me;return i=$h(t,t===Me?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(hb(t,i,e),Rb(t,kn()),t.callbackNode!=null&&t.callbackNode===n?bb.bind(null,t):null)}function Y0(t,e){if(op())return null;hb(t,e,!0)}function _V(){xV(function(){Ie&6?_y(hC,gV):Cb()})}function iv(){if(Wr===0){var t=Ha;t===0&&(t=qd,qd<<=1,!(qd&261888)&&(qd=256)),Wr=t}return Wr}function J0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:hf(""+t)}function Q0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function yV(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=J0((r[An]||null).action),o=i.submitter;o&&(e=(e=o[An]||null)?J0(e.formAction):o.getAttribute("formAction"),e!==null&&(s=e,o=null));var a=new Yh("action","action",null,i,r);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Wr!==0){var l=o?Q0(r,o):new FormData(r);Xg(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?Q0(r,o):new FormData(r),Xg(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var $m=0;$m<Fg.length;$m++){var Ym=Fg[$m],vV=Ym.toLowerCase(),TV=Ym[0].toUpperCase()+Ym.slice(1);fi(vV,"on"+TV)}fi(qC,"onAnimationEnd");fi(BC,"onAnimationIteration");fi(GC,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(Uk,"onTransitionRun");fi(Lk,"onTransitionStart");fi(Ok,"onTransitionCancel");fi(zC,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);No("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));No("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));No("onBeforeInput",["compositionend","keypress","textInput","paste"]);No("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));No("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));No("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function xb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=u;try{s(r)}catch(f){Yf(f)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=u;try{s(r)}catch(f){Yf(f)}r.currentTarget=null,s=l}}}}function de(t,e){var n=e[Dg];n===void 0&&(n=e[Dg]=new Set);var i=t+"__bubble";n.has(i)||(Nb(e,t,2,!1),n.add(i))}function Jm(t,e,n){var i=0;e&&(i|=4),Nb(n,t,i,e)}var Wd="_reactListening"+Math.random().toString(36).slice(2);function rv(t){if(!t[Wd]){t[Wd]=!0,EC.forEach(function(n){n!=="selectionchange"&&(EV.has(n)||Jm(n,!1,t),Jm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wd]||(e[Wd]=!0,Jm("selectionchange",!1,e))}}function Nb(t,e,n,i){switch(zb(e)){case 2:var r=QV;break;case 8:r=WV;break;default:r=lv}n=r.bind(null,e,n,t),r=void 0,!Ug||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Qm(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&o.stateNode.containerInfo===r)return;o=o.return}for(;a!==null;){if(o=fa(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}xC(function(){var u=s,f=Iy(n),p=[];e:{var m=HC.get(t);if(m!==void 0){var _=Yh,S=t;switch(t){case"keypress":if(mf(n)===0)break e;case"keydown":case"keyup":_=pk;break;case"focusin":S="focus",_=Am;break;case"focusout":S="blur",_=Am;break;case"beforeblur":case"afterblur":_=Am;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=nk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=_k;break;case qC:case BC:case GC:_=sk;break;case zC:_=vk;break;case"scroll":case"scrollend":_=ek;break;case"wheel":_=Ek;break;case"copy":case"cut":case"paste":_=ak;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=s0;break;case"toggle":case"beforetoggle":_=Sk}var b=(e&4)!==0,P=!b&&(t==="scroll"||t==="scrollend"),T=b?m!==null?m+"Capture":null:m;b=[];for(var v=u,A;v!==null;){var N=v;if(A=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||A===null||T===null||(N=nc(v,T),N!=null&&b.push(dc(v,N,A))),P)break;v=v.return}0<b.length&&(m=new _(m,S,null,n,f),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Vg&&(S=n.relatedTarget||n.fromElement)&&(fa(S)||S[gl]))break e;if((_||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,_?(S=n.relatedTarget||n.toElement,_=u,S=S?fa(S):null,S!==null&&(P=Fc(S),b=S.tag,S!==P||b!==5&&b!==27&&b!==6)&&(S=null)):(_=null,S=u),_!==S)){if(b=i0,N="onMouseLeave",T="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(b=s0,N="onPointerLeave",T="onPointerEnter",v="pointer"),P=_==null?m:Eu(_),A=S==null?m:Eu(S),m=new b(N,v+"leave",_,n,f),m.target=P,m.relatedTarget=A,N=null,fa(f)===u&&(b=new b(T,v+"enter",S,n,f),b.target=A,b.relatedTarget=P,N=b),P=N,_&&S)t:{for(b=IV,T=_,v=S,A=0,N=T;N;N=b(N))A++;N=0;for(var L=v;L;L=b(L))N++;for(;0<A-N;)T=b(T),A--;for(;0<N-A;)v=b(v),N--;for(;A--;){if(T===v||v!==null&&T===v.alternate){b=T;break t}T=b(T),v=b(v)}b=null}else b=null;_!==null&&W0(p,m,_,b,!1),S!==null&&P!==null&&W0(p,P,S,b,!0)}}e:{if(m=u?Eu(u):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var F=u0;else if(l0(m))if(VC)F=Mk;else{F=Dk;var C=Nk}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&Ey(u.elementType)&&(F=u0):F=Pk;if(F&&(F=F(t,u))){kC(p,F,n,f);break e}C&&C(t,m,u),t==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&kg(m,"number",m.value)}switch(C=u?Eu(u):window,t){case"focusin":(l0(C)||C.contentEditable==="true")&&(ma=C,Lg=u,Mu=null);break;case"focusout":Mu=Lg=ma=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,p0(p,n,f);break;case"selectionchange":if(Vk)break;case"keydown":case"keyup":p0(p,n,f)}var E;if(wy)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else pa?PC(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(DC&&n.locale!=="ko"&&(pa||w!=="onCompositionStart"?w==="onCompositionEnd"&&pa&&(E=NC()):(Yr=f,Sy="value"in Yr?Yr.value:Yr.textContent,pa=!0)),C=ch(u,w),0<C.length&&(w=new r0(w,t,null,n,f),p.push({event:w,listeners:C}),E?w.data=E:(E=MC(n),E!==null&&(w.data=E)))),(E=wk?Ck(t,n):Rk(t,n))&&(w=ch(u,"onBeforeInput"),0<w.length&&(C=new r0("onBeforeInput","beforeinput",null,n,f),p.push({event:C,listeners:w}),C.data=E)),yV(p,t,u,n,f)}xb(p,e)})}function dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ch(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=nc(t,n),r!=null&&i.unshift(dc(t,r,s)),r=nc(t,e),r!=null&&i.push(dc(t,r,s))),t.tag===3)return i;t=t.return}return[]}function IV(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function W0(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||u===null||(l=u,r?(u=nc(n,s),u!=null&&o.unshift(dc(n,u,l))):r||(u=nc(n,s),u!=null&&o.push(dc(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SV=/\r\n?/g,AV=/\u0000|\uFFFD/g;function X0(t){return(typeof t=="string"?t:""+t).replace(SV,`
`).replace(AV,"")}function Db(t,e){return e=X0(e),X0(t)===e}function be(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||za(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&za(t,""+i);break;case"className":zd(t,"class",i);break;case"tabIndex":zd(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":zd(t,n,i);break;case"style":bC(t,i,s);break;case"data":if(e!=="object"){zd(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=hf(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&be(t,e,"name",r.name,r,null),be(t,e,"formEncType",r.formEncType,r,null),be(t,e,"formMethod",r.formMethod,r,null),be(t,e,"formTarget",r.formTarget,r,null)):(be(t,e,"encType",r.encType,r,null),be(t,e,"method",r.method,r,null),be(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=hf(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Xi);break;case"onScroll":i!=null&&de("scroll",t);break;case"onScrollEnd":i!=null&&de("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=hf(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":de("beforetoggle",t),de("toggle",t),ff(t,"popover",i);break;case"xlinkActuate":Gi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Gi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Gi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Gi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Gi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Gi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Gi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Gi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Gi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ff(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Z1.get(n)||n,ff(t,n,i))}}function l_(t,e,n,i,r,s){switch(n){case"style":bC(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?za(t,i):(typeof i=="number"||typeof i=="bigint")&&za(t,""+i);break;case"onScroll":i!=null&&de("scroll",t);break;case"onScrollEnd":i!=null&&de("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!IC.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[An]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):ff(t,n,i)}}}function Gt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":de("error",t),de("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:be(t,e,s,o,n,null)}}r&&be(t,e,"srcSet",n.srcSet,n,null),i&&be(t,e,"src",n.src,n,null);return;case"input":de("invalid",t);var a=s=o=r=null,l=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":r=f;break;case"type":o=f;break;case"checked":l=f;break;case"defaultChecked":u=f;break;case"value":s=f;break;case"defaultValue":a=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(B(137,e));break;default:be(t,e,i,f,n,null)}}wC(t,s,a,l,u,o,r,!1);return;case"select":de("invalid",t),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:be(t,e,r,a,n,null)}e=s,n=o,t.multiple=!!i,e!=null?wa(t,!!i,e,!1):n!=null&&wa(t,!!i,n,!0);return;case"textarea":de("invalid",t),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(B(91));break;default:be(t,e,o,a,n,null)}RC(t,i,r,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:be(t,e,l,i,n,null)}return;case"dialog":de("beforetoggle",t),de("toggle",t),de("cancel",t),de("close",t);break;case"iframe":case"object":de("load",t);break;case"video":case"audio":for(i=0;i<cc.length;i++)de(cc[i],t);break;case"image":de("error",t),de("load",t);break;case"details":de("toggle",t);break;case"embed":case"source":case"link":de("error",t),de("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:be(t,e,u,i,n,null)}return;default:if(Ey(e)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&l_(t,e,f,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&be(t,e,a,i,n,null))}function wV(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,u=null,f=null;for(_ in n){var p=n[_];if(n.hasOwnProperty(_)&&p!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(_)||be(t,e,_,null,i,p)}}for(var m in i){var _=i[m];if(p=n[m],i.hasOwnProperty(m)&&(_!=null||p!=null))switch(m){case"type":s=_;break;case"name":r=_;break;case"checked":u=_;break;case"defaultChecked":f=_;break;case"value":o=_;break;case"defaultValue":a=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(B(137,e));break;default:_!==p&&be(t,e,m,_,i,p)}}Mg(t,o,a,l,u,f,s,r);return;case"select":_=o=a=m=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":_=l;default:i.hasOwnProperty(s)||be(t,e,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":m=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&be(t,e,r,s,i,l)}e=a,n=o,i=_,m!=null?wa(t,!!n,m,!1):!!i!=!!n&&(e!=null?wa(t,!!n,e,!0):wa(t,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:be(t,e,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":m=r;break;case"defaultValue":_=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(B(91));break;default:r!==s&&be(t,e,o,r,i,s)}CC(t,m,_);return;case"option":for(var S in n)if(m=n[S],n.hasOwnProperty(S)&&m!=null&&!i.hasOwnProperty(S))switch(S){case"selected":t.selected=!1;break;default:be(t,e,S,null,i,m)}for(l in i)if(m=i[l],_=n[l],i.hasOwnProperty(l)&&m!==_&&(m!=null||_!=null))switch(l){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:be(t,e,l,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b)&&be(t,e,b,null,i,m);for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(B(137,e));break;default:be(t,e,u,m,i,_)}return;default:if(Ey(e)){for(var P in n)m=n[P],n.hasOwnProperty(P)&&m!==void 0&&!i.hasOwnProperty(P)&&l_(t,e,P,void 0,i,m);for(f in i)m=i[f],_=n[f],!i.hasOwnProperty(f)||m===_||m===void 0&&_===void 0||l_(t,e,f,m,i,_);return}}for(var T in n)m=n[T],n.hasOwnProperty(T)&&m!=null&&!i.hasOwnProperty(T)&&be(t,e,T,null,i,m);for(p in i)m=i[p],_=n[p],!i.hasOwnProperty(p)||m===_||m==null&&_==null||be(t,e,p,m,i,_)}function Z0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CV(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],s=r.transferSize,o=r.initiatorType,a=r.duration;if(s&&a&&Z0(o)){for(o=0,a=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],u=l.startTime;if(u>a)break;var f=l.transferSize,p=l.initiatorType;f&&Z0(p)&&(l=l.responseEnd,o+=f*(l<a?1:(a-u)/(l-u)))}if(--i,e+=8*(s+o)/(r.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var u_=null,c_=null;function dh(t){return t.nodeType===9?t:t.ownerDocument}function j0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pb(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function d_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wm=null;function RV(){var t=window.event;return t&&t.type==="popstate"?t===Wm?!1:(Wm=t,!0):(Wm=null,!1)}var Mb=typeof setTimeout=="function"?setTimeout:void 0,bV=typeof clearTimeout=="function"?clearTimeout:void 0,eI=typeof Promise=="function"?Promise:void 0,xV=typeof queueMicrotask=="function"?queueMicrotask:typeof eI<"u"?function(t){return eI.resolve(null).then(t).catch(NV)}:Mb;function NV(t){setTimeout(function(){throw t})}function Cs(t){return t==="head"}function tI(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(r),Xa(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")zu(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,zu(n);for(var s=n.firstChild;s;){var o=s.nextSibling,a=s.nodeName;s[zc]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=o}}else n==="body"&&zu(t.ownerDocument.body);n=r}while(n);Xa(e)}function nI(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function f_(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":f_(n),Ty(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function DV(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[zc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=ei(t.nextSibling),t===null)break}return null}function PV(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ei(t.nextSibling),t===null))return null;return t}function kb(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=ei(t.nextSibling),t===null))return null;return t}function h_(t){return t.data==="$?"||t.data==="$~"}function p_(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function MV(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var m_=null;function iI(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return ei(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function rI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function Vb(t,e,n){switch(e=dh(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function zu(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Ty(t)}var ii=new Map,sI=new Set;function fh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var yr=Se.d;Se.d={f:kV,r:VV,D:UV,C:LV,L:OV,m:FV,X:BV,S:qV,M:GV};function kV(){var t=yr.f(),e=rp();return t||e}function VV(t){var e=_l(t);e!==null&&e.tag===5&&e.type==="form"?bR(e):yr.r(t)}var El=typeof document>"u"?null:document;function Ub(t,e,n){var i=El;if(i&&typeof e=="string"&&e){var r=Jn(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),sI.has(r)||(sI.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),Gt(e,"link",t),Pt(e),i.head.appendChild(e)))}}function UV(t){yr.D(t),Ub("dns-prefetch",t,null)}function LV(t,e){yr.C(t,e),Ub("preconnect",t,e)}function OV(t,e,n){yr.L(t,e,n);var i=El;if(i&&t&&e){var r='link[rel="preload"][as="'+Jn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Jn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Jn(n.imageSizes)+'"]')):r+='[href="'+Jn(t)+'"]';var s=r;switch(e){case"style":s=Wa(t);break;case"script":s=Il(t)}ii.has(s)||(t=He({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),ii.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Qc(s))||e==="script"&&i.querySelector(Wc(s))||(e=i.createElement("link"),Gt(e,"link",t),Pt(e),i.head.appendChild(e)))}}function FV(t,e){yr.m(t,e);var n=El;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Jn(i)+'"][href="'+Jn(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Il(t)}if(!ii.has(s)&&(t=He({rel:"modulepreload",href:t},e),ii.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Wc(s)))return}i=n.createElement("link"),Gt(i,"link",t),Pt(i),n.head.appendChild(i)}}}function qV(t,e,n){yr.S(t,e,n);var i=El;if(i&&t){var r=Aa(i).hoistableStyles,s=Wa(t);e=e||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Qc(s)))a.loading=5;else{t=He({rel:"stylesheet",href:t,"data-precedence":e},n),(n=ii.get(s))&&sv(t,n);var l=o=i.createElement("link");Pt(l),Gt(l,"link",t),l._p=new Promise(function(u,f){l.onload=u,l.onerror=f}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Sf(o,e,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function BV(t,e){yr.X(t,e);var n=El;if(n&&t){var i=Aa(n).hoistableScripts,r=Il(t),s=i.get(r);s||(s=n.querySelector(Wc(r)),s||(t=He({src:t,async:!0},e),(e=ii.get(r))&&ov(t,e),s=n.createElement("script"),Pt(s),Gt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function GV(t,e){yr.M(t,e);var n=El;if(n&&t){var i=Aa(n).hoistableScripts,r=Il(t),s=i.get(r);s||(s=n.querySelector(Wc(r)),s||(t=He({src:t,async:!0,type:"module"},e),(e=ii.get(r))&&ov(t,e),s=n.createElement("script"),Pt(s),Gt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function oI(t,e,n,i){var r=(r=es.current)?fh(r):null;if(!r)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Wa(n.href),n=Aa(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Wa(n.href);var s=Aa(r).hoistableStyles,o=s.get(t);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,o),(s=r.querySelector(Qc(t)))&&!s._p&&(o.instance=s,o.state.loading=5),ii.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ii.set(t,n),s||zV(r,t,n,o.state))),e&&i===null)throw Error(B(528,""));return o}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Il(n),n=Aa(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function Wa(t){return'href="'+Jn(t)+'"'}function Qc(t){return'link[rel="stylesheet"]['+t+"]"}function Lb(t){return He({},t,{"data-precedence":t.precedence,precedence:null})}function zV(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),Gt(e,"link",n),Pt(e),t.head.appendChild(e))}function Il(t){return'[src="'+Jn(t)+'"]'}function Wc(t){return"script[async]"+t}function aI(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Jn(n.href)+'"]');if(i)return e.instance=i,Pt(i),i;var r=He({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Pt(i),Gt(i,"style",r),Sf(i,n.precedence,t),e.instance=i;case"stylesheet":r=Wa(n.href);var s=t.querySelector(Qc(r));if(s)return e.state.loading|=4,e.instance=s,Pt(s),s;i=Lb(n),(r=ii.get(r))&&sv(i,r),s=(t.ownerDocument||t).createElement("link"),Pt(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Gt(s,"link",i),e.state.loading|=4,Sf(s,n.precedence,t),e.instance=s;case"script":return s=Il(n.src),(r=t.querySelector(Wc(s)))?(e.instance=r,Pt(r),r):(i=n,(r=ii.get(s))&&(i=He({},n),ov(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Pt(r),Gt(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Sf(i,n.precedence,t));return e.instance}function Sf(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===e)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function sv(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ov(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Af=null;function lI(t,e,n){if(Af===null){var i=new Map,r=Af=new Map;r.set(n,i)}else r=Af,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[zc]||s[Ot]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(e)||"";o=t+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function uI(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function HV(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Ob(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function KV(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Wa(i.href),s=e.querySelector(Qc(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=hh.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Pt(s);return}s=e.ownerDocument||e,i=Lb(i),(r=ii.get(r))&&sv(i,r),s=s.createElement("link"),Pt(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Gt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=hh.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Xm=0;function $V(t,e){return t.stylesheets&&t.count===0&&wf(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&wf(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Xm===0&&(Xm=62500*CV());var r=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&wf(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Xm?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function hh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ph=null;function wf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ph=new Map,e.forEach(YV,t),ph=null,hh.call(t))}function YV(t,e){if(!(e.state.loading&4)){var n=ph.get(t);if(n)var i=n.get(null);else{n=new Map,ph.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=e.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=hh.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var fc={$$typeof:Wi,Provider:null,Consumer:null,_currentValue:to,_currentValue2:to,_threadCount:0};function JV(t,e,n,i,r,s,o,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tm(0),this.hiddenUpdates=Tm(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Fb(t,e,n,i,r,s,o,a,l,u,f,p){return t=new JV(t,e,n,o,l,u,f,p,a),e=1,s===!0&&(e|=24),s=Dn(3,null,null,e),t.current=s,s.stateNode=t,e=Py(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},Vy(s),t}function qb(t){return t?(t=ya,t):ya}function Bb(t,e,n,i,r,s){r=qb(r),i.context===null?i.context=r:i.pendingContext=r,i=ns(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=is(t,i,e),n!==null&&(Sn(n,t,e),Vu(n,t,e))}function cI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function av(t,e){cI(t,e),(t=t.alternate)&&cI(t,e)}function Gb(t){if(t.tag===13||t.tag===31){var e=Mo(t,67108864);e!==null&&Sn(e,t,67108864),av(t,67108864)}}function dI(t){if(t.tag===13||t.tag===31){var e=Ln();e=yy(e);var n=Mo(t,e);n!==null&&Sn(n,t,e),av(t,e)}}var mh=!0;function QV(t,e,n,i){var r=se.T;se.T=null;var s=Se.p;try{Se.p=2,lv(t,e,n,i)}finally{Se.p=s,se.T=r}}function WV(t,e,n,i){var r=se.T;se.T=null;var s=Se.p;try{Se.p=8,lv(t,e,n,i)}finally{Se.p=s,se.T=r}}function lv(t,e,n,i){if(mh){var r=g_(i);if(r===null)Qm(t,e,i,gh,n),fI(t,i);else if(ZV(r,t,e,n,i))i.stopPropagation();else if(fI(t,i),e&4&&-1<XV.indexOf(t)){for(;r!==null;){var s=_l(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Gs(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Un(o);a.entanglements[1]|=l,o&=~l}Li(s),!(Ie&6)&&(sh=kn()+500,Jc(0))}}break;case 31:case 13:a=Mo(s,2),a!==null&&Sn(a,s,2),rp(),av(s,2)}if(s=g_(i),s===null&&Qm(t,e,i,gh,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Qm(t,e,i,null,n)}}function g_(t){return t=Iy(t),uv(t)}var gh=null;function uv(t){if(gh=null,t=fa(t),t!==null){var e=Fc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=lC(e),t!==null)return t;t=null}else if(n===31){if(t=uC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return gh=t,null}function zb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(U1()){case hC:return 2;case pC:return 8;case Kf:case L1:return 32;case mC:return 268435456;default:return 32}default:return 32}}var __=!1,os=null,as=null,ls=null,hc=new Map,pc=new Map,zr=[],XV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fI(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pc.delete(e.pointerId)}}function lu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=_l(e),e!==null&&Gb(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ZV(t,e,n,i,r){switch(e){case"focusin":return os=lu(os,t,e,n,i,r),!0;case"dragenter":return as=lu(as,t,e,n,i,r),!0;case"mouseover":return ls=lu(ls,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return hc.set(s,lu(hc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,pc.set(s,lu(pc.get(s)||null,t,e,n,i,r)),!0}return!1}function Hb(t){var e=fa(t.target);if(e!==null){var n=Fc(e);if(n!==null){if(e=n.tag,e===13){if(e=lC(n),e!==null){t.blockedOn=e,WE(t.priority,function(){dI(n)});return}}else if(e===31){if(e=uC(n),e!==null){t.blockedOn=e,WE(t.priority,function(){dI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=g_(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Vg=i,n.target.dispatchEvent(i),Vg=null}else return e=_l(n),e!==null&&Gb(e),t.blockedOn=n,!1;e.shift()}return!0}function hI(t,e,n){Cf(t)&&n.delete(e)}function jV(){__=!1,os!==null&&Cf(os)&&(os=null),as!==null&&Cf(as)&&(as=null),ls!==null&&Cf(ls)&&(ls=null),hc.forEach(hI),pc.forEach(hI)}function Xd(t,e){t.blockedOn===e&&(t.blockedOn=null,__||(__=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,jV)))}var Zd=null;function pI(t){Zd!==t&&(Zd=t,At.unstable_scheduleCallback(At.unstable_NormalPriority,function(){Zd===t&&(Zd=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(uv(i||n)===null)continue;break}var s=_l(n);s!==null&&(t.splice(e,3),e-=3,Xg(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Xa(t){function e(l){return Xd(l,t)}os!==null&&Xd(os,t),as!==null&&Xd(as,t),ls!==null&&Xd(ls,t),hc.forEach(e),pc.forEach(e);for(var n=0;n<zr.length;n++){var i=zr[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)Hb(n),n.blockedOn===null&&zr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[An]||null;if(typeof s=="function")o||pI(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[An]||null)a=o.formAction;else if(uv(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),pI(n)}}}function Kb(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(o){return r=o})},focusReset:"manual",scroll:"manual"})}function e(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),r!==null&&(r(),r=null)}}}function cv(t){this._internalRoot=t}ap.prototype.render=cv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=Ln();Bb(n,i,t,e,null,null)};ap.prototype.unmount=cv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bb(t.current,2,null,t,null,null),rp(),e[gl]=null}};function ap(t){this._internalRoot=t}ap.prototype.unstable_scheduleHydration=function(t){if(t){var e=TC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zr.length&&e!==0&&e<zr[n].priority;n++);zr.splice(n,0,t),n===0&&Hb(t)}};var mI=oC.version;if(mI!=="19.2.0")throw Error(B(527,mI,"19.2.0"));Se.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=x1(e),t=t!==null?cC(t):null,t=t===null?null:t.stateNode,t};var e2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{qc=jd.inject(e2),Vn=jd}catch{}}zh.createRoot=function(t,e){if(!aC(t))throw Error(B(299));var n=!1,i="",r=UR,s=LR,o=OR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Fb(t,1,!1,null,null,n,i,null,r,s,o,Kb),t[gl]=e.current,rv(t),new cv(e)};zh.hydrateRoot=function(t,e,n){if(!aC(t))throw Error(B(299));var i=!1,r="",s=UR,o=LR,a=OR,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=Fb(t,1,!0,e,n??null,i,r,l,s,o,a,Kb),e.context=qb(null),n=e.current,i=Ln(),i=yy(i),r=ns(i),r.callback=null,is(n,r,i),n=i,e.current.lanes=n,Gc(e,n),Li(e),t[gl]=e.current,rv(t),new ap(e)};zh.version="19.2.0";function $b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($b)}catch(t){console.error(t)}}$b(),eC.exports=zh;var t2=eC.exports;const n2=Hw(t2),i2="modulepreload",r2=function(t){return"/course-results.v2/"+t},gI={},Yb=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=r2(l),l in gI)return;gI[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":i2,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let s2,o2;function a2(){return{geminiUrl:s2,vertexUrl:o2}}function l2(t,e,n,i){var r,s;if(!(t!=null&&t.baseUrl)){const o=a2();return e?(r=o.vertexUrl)!==null&&r!==void 0?r:n:(s=o.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vo{}function X(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function h(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const f=l[u];h(f,e.slice(s+1),n[u])}else for(const u of l)h(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];h(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const s=r.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>c(a,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function u2(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),s=i.split("."),o=new Set;let a=-1;for(let l=0;l<r.length;l++)if(r[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}y_(t,r,s,0,o)}}function y_(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])y_(l,e,n,i+1,r)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!r.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,f]of Object.entries(l)){const p=[];for(const m of n.slice(i))m==="*"?p.push(u):p.push(m);h(o,p,f)}for(const u of a)delete o[u]}}else{const o=t;s in o&&y_(o[s],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(t){const e={},n=c(t,["operationName"]);n!=null&&h(e,["operationName"],n);const i=c(t,["resourceName"]);return i!=null&&h(e,["_url","resourceName"],i),e}function d2(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],h2(o)),e}function f2(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],p2(o)),e}function h2(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>m2(o))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function p2(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>g2(o))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function m2(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],v2(n)),e}function g2(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],T2(n)),e}function _2(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function y2(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function v2(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&h(e,["videoBytes"],dv(i));const r=c(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function T2(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],dv(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _I;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_I||(_I={}));var yI;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(yI||(yI={}));var vI;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(vI||(vI={}));var Xr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Xr||(Xr={}));var TI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(TI||(TI={}));var EI;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(EI||(EI={}));var II;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(II||(II={}));var SI;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(SI||(SI={}));var AI;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(AI||(AI={}));var wI;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(wI||(wI={}));var CI;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(CI||(CI={}));var RI;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(RI||(RI={}));var bI;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(bI||(bI={}));var xI;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xI||(xI={}));var NI;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(NI||(NI={}));var DI;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(DI||(DI={}));var _h;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(_h||(_h={}));var PI;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(PI||(PI={}));var MI;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(MI||(MI={}));var kI;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(kI||(kI={}));var v_;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(v_||(v_={}));var VI;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(VI||(VI={}));var UI;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(UI||(UI={}));var LI;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(LI||(LI={}));var OI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(OI||(OI={}));var FI;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(FI||(FI={}));var qI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(qI||(qI={}));var BI;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(BI||(BI={}));var GI;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(GI||(GI={}));var zI;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(zI||(zI={}));var HI;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(HI||(HI={}));var KI;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(KI||(KI={}));var $I;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($I||($I={}));var YI;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(YI||(YI={}));var JI;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(JI||(JI={}));var QI;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(QI||(QI={}));var WI;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(WI||(WI={}));var XI;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(XI||(XI={}));var ZI;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ZI||(ZI={}));var jI;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(jI||(jI={}));var eS;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(eS||(eS={}));var tS;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(tS||(tS={}));var nS;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(nS||(nS={}));var iS;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iS||(iS={}));var rS;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rS||(rS={}));var sS;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(sS||(sS={}));var oS;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oS||(oS={}));var aS;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(aS||(aS={}));var lS;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(lS||(lS={}));var Ia;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ia||(Ia={}));class T_{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class uu{get text(){var e,n,i,r,s,o,a,l;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[_,S]of Object.entries(m))_!=="text"&&_!=="thought"&&(S!==null||S!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,i,r,s,o,a,l;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,i,r,s,o,a,l;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,i,r,s,o,a,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,i,r,s,o,a,l,u;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class uS{}class cS{}class E2{}class I2{}class S2{}class A2{}class dS{}class fS{}class hS{}class w2{}class yh{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new yh;let r;const s=e;return n?r=f2(s):r=d2(s),Object.assign(i,r),i}}class pS{}class mS{}class gS{}class C2{}class R2{}class b2{}class _S{}class x2{get text(){var e,n,i;let r="",s=!1;const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,n,i;let r="";const s=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class N2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ee(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Jb(t,e){const n=Ee(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Qb(t){return Array.isArray(t)?t.map(e=>vh(e)):[vh(t)]}function vh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Wb(t){const e=vh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xb(t){const e=vh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yS(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Zb(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>yS(e)):[yS(t)]}function E_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function vS(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function TS(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Wt(t){if(t==null)throw new Error("ContentUnion is required");return E_(t)?t:{role:"user",parts:Zb(t)}}function fv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Wt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=Wt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Wt(n)):[Wt(e)]}function ti(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(vS(t)||TS(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Wt(t)]}const e=[],n=[],i=E_(t[0]);for(const r of t){const s=E_(r);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(r);else{if(vS(r)||TS(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:Zb(n)}),e}function D2(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Xr).includes(n[0].toUpperCase())?n[0].toUpperCase():Xr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Xr).includes(i.toUpperCase())?i.toUpperCase():Xr.TYPE_UNSPECIFIED})}}function Da(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&D2(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Xr).includes(a.toUpperCase())?a.toUpperCase():Xr.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Da(a);else if(i.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Da(u))}e[o]=l}else if(r.includes(o)){const l={};for(const[u,f]of Object.entries(a))l[u]=Da(f);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function hv(t){return Da(t)}function pv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function mv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Sl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Da(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Da(e.response));return t}function Al(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function P2(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function vr(t,e){if(typeof e!="string")throw new Error("name must be a string");return P2(t,e,"cachedContents")}function jb(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Rs(t){return dv(t)}function M2(t){return t!=null&&typeof t=="object"&&"name"in t}function k2(t){return t!=null&&typeof t=="object"&&"video"in t}function V2(t){return t!=null&&typeof t=="object"&&"uri"in t}function ex(t){var e;let n;if(M2(t)&&(n=t.name),!(V2(t)&&(n=t.uri,n===void 0))&&!(k2(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tx(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function nx(t){for(const e of["models","tunedModels","publisherModels"])if(U2(t,e))return t[e];return[]}function U2(t,e){return t!==null&&typeof t=="object"&&e in t}function L2(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function O2(t,e={}){const n=[],i=new Set;for(const r of t){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const o=L2(r,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function ix(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function F2(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rx(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let s=!1;for(const o of r){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function wl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sx(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function q2(t){const e={},n=c(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const i=c(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>_U(o))),h(e,["inlinedResponses"],s)}const r=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["inlinedEmbedContentResponses"],s)}return e}function B2(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const i=c(t,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const r=c(t,["bigqueryDestination","outputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function G2(t){const e={},n=c(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const i=c(t,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&h(e,["bigqueryDestination","outputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rf(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["metadata","state"]);r!=null&&h(e,["state"],sx(r));const s=c(t,["metadata","createTime"]);s!=null&&h(e,["createTime"],s);const o=c(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&h(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&h(e,["dest"],q2(rx(u))),e}function I_(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["state"]);r!=null&&h(e,["state"],sx(r));const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["createTime"]);o!=null&&h(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&h(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&h(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(e,["updateTime"],u);const f=c(t,["model"]);f!=null&&h(e,["model"],f);const p=c(t,["inputConfig"]);p!=null&&h(e,["src"],z2(p));const m=c(t,["outputConfig"]);return m!=null&&h(e,["dest"],B2(rx(m))),e}function z2(t){const e={},n=c(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const i=c(t,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const r=c(t,["bigquerySource","inputUri"]);return r!=null&&h(e,["bigqueryUri"],r),e}function H2(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(e,["fileName"]);i!=null&&h(n,["fileName"],i);const r=c(e,["inlinedRequests"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>gU(t,o))),h(n,["requests","requests"],s)}return n}function K2(t){const e={},n=c(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const i=c(t,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const r=c(t,["bigqueryUri"]);if(r!=null&&h(e,["bigquerySource","inputUri"],r),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function $2(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Y2(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],wl(t,i)),n}function J2(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],wl(t,i)),n}function Q2(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],W2(i));const r=c(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const s=c(t,["finishReason"]);s!=null&&h(e,["finishReason"],s);const o=c(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const f=c(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["safetyRatings"],m)}const p=c(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function W2(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["citations"],i)}return e}function ox(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>AU(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function X2(t,e){const n={},i=c(t,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Z2(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=c(t,["dest"]);return e!==void 0&&r!=null&&h(e,["outputConfig"],G2(F2(r))),n}function ES(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["src"]);r!=null&&h(n,["batch","inputConfig"],H2(t,ix(t,r)));const s=c(e,["config"]);return s!=null&&X2(s,n),n}function j2(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["model"],Ee(t,i));const r=c(e,["src"]);r!=null&&h(n,["inputConfig"],K2(ix(t,r)));const s=c(e,["config"]);return s!=null&&Z2(s,n),n}function eU(t,e){const n={},i=c(t,["displayName"]);return e!==void 0&&i!=null&&h(e,["batch","displayName"],i),n}function tU(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["src"]);r!=null&&h(n,["batch","inputConfig"],lU(t,r));const s=c(e,["config"]);return s!=null&&eU(s,n),n}function nU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],wl(t,i)),n}function iU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],wl(t,i)),n}function rU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);return s!=null&&h(e,["error"],s),e}function sU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);return s!=null&&h(e,["error"],s),e}function oU(t,e){const n={},i=c(e,["contents"]);if(i!=null){let s=fv(t,i);Array.isArray(s)&&(s=s.map(o=>o)),h(n,["requests[]","request","content"],s)}const r=c(e,["config"]);return r!=null&&(h(n,["_self"],aU(r,n)),u2(n,{"requests[].*":"requests[].request.*"})),n}function aU(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function lU(t,e){const n={},i=c(e,["fileName"]);i!=null&&h(n,["file_name"],i);const r=c(e,["inlinedRequests"]);return r!=null&&h(n,["requests"],oU(t,r)),n}function uU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function cU(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],ox(Wt(r)));const s=c(e,["temperature"]);s!=null&&h(i,["temperature"],s);const o=c(e,["topP"]);o!=null&&h(i,["topP"],o);const a=c(e,["topK"]);a!=null&&h(i,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(i,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(i,["stopSequences"],f);const p=c(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&h(i,["presencePenalty"],_);const S=c(e,["frequencyPenalty"]);S!=null&&h(i,["frequencyPenalty"],S);const b=c(e,["seed"]);b!=null&&h(i,["seed"],b);const P=c(e,["responseMimeType"]);P!=null&&h(i,["responseMimeType"],P);const T=c(e,["responseSchema"]);T!=null&&h(i,["responseSchema"],hv(T));const v=c(e,["responseJsonSchema"]);if(v!=null&&h(i,["responseJsonSchema"],v),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=c(e,["safetySettings"]);if(n!==void 0&&A!=null){let k=A;Array.isArray(k)&&(k=k.map(D=>wU(D))),h(n,["safetySettings"],k)}const N=c(e,["tools"]);if(n!==void 0&&N!=null){let k=Al(N);Array.isArray(k)&&(k=k.map(D=>CU(Sl(D)))),h(n,["tools"],k)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&h(n,["toolConfig"],L),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=c(e,["cachedContent"]);n!==void 0&&F!=null&&h(n,["cachedContent"],vr(t,F));const C=c(e,["responseModalities"]);C!=null&&h(i,["responseModalities"],C);const E=c(e,["mediaResolution"]);E!=null&&h(i,["mediaResolution"],E);const w=c(e,["speechConfig"]);if(w!=null&&h(i,["speechConfig"],pv(w)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=c(e,["thinkingConfig"]);x!=null&&h(i,["thinkingConfig"],x);const M=c(e,["imageConfig"]);return M!=null&&h(i,["imageConfig"],M),i}function dU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>Q2(u))),h(e,["candidates"],l)}const r=c(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const s=c(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&h(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function fU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],wl(t,i)),n}function hU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],wl(t,i)),n}function pU(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function mU(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function gU(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["request","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let a=ti(r);Array.isArray(a)&&(a=a.map(l=>ox(l))),h(n,["request","contents"],a)}const s=c(e,["metadata"]);s!=null&&h(n,["metadata"],s);const o=c(e,["config"]);return o!=null&&h(n,["request","generationConfig"],cU(t,o,c(n,["request"],{}))),n}function _U(t){const e={},n=c(t,["response"]);n!=null&&h(e,["response"],dU(n));const i=c(t,["error"]);return i!=null&&h(e,["error"],i),e}function yU(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);if(e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function vU(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);e!==void 0&&r!=null&&h(e,["_query","pageToken"],r);const s=c(t,["filter"]);return e!==void 0&&s!=null&&h(e,["_query","filter"],s),n}function TU(t){const e={},n=c(t,["config"]);return n!=null&&yU(n,e),e}function EU(t){const e={},n=c(t,["config"]);return n!=null&&vU(n,e),e}function IU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["operations"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Rf(o))),h(e,["batchJobs"],s)}return e}function SU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["batchPredictionJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>I_(o))),h(e,["batchJobs"],s)}return e}function AU(t){const e={},n=c(t,["functionCall"]);n!=null&&h(e,["functionCall"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],uU(s));const o=c(t,["functionResponse"]);o!=null&&h(e,["functionResponse"],o);const a=c(t,["inlineData"]);a!=null&&h(e,["inlineData"],$2(a));const l=c(t,["text"]);l!=null&&h(e,["text"],l);const u=c(t,["thought"]);u!=null&&h(e,["thought"],u);const f=c(t,["thoughtSignature"]);f!=null&&h(e,["thoughtSignature"],f);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function wU(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function CU(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["googleMaps"]);r!=null&&h(e,["googleMaps"],pU(r));const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],mU(a));const l=c(t,["urlContext"]);return l!=null&&h(e,["urlContext"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var go;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_RAG_STORES="ragStores",t.PAGED_ITEM_DOCUMENTS="documents"})(go||(go={}));class Xc{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RU extends Vo{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Xc(go.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=ES(this.apiClient,e),i=n._url,r=X("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const f of l){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${r}`;else if(o)i.dest=`${o}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=j2(this.apiClient,e);return a=X("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>I_(f))}else{const u=ES(this.apiClient,e);return a=X("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Rf(f))}}async createEmbeddingsInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tU(this.apiClient,e);return s=X("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>Rf(l))}}async get(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=hU(this.apiClient,e);return a=X("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>I_(f))}else{const u=fU(this.apiClient,e);return a=X("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Rf(f))}}async cancel(e){var n,i,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=J2(this.apiClient,e);o=X("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=Y2(this.apiClient,e);o=X("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=EU(e);return a=X("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=SU(f),m=new _S;return Object.assign(m,p),m})}else{const u=TU(e);return a=X("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=IU(f),m=new _S;return Object.assign(m,p),m})}}async delete(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=iU(this.apiClient,e);return a=X("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>sU(f))}else{const u=nU(this.apiClient,e);return a=X("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>rU(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bU(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function IS(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>QU(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function xU(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let f=ti(o);Array.isArray(f)&&(f=f.map(p=>IS(p))),h(e,["contents"],f)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],IS(Wt(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>WU(p))),h(e,["tools"],f)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&h(e,["toolConfig"],u),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function NU(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);e!==void 0&&r!=null&&h(e,["expireTime"],r);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let p=ti(o);Array.isArray(p)&&(p=p.map(m=>m)),h(e,["contents"],p)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],Wt(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>XU(m))),h(e,["tools"],p)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&h(e,["toolConfig"],u);const f=c(t,["kmsKeyName"]);return e!==void 0&&f!=null&&h(e,["encryption_spec","kmsKeyName"],f),n}function DU(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["model"],Jb(t,i));const r=c(e,["config"]);return r!=null&&xU(r,n),n}function PU(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["model"],Jb(t,i));const r=c(e,["config"]);return r!=null&&NU(r,n),n}function MU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],vr(t,i)),n}function kU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],vr(t,i)),n}function VU(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function UU(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function LU(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function OU(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["parameters"]);r!=null&&h(e,["parameters"],r);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function FU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],vr(t,i)),n}function qU(t,e){const n={},i=c(e,["name"]);return i!=null&&h(n,["_url","name"],vr(t,i)),n}function BU(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function GU(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function zU(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function HU(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function KU(t){const e={},n=c(t,["config"]);return n!=null&&zU(n,e),e}function $U(t){const e={},n=c(t,["config"]);return n!=null&&HU(n,e),e}function YU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["cachedContents"],s)}return e}function JU(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["cachedContents"],s)}return e}function QU(t){const e={},n=c(t,["functionCall"]);n!=null&&h(e,["functionCall"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],LU(s));const o=c(t,["functionResponse"]);o!=null&&h(e,["functionResponse"],o);const a=c(t,["inlineData"]);a!=null&&h(e,["inlineData"],bU(a));const l=c(t,["text"]);l!=null&&h(e,["text"],l);const u=c(t,["thought"]);u!=null&&h(e,["thought"],u);const f=c(t,["thoughtSignature"]);f!=null&&h(e,["thoughtSignature"],f);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function WU(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["googleMaps"]);r!=null&&h(e,["googleMaps"],BU(r));const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],GU(a));const l=c(t,["urlContext"]);return l!=null&&h(e,["urlContext"],l),e}function XU(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>OU(m))),h(e,["functionDeclarations"],p)}const i=c(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],s);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const l=c(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function ZU(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function jU(t,e){const n={},i=c(t,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const r=c(t,["expireTime"]);return e!==void 0&&r!=null&&h(e,["expireTime"],r),n}function eL(t,e){const n={},i=c(e,["name"]);i!=null&&h(n,["_url","name"],vr(t,i));const r=c(e,["config"]);return r!=null&&ZU(r,n),n}function tL(t,e){const n={},i=c(e,["name"]);i!=null&&h(n,["_url","name"],vr(t,i));const r=c(e,["config"]);return r!=null&&jU(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nL extends Vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xc(go.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=PU(this.apiClient,e);return a=X("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}else{const u=DU(this.apiClient,e);return a=X("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=qU(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}else{const u=FU(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=kU(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=UU(f),m=new mS;return Object.assign(m,p),m})}else{const u=MU(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=VU(f),m=new mS;return Object.assign(m,p),m})}}async update(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=tL(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>f)}else{const u=eL(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=$U(e);return a=X("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=JU(f),m=new gS;return Object.assign(m,p),m})}else{const u=KU(e);return a=X("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=YU(f),m=new gS;return Object.assign(m,p),m})}}}function SS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qe(t){return this instanceof qe?(this.v=t,this):new qe(t)}function Pa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(_){return function(S){return Promise.resolve(S).then(_,p)}}function a(_,S){i[_]&&(r[_]=function(b){return new Promise(function(P,T){s.push([_,b,P,T])>1||l(_,b)})},S&&(r[_]=S(r[_])))}function l(_,S){try{u(i[_](S))}catch(b){m(s[0][3],b)}}function u(_){_.value instanceof qe?Promise.resolve(_.value.v).then(f,p):m(s[0][2],_)}function f(_){l("next",_)}function p(_){l("throw",_)}function m(_,S){_(S),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Hu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof SS=="function"?SS(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iL(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:ax(n)}function ax(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function rL(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function AS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let s=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),s&&!ax(t[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class sL{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new oL(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class oL{constructor(e,n,i,r={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),rL(s)}async sendMessage(e){var n;await this.sendPromise;const i=Wt(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await r,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,f=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(a=f.slice(p))!==null&&a!==void 0?a:[]);const _=u?[u]:[];this.recordHistory(i,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Wt(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?AS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,r;return Pa(this,arguments,function*(){var o,a,l,u;const f=[];try{for(var p=!0,m=Hu(e),_;_=yield qe(m.next()),o=_.done,!o;p=!0){u=_.value,p=!1;const S=u;if(iL(S)){const b=(r=(i=S.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;b!==void 0&&f.push(b)}yield yield qe(S)}}catch(S){a={error:S}}finally{try{!p&&!o&&(l=m.return)&&(yield qe(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(s=>s.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...AS(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,lp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aL(t){const e={},n=c(t,["file"]);return n!=null&&h(e,["file"],n),e}function lL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function uL(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],ex(n)),e}function cL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function dL(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],ex(n)),e}function fL(t,e){const n={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const r=c(t,["pageToken"]);return e!==void 0&&r!=null&&h(e,["_query","pageToken"],r),n}function hL(t){const e={},n=c(t,["config"]);return n!=null&&fL(n,e),e}function pL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mL extends Vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Xc(go.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hL(e);return s=X("files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>{const u=pL(l),f=new C2;return Object.assign(f,u),f})}}async createInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aL(e);return s=X("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=lL(l),f=new R2;return Object.assign(f,u),f})}}async get(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dL(e);return s=X("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>l)}}async delete(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uL(e);return s=X("files/{file}",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>{const u=cL(l),f=new b2;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bf(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function gL(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>DL(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function _L(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function yL(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["parameters"]);r!=null&&h(e,["parameters"],r);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function vL(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const i=c(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const r=c(t,["candidateCount"]);r!=null&&h(e,["candidateCount"],r);const s=c(t,["enableAffectiveDialog"]);s!=null&&h(e,["enableAffectiveDialog"],s);const o=c(t,["frequencyPenalty"]);o!=null&&h(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&h(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&h(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&h(e,["mediaResolution"],u);const f=c(t,["presencePenalty"]);f!=null&&h(e,["presencePenalty"],f);const p=c(t,["responseJsonSchema"]);p!=null&&h(e,["responseJsonSchema"],p);const m=c(t,["responseLogprobs"]);m!=null&&h(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&h(e,["responseMimeType"],_);const S=c(t,["responseModalities"]);S!=null&&h(e,["responseModalities"],S);const b=c(t,["responseSchema"]);b!=null&&h(e,["responseSchema"],b);const P=c(t,["routingConfig"]);P!=null&&h(e,["routingConfig"],P);const T=c(t,["seed"]);T!=null&&h(e,["seed"],T);const v=c(t,["speechConfig"]);v!=null&&h(e,["speechConfig"],lx(v));const A=c(t,["stopSequences"]);A!=null&&h(e,["stopSequences"],A);const N=c(t,["temperature"]);N!=null&&h(e,["temperature"],N);const L=c(t,["thinkingConfig"]);L!=null&&h(e,["thinkingConfig"],L);const F=c(t,["topK"]);F!=null&&h(e,["topK"],F);const C=c(t,["topP"]);if(C!=null&&h(e,["topP"],C),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function TL(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function EL(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function IL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],mv(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],_);const S=c(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],gL(Wt(S)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let F=Al(b);Array.isArray(F)&&(F=F.map(C=>ML(Sl(C)))),h(e,["setup","tools"],F)}const P=c(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],PL(P));const T=c(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","inputAudioTranscription"],T);const v=c(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&h(e,["setup","outputAudioTranscription"],v);const A=c(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&h(e,["setup","realtimeInputConfig"],A);const N=c(t,["contextWindowCompression"]);e!==void 0&&N!=null&&h(e,["setup","contextWindowCompression"],N);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L),n}function SL(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],vL(i));const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],lx(mv(p)));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],_);const S=c(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],Wt(S));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let F=Al(b);Array.isArray(F)&&(F=F.map(C=>kL(Sl(C)))),h(e,["setup","tools"],F)}const P=c(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],P);const T=c(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","inputAudioTranscription"],T);const v=c(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&h(e,["setup","outputAudioTranscription"],v);const A=c(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&h(e,["setup","realtimeInputConfig"],A);const N=c(t,["contextWindowCompression"]);e!==void 0&&N!=null&&h(e,["setup","contextWindowCompression"],N);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L),n}function AL(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["setup","model"],Ee(t,i));const r=c(e,["config"]);return r!=null&&h(n,["config"],IL(r,n)),n}function wL(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["setup","model"],Ee(t,i));const r=c(e,["config"]);return r!=null&&h(n,["config"],SL(r,n)),n}function CL(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function RL(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["weightedPrompts"],i)}return e}function bL(t){const e={},n=c(t,["media"]);if(n!=null){let u=Qb(n);Array.isArray(u)&&(u=u.map(f=>bf(f))),h(e,["mediaChunks"],u)}const i=c(t,["audio"]);i!=null&&h(e,["audio"],bf(Xb(i)));const r=c(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const s=c(t,["video"]);s!=null&&h(e,["video"],bf(Wb(s)));const o=c(t,["text"]);o!=null&&h(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function xL(t){const e={},n=c(t,["media"]);if(n!=null){let u=Qb(n);Array.isArray(u)&&(u=u.map(f=>f)),h(e,["mediaChunks"],u)}const i=c(t,["audio"]);i!=null&&h(e,["audio"],Xb(i));const r=c(t,["audioStreamEnd"]);r!=null&&h(e,["audioStreamEnd"],r);const s=c(t,["video"]);s!=null&&h(e,["video"],Wb(s));const o=c(t,["text"]);o!=null&&h(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function NL(t){const e={},n=c(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const i=c(t,["serverContent"]);i!=null&&h(e,["serverContent"],i);const r=c(t,["toolCall"]);r!=null&&h(e,["toolCall"],r);const s=c(t,["toolCallCancellation"]);s!=null&&h(e,["toolCallCancellation"],s);const o=c(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],VL(o));const a=c(t,["goAway"]);a!=null&&h(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],l),e}function DL(t){const e={},n=c(t,["functionCall"]);n!=null&&h(e,["functionCall"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],_L(s));const o=c(t,["functionResponse"]);o!=null&&h(e,["functionResponse"],o);const a=c(t,["inlineData"]);a!=null&&h(e,["inlineData"],bf(a));const l=c(t,["text"]);l!=null&&h(e,["text"],l);const u=c(t,["thought"]);u!=null&&h(e,["thought"],u);const f=c(t,["thoughtSignature"]);f!=null&&h(e,["thoughtSignature"],f);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function PL(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lx(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const i=c(t,["voiceConfig"]);if(i!=null&&h(e,["voiceConfig"],i),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ML(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["googleMaps"]);r!=null&&h(e,["googleMaps"],TL(r));const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],EL(a));const l=c(t,["urlContext"]);return l!=null&&h(e,["urlContext"],l),e}function kL(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>yL(m))),h(e,["functionDeclarations"],p)}const i=c(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],s);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const l=c(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function VL(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const i=c(t,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const r=c(t,["candidatesTokenCount"]);r!=null&&h(e,["responseTokenCount"],r);const s=c(t,["toolUsePromptTokenCount"]);s!=null&&h(e,["toolUsePromptTokenCount"],s);const o=c(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["promptTokensDetails"],_)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["cacheTokensDetails"],_)}const f=c(t,["candidatesTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["responseTokensDetails"],_)}const p=c(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(S=>S)),h(e,["toolUsePromptTokensDetails"],_)}const m=c(t,["trafficType"]);return m!=null&&h(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UL(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function LL(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const i=c(t,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],OL(i));const r=c(t,["tokenCount"]);r!=null&&h(e,["tokenCount"],r);const s=c(t,["finishReason"]);s!=null&&h(e,["finishReason"],s);const o=c(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const f=c(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>_)),h(e,["safetyRatings"],m)}const p=c(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function OL(t){const e={},n=c(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),h(e,["citations"],i)}return e}function FL(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let s=ti(r);Array.isArray(s)&&(s=s.map(o=>o)),h(n,["contents"],s)}return n}function qL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["tokensInfo"],r)}return e}function BL(t){const e={},n=c(t,["values"]);n!=null&&h(e,["values"],n);const i=c(t,["statistics"]);return i!=null&&h(e,["statistics"],GL(i)),e}function GL(t){const e={},n=c(t,["truncated"]);n!=null&&h(e,["truncated"],n);const i=c(t,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function up(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>YO(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function zL(t){const e={},n=c(t,["controlType"]);n!=null&&h(e,["controlType"],n);const i=c(t,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function HL(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function KL(t,e){const n={},i=c(t,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],Wt(i));const r=c(t,["tools"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>hx(a))),h(e,["tools"],o)}const s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&h(e,["generationConfig"],kO(s)),n}function $L(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let o=ti(r);Array.isArray(o)&&(o=o.map(a=>up(a))),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&HL(s),n}function YL(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let o=ti(r);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&KL(s,n),n}function JL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);i!=null&&h(e,["totalTokens"],i);const r=c(t,["cachedContentTokenCount"]);return r!=null&&h(e,["cachedContentTokenCount"],r),e}function QL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["totalTokens"]);return i!=null&&h(e,["totalTokens"],i),e}function WL(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],Ee(t,i)),n}function XL(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],Ee(t,i)),n}function ZL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function jL(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function eO(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&h(e,["parameters","language"],_);const S=c(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","compressionQuality"],b);const P=c(t,["addWatermark"]);e!==void 0&&P!=null&&h(e,["parameters","addWatermark"],P);const T=c(t,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const v=c(t,["editMode"]);e!==void 0&&v!=null&&h(e,["parameters","editMode"],v);const A=c(t,["baseSteps"]);return e!==void 0&&A!=null&&h(e,["parameters","editConfig","baseSteps"],A),n}function tO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>jO(l))),h(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&eO(o,n),n}function nO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>cp(s))),h(e,["generatedImages"],r)}return e}function iO(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&h(e,["requests[]","title"],r);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function rO(t,e){const n={},i=c(t,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);const r=c(t,["title"]);e!==void 0&&r!=null&&h(e,["instances[]","title"],r);const s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&h(e,["parameters","outputDimensionality"],s);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),n}function sO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let a=fv(t,r);Array.isArray(a)&&(a=a.map(l=>l)),h(n,["requests[]","content"],a)}const s=c(e,["config"]);s!=null&&iO(s,n);const o=c(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],Ee(t,o)),n}function oO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let o=fv(t,r);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["instances[]","content"],o)}const s=c(e,["config"]);return s!=null&&rO(s,n),n}function aO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["embeddings"],s)}const r=c(t,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function lO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>BL(o))),h(e,["embeddings"],s)}const r=c(t,["metadata"]);return r!=null&&h(e,["metadata"],r),e}function uO(t){const e={},n=c(t,["endpoint"]);n!=null&&h(e,["name"],n);const i=c(t,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function cO(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function dO(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const i=c(t,["name"]);i!=null&&h(e,["name"],i);const r=c(t,["parameters"]);r!=null&&h(e,["parameters"],r);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function fO(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],up(Wt(r)));const s=c(e,["temperature"]);s!=null&&h(i,["temperature"],s);const o=c(e,["topP"]);o!=null&&h(i,["topP"],o);const a=c(e,["topK"]);a!=null&&h(i,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(i,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(i,["stopSequences"],f);const p=c(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&h(i,["presencePenalty"],_);const S=c(e,["frequencyPenalty"]);S!=null&&h(i,["frequencyPenalty"],S);const b=c(e,["seed"]);b!=null&&h(i,["seed"],b);const P=c(e,["responseMimeType"]);P!=null&&h(i,["responseMimeType"],P);const T=c(e,["responseSchema"]);T!=null&&h(i,["responseSchema"],hv(T));const v=c(e,["responseJsonSchema"]);if(v!=null&&h(i,["responseJsonSchema"],v),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=c(e,["safetySettings"]);if(n!==void 0&&A!=null){let k=A;Array.isArray(k)&&(k=k.map(D=>eF(D))),h(n,["safetySettings"],k)}const N=c(e,["tools"]);if(n!==void 0&&N!=null){let k=Al(N);Array.isArray(k)&&(k=k.map(D=>oF(Sl(D)))),h(n,["tools"],k)}const L=c(e,["toolConfig"]);if(n!==void 0&&L!=null&&h(n,["toolConfig"],L),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=c(e,["cachedContent"]);n!==void 0&&F!=null&&h(n,["cachedContent"],vr(t,F));const C=c(e,["responseModalities"]);C!=null&&h(i,["responseModalities"],C);const E=c(e,["mediaResolution"]);E!=null&&h(i,["mediaResolution"],E);const w=c(e,["speechConfig"]);if(w!=null&&h(i,["speechConfig"],pv(w)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=c(e,["thinkingConfig"]);x!=null&&h(i,["thinkingConfig"],x);const M=c(e,["imageConfig"]);return M!=null&&h(i,["imageConfig"],M),i}function hO(t,e,n){const i={},r=c(e,["systemInstruction"]);n!==void 0&&r!=null&&h(n,["systemInstruction"],Wt(r));const s=c(e,["temperature"]);s!=null&&h(i,["temperature"],s);const o=c(e,["topP"]);o!=null&&h(i,["topP"],o);const a=c(e,["topK"]);a!=null&&h(i,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(i,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(i,["stopSequences"],f);const p=c(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&h(i,["presencePenalty"],_);const S=c(e,["frequencyPenalty"]);S!=null&&h(i,["frequencyPenalty"],S);const b=c(e,["seed"]);b!=null&&h(i,["seed"],b);const P=c(e,["responseMimeType"]);P!=null&&h(i,["responseMimeType"],P);const T=c(e,["responseSchema"]);T!=null&&h(i,["responseSchema"],hv(T));const v=c(e,["responseJsonSchema"]);v!=null&&h(i,["responseJsonSchema"],v);const A=c(e,["routingConfig"]);A!=null&&h(i,["routingConfig"],A);const N=c(e,["modelSelectionConfig"]);N!=null&&h(i,["modelConfig"],N);const L=c(e,["safetySettings"]);if(n!==void 0&&L!=null){let K=L;Array.isArray(K)&&(K=K.map(ie=>ie)),h(n,["safetySettings"],K)}const F=c(e,["tools"]);if(n!==void 0&&F!=null){let K=Al(F);Array.isArray(K)&&(K=K.map(ie=>hx(Sl(ie)))),h(n,["tools"],K)}const C=c(e,["toolConfig"]);n!==void 0&&C!=null&&h(n,["toolConfig"],C);const E=c(e,["labels"]);n!==void 0&&E!=null&&h(n,["labels"],E);const w=c(e,["cachedContent"]);n!==void 0&&w!=null&&h(n,["cachedContent"],vr(t,w));const x=c(e,["responseModalities"]);x!=null&&h(i,["responseModalities"],x);const M=c(e,["mediaResolution"]);M!=null&&h(i,["mediaResolution"],M);const k=c(e,["speechConfig"]);k!=null&&h(i,["speechConfig"],fx(pv(k)));const D=c(e,["audioTimestamp"]);D!=null&&h(i,["audioTimestamp"],D);const Kt=c(e,["thinkingConfig"]);Kt!=null&&h(i,["thinkingConfig"],Kt);const Ct=c(e,["imageConfig"]);return Ct!=null&&h(i,["imageConfig"],Ct),i}function wS(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let o=ti(r);Array.isArray(o)&&(o=o.map(a=>up(a))),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&h(n,["generationConfig"],fO(t,s,n)),n}function CS(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["contents"]);if(r!=null){let o=ti(r);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&h(n,["generationConfig"],hO(t,s,n)),n}function RS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(u=>LL(u))),h(e,["candidates"],l)}const r=c(t,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const s=c(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&h(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function bS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["candidates"],u)}const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const s=c(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const o=c(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function pO(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=c(t,["aspectRatio"]);e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r);const s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&h(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const f=c(t,["language"]);e!==void 0&&f!=null&&h(e,["parameters","language"],f);const p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const m=c(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=c(t,["imageSize"]);if(e!==void 0&&_!=null&&h(e,["parameters","sampleImageSize"],_),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function mO(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=c(t,["negativePrompt"]);e!==void 0&&r!=null&&h(e,["parameters","negativePrompt"],r);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&h(e,["parameters","language"],_);const S=c(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const b=c(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&h(e,["parameters","outputOptions","compressionQuality"],b);const P=c(t,["addWatermark"]);e!==void 0&&P!=null&&h(e,["parameters","addWatermark"],P);const T=c(t,["labels"]);e!==void 0&&T!=null&&h(e,["labels"],T);const v=c(t,["imageSize"]);e!==void 0&&v!=null&&h(e,["parameters","sampleImageSize"],v);const A=c(t,["enhancePrompt"]);return e!==void 0&&A!=null&&h(e,["parameters","enhancePrompt"],A),n}function gO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["config"]);return s!=null&&pO(s,n),n}function _O(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["config"]);return s!=null&&mO(s,n),n}function yO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>NO(o))),h(e,["generatedImages"],s)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],cx(r)),e}function vO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>cp(o))),h(e,["generatedImages"],s)}const r=c(t,["positivePromptSafetyAttributes"]);return r!=null&&h(e,["positivePromptSafetyAttributes"],dx(r)),e}function TO(t,e){const n={},i=c(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=c(t,["durationSeconds"]);if(e!==void 0&&r!=null&&h(e,["parameters","durationSeconds"],r),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const o=c(t,["resolution"]);e!==void 0&&o!=null&&h(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&h(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=c(t,["lastFrame"]);e!==void 0&&f!=null&&h(e,["instances[0]","lastFrame"],dp(f));const p=c(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>vF(_))),h(e,["instances[0]","referenceImages"],m)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function EO(t,e){const n={},i=c(t,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const s=c(t,["fps"]);e!==void 0&&s!=null&&h(e,["parameters","fps"],s);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=c(t,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const _=c(t,["enhancePrompt"]);e!==void 0&&_!=null&&h(e,["parameters","enhancePrompt"],_);const S=c(t,["generateAudio"]);e!==void 0&&S!=null&&h(e,["parameters","generateAudio"],S);const b=c(t,["lastFrame"]);e!==void 0&&b!=null&&h(e,["instances[0]","lastFrame"],hi(b));const P=c(t,["referenceImages"]);if(e!==void 0&&P!=null){let A=P;Array.isArray(A)&&(A=A.map(N=>TF(N))),h(e,["instances[0]","referenceImages"],A)}const T=c(t,["mask"]);e!==void 0&&T!=null&&h(e,["instances[0]","mask"],yF(T));const v=c(t,["compressionQuality"]);return e!==void 0&&v!=null&&h(e,["parameters","compressionQuality"],v),n}function IO(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],CO(o)),e}function SO(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["metadata"]);i!=null&&h(e,["metadata"],i);const r=c(t,["done"]);r!=null&&h(e,["done"],r);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],RO(o)),e}function AO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],dp(s));const o=c(e,["video"]);o!=null&&h(n,["instances[0]","video"],px(o));const a=c(e,["source"]);a!=null&&bO(a,n);const l=c(e,["config"]);return l!=null&&TO(l,n),n}function wO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["prompt"]);r!=null&&h(n,["instances[0]","prompt"],r);const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],hi(s));const o=c(e,["video"]);o!=null&&h(n,["instances[0]","video"],mx(o));const a=c(e,["source"]);a!=null&&xO(a,n);const l=c(e,["config"]);return l!=null&&EO(l,n),n}function CO(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>PO(o))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function RO(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>MO(o))),h(e,["generatedVideos"],s)}const i=c(t,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const r=c(t,["raiMediaFilteredReasons"]);return r!=null&&h(e,["raiMediaFilteredReasons"],r),e}function bO(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],dp(r));const s=c(t,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],px(s)),n}function xO(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],hi(r));const s=c(t,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],mx(s)),n}function NO(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],FO(n));const i=c(t,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const r=c(t,["_self"]);return r!=null&&h(e,["safetyAttributes"],cx(r)),e}function cp(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],ux(n));const i=c(t,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const r=c(t,["_self"]);r!=null&&h(e,["safetyAttributes"],dx(r));const s=c(t,["prompt"]);return s!=null&&h(e,["enhancedPrompt"],s),e}function DO(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["mask"],ux(n));const i=c(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),h(e,["labels"],r)}return e}function PO(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],gF(n)),e}function MO(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],_F(n)),e}function kO(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const i=c(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const r=c(t,["candidateCount"]);r!=null&&h(e,["candidateCount"],r);const s=c(t,["enableAffectiveDialog"]);s!=null&&h(e,["enableAffectiveDialog"],s);const o=c(t,["frequencyPenalty"]);o!=null&&h(e,["frequencyPenalty"],o);const a=c(t,["logprobs"]);a!=null&&h(e,["logprobs"],a);const l=c(t,["maxOutputTokens"]);l!=null&&h(e,["maxOutputTokens"],l);const u=c(t,["mediaResolution"]);u!=null&&h(e,["mediaResolution"],u);const f=c(t,["presencePenalty"]);f!=null&&h(e,["presencePenalty"],f);const p=c(t,["responseJsonSchema"]);p!=null&&h(e,["responseJsonSchema"],p);const m=c(t,["responseLogprobs"]);m!=null&&h(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&h(e,["responseMimeType"],_);const S=c(t,["responseModalities"]);S!=null&&h(e,["responseModalities"],S);const b=c(t,["responseSchema"]);b!=null&&h(e,["responseSchema"],b);const P=c(t,["routingConfig"]);P!=null&&h(e,["routingConfig"],P);const T=c(t,["seed"]);T!=null&&h(e,["seed"],T);const v=c(t,["speechConfig"]);v!=null&&h(e,["speechConfig"],fx(v));const A=c(t,["stopSequences"]);A!=null&&h(e,["stopSequences"],A);const N=c(t,["temperature"]);N!=null&&h(e,["temperature"],N);const L=c(t,["thinkingConfig"]);L!=null&&h(e,["thinkingConfig"],L);const F=c(t,["topK"]);F!=null&&h(e,["topK"],F);const C=c(t,["topP"]);if(C!=null&&h(e,["topP"],C),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function VO(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],Ee(t,i)),n}function UO(t,e){const n={},i=c(e,["model"]);return i!=null&&h(n,["_url","name"],Ee(t,i)),n}function LO(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function OO(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function FO(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],Rs(n));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function ux(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],Rs(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function dp(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],Rs(n));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function hi(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const i=c(t,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Rs(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function qO(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&h(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],tx(t,a)),i}function BO(t,e,n){const i={},r=c(e,["pageSize"]);n!==void 0&&r!=null&&h(n,["_query","pageSize"],r);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&h(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],tx(t,a)),i}function GO(t,e){const n={},i=c(e,["config"]);return i!=null&&qO(t,i,n),n}function zO(t,e){const n={},i=c(e,["config"]);return i!=null&&BO(t,i,n),n}function HO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let s=nx(r);Array.isArray(s)&&(s=s.map(o=>S_(o))),h(e,["models"],s)}return e}function KO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const r=c(t,["_self"]);if(r!=null){let s=nx(r);Array.isArray(s)&&(s=s.map(o=>A_(o))),h(e,["models"],s)}return e}function $O(t){const e={},n=c(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const i=c(t,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);const r=c(t,["maskDilation"]);return r!=null&&h(e,["dilation"],r),e}function S_(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);r!=null&&h(e,["description"],r);const s=c(t,["version"]);s!=null&&h(e,["version"],s);const o=c(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],aF(o));const a=c(t,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);return u!=null&&h(e,["supportedActions"],u),e}function A_(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const i=c(t,["displayName"]);i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);r!=null&&h(e,["description"],r);const s=c(t,["versionId"]);s!=null&&h(e,["version"],s);const o=c(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>uO(m))),h(e,["endpoints"],p)}const a=c(t,["labels"]);a!=null&&h(e,["labels"],a);const l=c(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],lF(l));const u=c(t,["defaultCheckpointId"]);u!=null&&h(e,["defaultCheckpointId"],u);const f=c(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["checkpoints"],p)}return e}function YO(t){const e={},n=c(t,["functionCall"]);n!=null&&h(e,["functionCall"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],cO(s));const o=c(t,["functionResponse"]);o!=null&&h(e,["functionResponse"],o);const a=c(t,["inlineData"]);a!=null&&h(e,["inlineData"],UL(a));const l=c(t,["text"]);l!=null&&h(e,["text"],l);const u=c(t,["thought"]);u!=null&&h(e,["thought"],u);const f=c(t,["thoughtSignature"]);f!=null&&h(e,["thoughtSignature"],f);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function JO(t){const e={},n=c(t,["productImage"]);return n!=null&&h(e,["image"],hi(n)),e}function QO(t,e){const n={},i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const r=c(t,["baseSteps"]);e!==void 0&&r!=null&&h(e,["parameters","editConfig","baseSteps"],r);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=c(t,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&h(e,["parameters","addWatermark"],u);const f=c(t,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const p=c(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const m=c(t,["enhancePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m);const _=c(t,["labels"]);return e!==void 0&&_!=null&&h(e,["labels"],_),n}function WO(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["source"]);r!=null&&ZO(r,n);const s=c(e,["config"]);return s!=null&&QO(s,n),n}function XO(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>cp(r))),h(e,["generatedImages"],i)}return e}function ZO(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["personImage"]);e!==void 0&&r!=null&&h(e,["instances[0]","personImage","image"],hi(r));const s=c(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>JO(a))),h(e,["instances[0]","productImages"],o)}return n}function jO(t){const e={},n=c(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],hi(n));const i=c(t,["referenceId"]);i!=null&&h(e,["referenceId"],i);const r=c(t,["referenceType"]);r!=null&&h(e,["referenceType"],r);const s=c(t,["maskImageConfig"]);s!=null&&h(e,["maskImageConfig"],$O(s));const o=c(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],zL(o));const a=c(t,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],l),e}function cx(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function dx(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const i=c(t,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const r=c(t,["contentType"]);return r!=null&&h(e,["contentType"],r),e}function eF(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=c(t,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function tF(t){const e={},n=c(t,["image"]);return n!=null&&h(e,["image"],hi(n)),e}function nF(t,e){const n={},i=c(t,["mode"]);e!==void 0&&i!=null&&h(e,["parameters","mode"],i);const r=c(t,["maxPredictions"]);e!==void 0&&r!=null&&h(e,["parameters","maxPredictions"],r);const s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&h(e,["parameters","confidenceThreshold"],s);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&h(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&h(e,["labels"],l),n}function iF(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["source"]);r!=null&&sF(r,n);const s=c(e,["config"]);return s!=null&&nF(s,n),n}function rF(t){const e={},n=c(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>DO(r))),h(e,["generatedMasks"],i)}return e}function sF(t,e){const n={},i=c(t,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const r=c(t,["image"]);e!==void 0&&r!=null&&h(e,["instances[0]","image"],hi(r));const s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&h(e,["instances[0]","scribble"],tF(s)),n}function fx(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const i=c(t,["voiceConfig"]);if(i!=null&&h(e,["voiceConfig"],i),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function oF(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["googleMaps"]);r!=null&&h(e,["googleMaps"],LO(r));const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],OO(a));const l=c(t,["urlContext"]);return l!=null&&h(e,["urlContext"],l),e}function hx(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>dO(m))),h(e,["functionDeclarations"],p)}const i=c(t,["retrieval"]);i!=null&&h(e,["retrieval"],i);const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],s);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const l=c(t,["enterpriseWebSearch"]);l!=null&&h(e,["enterpriseWebSearch"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function aF(t){const e={},n=c(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&h(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function lF(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const i=c(t,["createTime"]);i!=null&&h(e,["createTime"],i);const r=c(t,["updateTime"]);return r!=null&&h(e,["updateTime"],r),e}function uF(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),n}function cF(t,e){const n={},i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const r=c(t,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),n}function dF(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","name"],Ee(t,i));const r=c(e,["config"]);return r!=null&&uF(r,n),n}function fF(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["config"]);return r!=null&&cF(r,n),n}function hF(t,e){const n={},i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const r=c(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&h(e,["parameters","safetySetting"],r);const s=c(t,["personGeneration"]);e!==void 0&&s!=null&&h(e,["parameters","personGeneration"],s);const o=c(t,["includeRaiReason"]);e!==void 0&&o!=null&&h(e,["parameters","includeRaiReason"],o);const a=c(t,["outputMimeType"]);e!==void 0&&a!=null&&h(e,["parameters","outputOptions","mimeType"],a);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=c(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=c(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const m=c(t,["numberOfImages"]);e!==void 0&&m!=null&&h(e,["parameters","sampleCount"],m);const _=c(t,["mode"]);return e!==void 0&&_!=null&&h(e,["parameters","mode"],_),n}function pF(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["_url","model"],Ee(t,i));const r=c(e,["image"]);r!=null&&h(n,["instances[0]","image"],hi(r));const s=c(e,["upscaleFactor"]);s!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=c(e,["config"]);return o!=null&&hF(o,n),n}function mF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const i=c(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>cp(s))),h(e,["generatedImages"],r)}return e}function gF(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const i=c(t,["encodedVideo"]);i!=null&&h(e,["videoBytes"],Rs(i));const r=c(t,["encoding"]);return r!=null&&h(e,["mimeType"],r),e}function _F(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const i=c(t,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Rs(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function yF(t){const e={},n=c(t,["image"]);n!=null&&h(e,["_self"],hi(n));const i=c(t,["maskMode"]);return i!=null&&h(e,["maskMode"],i),e}function vF(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],dp(n));const i=c(t,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function TF(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],hi(n));const i=c(t,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function px(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const i=c(t,["videoBytes"]);i!=null&&h(e,["encodedVideo"],Rs(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["encoding"],r),e}function mx(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const i=c(t,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Rs(i));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EF="Content-Type",IF="X-Server-Timeout",SF="User-Agent",w_="x-goog-api-client",AF="1.28.0",wF=`google-genai-sdk/${AF}`,CF="v1beta1",RF="v1beta",xS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class bF{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:CF,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:RF,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(n))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,r.toString(),e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}r&&r.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&xF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await NS(r),new T_(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await NS(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return Pa(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield qe(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(l,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,S=m.code,b=`got status: ${_}. ${JSON.stringify(p)}`;if(S>=400&&S<600)throw new lp({message:b,status:S})}}catch(p){if(p.name==="ApiError")throw p}o+=u;let f=o.match(xS);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield qe(new T_(m)),o=o.slice(f[0].length),f=o.match(xS)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=wF+" "+this.clientOptions.userAgentExtra;return e[SF]=n,e[w_]=n,e[EF]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,s]of Object.entries(e.headers))i.append(r,s);e.timeout&&e.timeout>0&&i.append(IF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}async uploadFile(e,n){var i,r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);s.sizeBytes=String(a.size);const l=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=l;let u="";typeof e=="string"&&(u=e.replace(/[/\\]+$/,""),u=(r=u.split(/[/\\]/).pop())!==null&&r!==void 0?r:"");const f=await this.fetchUploadUrl(s,u,n);return o.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i){var r;let s={};i!=null&&i.httpOptions?s=i.httpOptions:s={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`},n?{"X-Goog-Upload-File-Name":n}:{})};const o={file:e},a=await this.request({path:X("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=a==null?void 0:a.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function NS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new lp({message:r,status:n}):new Error(r)}}function xF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],f=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?a[l]=i(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NF="mcp_used/unknown";let DF=!1;function gx(t){for(const e of t)if(PF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DF}function _x(t){var e;const n=(e=t[w_])!==null&&e!==void 0?e:"";t[w_]=(n+` ${NF}`).trimStart()}function PF(t){return t!==null&&typeof t=="object"&&t instanceof gv}function MF(t,e=100){return Pa(this,arguments,function*(){let i,r=0;for(;r<e;){const s=yield qe(t.listTools({cursor:i}));for(const o of s.tools)yield yield qe(o),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class gv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new gv(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const s={},o=[];for(const f of this.mcpClients)try{for(var a=!0,l=(n=void 0,Hu(MF(f))),u;u=await l.next(),e=u.done,!e;a=!0){r=u.value,a=!1;const p=r;o.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=f}}catch(p){n={error:p}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),O2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await r.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kF(t,e,n){const i=new N2;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class VF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=OF(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const f=new Promise(A=>{u=A}),p=e.callbacks,m=function(){u({})},_=this.apiClient,S={onopen:m,onmessage:A=>{kF(_,p.onmessage,A)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(A){}},b=this.webSocketFactory.create(l,LF(o),S);b.connect(),await f;const v={setup:{model:Ee(this.apiClient,e.model)}};return b.send(JSON.stringify(v)),new UF(b,this.apiClient)}}class UF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=RL(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=CL(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ia.PLAY)}pause(){this.sendPlaybackControl(Ia.PAUSE)}stop(){this.sendPlaybackControl(Ia.STOP)}resetContext(){this.sendPlaybackControl(Ia.RESET_CONTEXT)}close(){this.conn.close()}}function LF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function OF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qF(t,e,n){const i=new x2;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const s=JSON.parse(r);if(t.isVertexAI()){const o=NL(s);Object.assign(i,o)}else Object.assign(i,s);e(i)}class BF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new VF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&gx(e.config.tools)&&_x(p);const m=KF(p);if(this.apiClient.isVertexAI())f=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const w=this.apiClient.getApiKey();let x="BidiGenerateContent",M="key";w!=null&&w.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",M="access_token"),f=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${x}?${M}=${w}`}let _=()=>{};const S=new Promise(w=>{_=w}),b=e.callbacks,P=function(){var w;(w=b==null?void 0:b.onopen)===null||w===void 0||w.call(b),_({})},T=this.apiClient,v={onopen:P,onmessage:w=>{qF(T,b.onmessage,w)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(w){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(w){}},A=this.webSocketFactory.create(f,HF(m),v);A.connect(),await S;let N=Ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&N.startsWith("publishers/")){const w=this.apiClient.getProject(),x=this.apiClient.getLocation();N=`projects/${w}/locations/${x}/`+N}let L={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[_h.AUDIO]}:e.config.responseModalities=[_h.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],C=[];for(const w of F)if(this.isCallableTool(w)){const x=w;C.push(await x.tool())}else C.push(w);C.length>0&&(e.config.tools=C);const E={model:N,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?L=wL(this.apiClient,E):L=AL(this.apiClient,E),delete L.config,A.send(JSON.stringify(L)),new zF(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const GF={turnComplete:!0};class zF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ti(n.turns),e.isVertexAI()||(i=i.map(r=>up(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(FF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},GF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:xL(e)}:n={realtimeInput:bL(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function HF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function KF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DS=10;function PS(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ma(o)){r=!0;break}if(!r)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Ma(t){return"callTool"in t&&typeof t.callTool=="function"}function $F(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>Ma(r)))!==null&&i!==void 0?i:!1}function YF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!Ma(r)))!==null&&i!==void 0?i:!1}function MS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JF extends Vo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$F(n)||PS(n.config))return await this.generateContentInternal(l);if(YF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,f;const p=ti(l.contents),m=(s=(r=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:DS;let _=0;for(;_<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const S=u.candidates[0].content,b=[];for(const P of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Ma(P)){const v=await P.callTool(u.functionCalls);b.push(...v)}_++,f={role:"user",parts:b},l.contents=ti(l.contents),l.contents.push(S),l.contents.push(f),MS(l.config)&&(p.push(S),p.push(f))}return MS(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),PS(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let s;const o=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((r=l==null?void 0:l.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Xc(go.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>Ma(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&gx(e.config.tools)){const l=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),_x(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,i,r;const s=new Map;for(const o of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(Ma(o)){const a=o,l=await a.tool();for(const u of(r=l.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,i,r;const s=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:DS;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,f,p){var m,_;return Pa(this,arguments,function*(){for(var S,b,P,T;a<s;){o&&(a++,o=!1);const L=yield qe(u.processParamsMaybeAddMcpUsage(p)),F=yield qe(u.generateContentStreamInternal(L)),C=[],E=[];try{for(var v=!0,A=(b=void 0,Hu(F)),N;N=yield qe(A.next()),S=N.done,!S;v=!0){T=N.value,v=!1;const w=T;if(yield yield qe(w),w.candidates&&(!((m=w.candidates[0])===null||m===void 0)&&m.content)){E.push(w.candidates[0].content);for(const x of(_=w.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<s&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(x.functionCall.name)){const M=yield qe(f.get(x.functionCall.name).callTool([x.functionCall]));C.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(w){b={error:w}}finally{try{!v&&!S&&(P=A.return)&&(yield qe(P.call(A)))}finally{if(b)throw b.error}}if(C.length>0){o=!0;const w=new uu;w.candidates=[{content:{role:"user",parts:C}}],yield yield qe(w);const x=[];x.push(...E),x.push({role:"user",parts:C});const M=ti(p.contents).concat(x);p.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=CS(this.apiClient,e);return a=X("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=bS(f),m=new uu;return Object.assign(m,p),m})}else{const u=wS(this.apiClient,e);return a=X("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=RS(f),m=new uu;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=CS(this.apiClient,e);return a=X("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return Pa(this,arguments,function*(){var m,_,S,b;try{for(var P=!0,T=Hu(p),v;v=yield qe(T.next()),m=v.done,!m;P=!0){b=v.value,P=!1;const A=b,N=bS(yield qe(A.json()));N.sdkHttpResponse={headers:A.headers};const L=new uu;Object.assign(L,N),yield yield qe(L)}}catch(A){_={error:A}}finally{try{!P&&!m&&(S=T.return)&&(yield qe(S.call(T)))}finally{if(_)throw _.error}}})})}else{const u=wS(this.apiClient,e);return a=X("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Pa(this,arguments,function*(){var m,_,S,b;try{for(var P=!0,T=Hu(p),v;v=yield qe(T.next()),m=v.done,!m;P=!0){b=v.value,P=!1;const A=b,N=RS(yield qe(A.json()));N.sdkHttpResponse={headers:A.headers};const L=new uu;Object.assign(L,N),yield yield qe(L)}}catch(A){_={error:A}}finally{try{!P&&!m&&(S=T.return)&&(yield qe(S.call(T)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=oO(this.apiClient,e);return a=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=lO(f),m=new uS;return Object.assign(m,p),m})}else{const u=sO(this.apiClient,e);return a=X("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=aO(f),m=new uS;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=_O(this.apiClient,e);return a=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=vO(f),m=new cS;return Object.assign(m,p),m})}else{const u=gO(this.apiClient,e);return a=X("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=yO(f),m=new cS;return Object.assign(m,p),m})}}async editImageInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=tO(this.apiClient,e);return s=X("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>{const u=nO(l),f=new E2;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=pF(this.apiClient,e);return s=X("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>{const u=mF(l),f=new I2;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=WO(this.apiClient,e);return s=X("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=XO(l),f=new S2;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=iF(this.apiClient,e);return s=X("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r.then(l=>{const u=rF(l),f=new A2;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=UO(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>A_(f))}else{const u=VO(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>S_(f))}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=zO(this.apiClient,e);return a=X("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=KO(f),m=new dS;return Object.assign(m,p),m})}else{const u=GO(this.apiClient,e);return a=X("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=HO(f),m=new dS;return Object.assign(m,p),m})}}async update(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=fF(this.apiClient,e);return a=X("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>A_(f))}else{const u=dF(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>S_(f))}}async delete(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=XL(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=jL(f),m=new fS;return Object.assign(m,p),m})}else{const u=WL(this.apiClient,e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=ZL(f),m=new fS;return Object.assign(m,p),m})}}async countTokens(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=YL(this.apiClient,e);return a=X("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=QL(f),m=new hS;return Object.assign(m,p),m})}else{const u=$L(this.apiClient,e);return a=X("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=JL(f),m=new hS;return Object.assign(m,p),m})}}async computeTokens(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=FL(this.apiClient,e);return s=X("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>{const u=qL(l),f=new w2;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=wO(this.apiClient,e);return a=X("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=SO(f),m=new yh;return Object.assign(m,p),m})}else{const u=AO(this.apiClient,e);return a=X("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=IO(f),m=new yh;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QF extends Vo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=y2(e);return a=X("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o}else{const u=_2(e);return a=X("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o}}async fetchPredictVideosOperationInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=c2(e);return s=X("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WF(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function XF(t){const e={},n=c(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>sq(s))),h(e,["parts"],r)}const i=c(t,["role"]);return i!=null&&h(e,["role"],i),e}function ZF(t,e,n){const i={},r=c(e,["expireTime"]);n!==void 0&&r!=null&&h(n,["expireTime"],r);const s=c(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&h(n,["newSessionExpireTime"],s);const o=c(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&h(n,["bidiGenerateContentSetup"],rq(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&h(n,["fieldMask"],l),i}function jF(t,e){const n={},i=c(e,["config"]);return i!=null&&h(n,["config"],ZF(t,i,n)),n}function eq(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function tq(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function nq(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function iq(t,e){const n={},i=c(t,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const r=c(t,["responseModalities"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","responseModalities"],r);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],mv(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],_);const S=c(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],XF(Wt(S)));const b=c(t,["tools"]);if(e!==void 0&&b!=null){let F=Al(b);Array.isArray(F)&&(F=F.map(C=>aq(Sl(C)))),h(e,["setup","tools"],F)}const P=c(t,["sessionResumption"]);e!==void 0&&P!=null&&h(e,["setup","sessionResumption"],oq(P));const T=c(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","inputAudioTranscription"],T);const v=c(t,["outputAudioTranscription"]);e!==void 0&&v!=null&&h(e,["setup","outputAudioTranscription"],v);const A=c(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&h(e,["setup","realtimeInputConfig"],A);const N=c(t,["contextWindowCompression"]);e!==void 0&&N!=null&&h(e,["setup","contextWindowCompression"],N);const L=c(t,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L),n}function rq(t,e){const n={},i=c(e,["model"]);i!=null&&h(n,["setup","model"],Ee(t,i));const r=c(e,["config"]);return r!=null&&h(n,["config"],iq(r,n)),n}function sq(t){const e={},n=c(t,["functionCall"]);n!=null&&h(e,["functionCall"],n);const i=c(t,["codeExecutionResult"]);i!=null&&h(e,["codeExecutionResult"],i);const r=c(t,["executableCode"]);r!=null&&h(e,["executableCode"],r);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],eq(s));const o=c(t,["functionResponse"]);o!=null&&h(e,["functionResponse"],o);const a=c(t,["inlineData"]);a!=null&&h(e,["inlineData"],WF(a));const l=c(t,["text"]);l!=null&&h(e,["text"],l);const u=c(t,["thought"]);u!=null&&h(e,["thought"],u);const f=c(t,["thoughtSignature"]);f!=null&&h(e,["thoughtSignature"],f);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function oq(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function aq(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["functionDeclarations"],u)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const r=c(t,["googleMaps"]);r!=null&&h(e,["googleMaps"],tq(r));const s=c(t,["computerUse"]);s!=null&&h(e,["computerUse"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleSearch"]);a!=null&&h(e,["googleSearch"],nq(a));const l=c(t,["urlContext"]);return l!=null&&h(e,["urlContext"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lq(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${n}.${s}`);e.push(...r)}else e.push(n)}return e.join(",")}function uq(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const s=lq(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class cq extends Vo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=jF(this.apiClient,e);s=X("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=uq(a,e.config);return r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dq(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function fq(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function hq(t,e,n){const i={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&h(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=c(t,["epochCount"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","epochCount"],s);const o=c(t,["learningRateMultiplier"]);if(o!=null&&h(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(t,["batchSize"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","batchSize"],a);const l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function pq(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const _=c(t,["validationDataset"]);e!==void 0&&_!=null&&h(e,["supervisedTuningSpec"],kS(_))}else if(r==="PREFERENCE_TUNING"){const _=c(t,["validationDataset"]);e!==void 0&&_!=null&&h(e,["preferenceOptimizationSpec"],kS(_))}const s=c(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&h(e,["tunedModelDisplayName"],s);const o=c(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const _=c(t,["epochCount"]);e!==void 0&&_!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(a==="PREFERENCE_TUNING"){const _=c(t,["epochCount"]);e!==void 0&&_!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const _=c(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(l==="PREFERENCE_TUNING"){const _=c(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=c(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(u==="PREFERENCE_TUNING"){const _=c(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const _=c(t,["adapterSize"]);e!==void 0&&_!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(f==="PREFERENCE_TUNING"){const _=c(t,["adapterSize"]);e!==void 0&&_!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=c(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const m=c(t,["beta"]);return e!==void 0&&m!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function mq(t,e){const n={},i=c(t,["baseModel"]);i!=null&&h(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const s=c(t,["trainingDataset"]);s!=null&&Cq(s);const o=c(t,["config"]);return o!=null&&hq(o,n),n}function gq(t,e){const n={},i=c(t,["baseModel"]);i!=null&&h(n,["baseModel"],i);const r=c(t,["preTunedModel"]);r!=null&&h(n,["preTunedModel"],r);const s=c(t,["trainingDataset"]);s!=null&&Rq(s,n,e);const o=c(t,["config"]);return o!=null&&pq(o,n,e),n}function _q(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function yq(t,e){const n={},i=c(t,["name"]);return i!=null&&h(n,["_url","name"],i),n}function vq(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const o=c(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),i}function Tq(t,e,n){const i={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const o=c(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),i}function Eq(t,e){const n={},i=c(t,["config"]);return i!=null&&vq(i,n),n}function Iq(t,e){const n={},i=c(t,["config"]);return i!=null&&Tq(i,n),n}function Sq(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const s=c(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>yx(a))),h(n,["tuningJobs"],o)}return n}function Aq(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["nextPageToken"]);r!=null&&h(n,["nextPageToken"],r);const s=c(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>C_(a))),h(n,["tuningJobs"],o)}return n}function wq(t,e){const n={},i=c(t,["name"]);i!=null&&h(n,["model"],i);const r=c(t,["name"]);return r!=null&&h(n,["endpoint"],r),n}function Cq(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=c(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),h(n,["examples","examples"],r)}return n}function Rq(t,e,n){const i={};let r=c(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(r==="PREFERENCE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function yx(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&h(n,["name"],r);const s=c(t,["state"]);s!=null&&h(n,["state"],jb(s));const o=c(t,["createTime"]);o!=null&&h(n,["createTime"],o);const a=c(t,["tuningTask","startTime"]);a!=null&&h(n,["startTime"],a);const l=c(t,["tuningTask","completeTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const f=c(t,["description"]);f!=null&&h(n,["description"],f);const p=c(t,["baseModel"]);p!=null&&h(n,["baseModel"],p);const m=c(t,["_self"]);return m!=null&&h(n,["tunedModel"],wq(m)),n}function C_(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&h(n,["name"],r);const s=c(t,["state"]);s!=null&&h(n,["state"],jb(s));const o=c(t,["createTime"]);o!=null&&h(n,["createTime"],o);const a=c(t,["startTime"]);a!=null&&h(n,["startTime"],a);const l=c(t,["endTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const f=c(t,["error"]);f!=null&&h(n,["error"],f);const p=c(t,["description"]);p!=null&&h(n,["description"],p);const m=c(t,["baseModel"]);m!=null&&h(n,["baseModel"],m);const _=c(t,["tunedModel"]);_!=null&&h(n,["tunedModel"],_);const S=c(t,["preTunedModel"]);S!=null&&h(n,["preTunedModel"],S);const b=c(t,["supervisedTuningSpec"]);b!=null&&h(n,["supervisedTuningSpec"],b);const P=c(t,["preferenceOptimizationSpec"]);P!=null&&h(n,["preferenceOptimizationSpec"],P);const T=c(t,["tuningDataStats"]);T!=null&&h(n,["tuningDataStats"],T);const v=c(t,["encryptionSpec"]);v!=null&&h(n,["encryptionSpec"],v);const A=c(t,["partnerModelTuningSpec"]);A!=null&&h(n,["partnerModelTuningSpec"],A);const N=c(t,["customBaseModel"]);N!=null&&h(n,["customBaseModel"],N);const L=c(t,["experiment"]);L!=null&&h(n,["experiment"],L);const F=c(t,["labels"]);F!=null&&h(n,["labels"],F);const C=c(t,["outputUri"]);C!=null&&h(n,["outputUri"],C);const E=c(t,["pipelineJob"]);E!=null&&h(n,["pipelineJob"],E);const w=c(t,["serviceAccount"]);w!=null&&h(n,["serviceAccount"],w);const x=c(t,["tunedModelDisplayName"]);x!=null&&h(n,["tunedModelDisplayName"],x);const M=c(t,["veoTuningSpec"]);return M!=null&&h(n,["veoTuningSpec"],M),n}function bq(t,e){const n={},i=c(t,["sdkHttpResponse"]);i!=null&&h(n,["sdkHttpResponse"],i);const r=c(t,["name"]);r!=null&&h(n,["name"],r);const s=c(t,["metadata"]);s!=null&&h(n,["metadata"],s);const o=c(t,["done"]);o!=null&&h(n,["done"],o);const a=c(t,["error"]);return a!=null&&h(n,["error"],a),n}function kS(t,e){const n={},i=c(t,["gcsUri"]);i!=null&&h(n,["validationDatasetUri"],i);const r=c(t,["vertexDatasetResource"]);return r!=null&&h(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xq extends Vo{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Xc(go.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:r});return s.baseModel=void 0,await this.tuneInternal(s)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),s=await this.tuneMldevInternal(r);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:v_.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=yq(e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>C_(f))}else{const u=_q(e);return a=X("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>yx(f))}}async listInternal(e){var n,i,r,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Iq(e);return a=X("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=Aq(f),m=new pS;return Object.assign(m,p),m})}else{const u=Eq(e);return a=X("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=Sq(f),m=new pS;return Object.assign(m,p),m})}}async cancel(e){var n,i,r,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=fq(e);o=X("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=dq(e);o=X("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=gq(e,e);return s=X("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>C_(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mq(e);return s=X("tunedModels",a._url),o=a._query,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),r.then(l=>bq(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nq{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Dq=1024*1024*8,Pq=3,Mq=1e3,kq=2,Zm="x-goog-upload-status";async function Vq(t,e,n){var i,r,s;let o=0,a=0,l=new T_(new Response),u="upload";for(o=t.size;a<o;){const p=Math.min(Dq,o-a),m=t.slice(a,a+p);a+p>=o&&(u+=", finalize");let _=0,S=Mq;for(;_<Pq&&(l=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[Zm]));)_++,await Lq(S),S=S*kq;if(a+=p,((r=l==null?void 0:l.headers)===null||r===void 0?void 0:r[Zm])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Zm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function Uq(t){return{size:t.size,type:t.type}}function Lq(t){return new Promise(e=>setTimeout(e,t))}class Oq{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Vq(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Uq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fq{create(e,n,i){return new qq(e,n,i)}}class qq{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VS="x-goog-api-key";class Bq{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(VS)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(VS,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gq="gl-node/";class zq{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=l2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new Bq(this.apiKey);this.apiClient=new bF({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Gq+"web",uploader:new Oq,downloader:new Nq}),this.models=new JF(this.apiClient),this.live=new BF(this.apiClient,r,new Fq),this.batches=new RU(this.apiClient),this.chats=new sL(this.models,this.apiClient),this.caches=new nL(this.apiClient),this.files=new mL(this.apiClient),this.operations=new QF(this.apiClient),this.authTokens=new cq(this.apiClient),this.tunings=new xq(this.apiClient)}}var US={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Hq=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Tx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,f=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(m=64)),i.push(n[f],n[p],n[m],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Hq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||p==null)throw new Kq;const m=s<<2|a>>4;if(i.push(m),u!==64){const _=a<<4&240|u>>2;if(i.push(_),p!==64){const S=u<<6&192|p;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Kq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $q=function(t){const e=vx(t);return Tx.encodeByteArray(e,!0)},Th=function(t){return $q(t).replace(/\./g,"")},Ex=function(t){try{return Tx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Eh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Yq(n)||(t[n]=Eh(t[n],e[n]));return t}function Yq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=()=>Ix().__FIREBASE_DEFAULTS__,Qq=()=>{if(typeof process>"u"||typeof US>"u")return;const t=US.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ex(t[1]);return e&&JSON.parse(e)},_v=()=>{try{return Jq()||Qq()||Wq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sx=()=>{var t;return(t=_v())===null||t===void 0?void 0:t.config},Xq=t=>{var e;return(e=_v())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Th(JSON.stringify(n)),Th(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function yv(){var t;const e=(t=_v())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eB(){return typeof window<"u"||wx()}function wx(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Cx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rx(){const t=je();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bx(){return!yv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mc(){try{return typeof indexedDB=="object"}catch{return!1}}function nB(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iB="FirebaseError";class Zt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=iB,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uo.prototype.create)}}class Uo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?rB(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zt(r,a,i)}}function rB(t,e){return t.replace(sB,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const sB=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function oB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(OS(s)&&OS(o)){if(!gc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function OS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Sa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Au(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xx(t,e){const n=new aB(t,e);return n.subscribe.bind(n)}class aB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");lB(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jm),r.error===void 0&&(r.error=jm),r.complete===void 0&&(r.complete=jm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t){return t&&t._delegate?t._delegate:t}class ri{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zq;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dB(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cB(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cB(t){return t===Ks?void 0:t}function dB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=[];var fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fe||(fe={}));const Dx={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},fB=fe.INFO,hB={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},pB=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=hB[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=fB,this._logHandler=pB,this._userLogHandler=null,Tv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}function mB(t){Tv.forEach(e=>{e.setLogLevel(t)})}function gB(t,e){for(const n of Tv){let i=null;e&&e.level&&(i=Dx[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:fe[s].toLowerCase(),message:a,args:o,type:r.name})}}}const _B=(t,e)=>e.some(n=>t instanceof n);let FS,qS;function yB(){return FS||(FS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vB(){return qS||(qS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Px=new WeakMap,R_=new WeakMap,Mx=new WeakMap,eg=new WeakMap,Ev=new WeakMap;function TB(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(us(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Px.set(n,t)}).catch(()=>{}),Ev.set(e,t),e}function EB(t){if(R_.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});R_.set(t,e)}let b_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return R_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IB(t){b_=t(b_)}function SB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(tg(this),e,...n);return Mx.set(i,e.sort?e.sort():[e]),us(i)}:vB().includes(t)?function(...e){return t.apply(tg(this),e),us(Px.get(this))}:function(...e){return us(t.apply(tg(this),e))}}function AB(t){return typeof t=="function"?SB(t):(t instanceof IDBTransaction&&EB(t),_B(t,yB())?new Proxy(t,b_):t)}function us(t){if(t instanceof IDBRequest)return TB(t);if(eg.has(t))return eg.get(t);const e=AB(t);return e!==t&&(eg.set(t,e),Ev.set(e,t)),e}const tg=t=>Ev.get(t);function wB(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=us(o);return i&&o.addEventListener("upgradeneeded",l=>{i(us(o.result),l.oldVersion,l.newVersion,us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const CB=["get","getKey","getAll","getAllKeys","count"],RB=["put","add","delete","clear"],ng=new Map;function BS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=RB.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CB.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return ng.set(e,s),s}IB(t=>({...t,get:(e,n,i)=>BS(e,n)||t.get(e,n,i),has:(e,n)=>!!BS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xB(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function xB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ih="@firebase/app",x_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new fp("@firebase/app"),NB="@firebase/app-compat",DB="@firebase/analytics-compat",PB="@firebase/analytics",MB="@firebase/app-check-compat",kB="@firebase/app-check",VB="@firebase/auth",UB="@firebase/auth-compat",LB="@firebase/database",OB="@firebase/data-connect",FB="@firebase/database-compat",qB="@firebase/functions",BB="@firebase/functions-compat",GB="@firebase/installations",zB="@firebase/installations-compat",HB="@firebase/messaging",KB="@firebase/messaging-compat",$B="@firebase/performance",YB="@firebase/performance-compat",JB="@firebase/remote-config",QB="@firebase/remote-config-compat",WB="@firebase/storage",XB="@firebase/storage-compat",ZB="@firebase/firestore",jB="@firebase/vertexai-preview",e4="@firebase/firestore-compat",t4="firebase",n4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]",i4={[Ih]:"fire-core",[NB]:"fire-core-compat",[PB]:"fire-analytics",[DB]:"fire-analytics-compat",[kB]:"fire-app-check",[MB]:"fire-app-check-compat",[VB]:"fire-auth",[UB]:"fire-auth-compat",[LB]:"fire-rtdb",[OB]:"fire-data-connect",[FB]:"fire-rtdb-compat",[qB]:"fire-fn",[BB]:"fire-fn-compat",[GB]:"fire-iid",[zB]:"fire-iid-compat",[HB]:"fire-fcm",[KB]:"fire-fcm-compat",[$B]:"fire-perf",[YB]:"fire-perf-compat",[JB]:"fire-rc",[QB]:"fire-rc-compat",[WB]:"fire-gcs",[XB]:"fire-gcs-compat",[ZB]:"fire-fst",[e4]:"fire-fst-compat",[jB]:"fire-vertex","fire-js":"fire-js",[t4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new Map,Za=new Map,ja=new Map;function _c(t,e){try{t.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kx(t,e){t.container.addOrOverwriteComponent(e)}function pr(t){const e=t.name;if(ja.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;ja.set(e,t);for(const n of gs.values())_c(n,t);for(const n of Za.values())_c(n,t);return!0}function Vx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function r4(t,e,n=ms){Vx(t,e).clearInstance(n)}function Ux(t){return t.options!==void 0}function st(t){return t.settings!==void 0}function s4(){ja.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new Uo("app","Firebase",o4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lx=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4 extends Lx{constructor(e,n,i,r){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,r);else{const a=e;super(a.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,On(Ih,x_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Sv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ni.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=n4;function Iv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ms,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ni.create("bad-app-name",{appName:String(r)});if(n||(n=Sx()),!n)throw ni.create("no-options");const s=gs.get(r);if(s){if(gc(n,s.options)&&gc(i,s.config))return s;throw ni.create("duplicate-app",{appName:r})}const o=new Nx(r);for(const l of ja.values())o.addComponent(l);const a=new Lx(n,i,o);return gs.set(r,a),a}function l4(t,e){if(eB()&&!wx())throw ni.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;Ux(t)?n=t.options:n=t;const i=Object.assign(Object.assign({},e),n);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const r=u=>[...u].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ni.create("finalization-registry-not-supported",{});const s=""+r(JSON.stringify(i)),o=Za.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Nx(s);for(const u of ja.values())a.addComponent(u);const l=new a4(n,e,s,a);return Za.set(s,l),l}function u4(t=ms){const e=gs.get(t);if(!e&&t===ms&&Sx())return Iv();if(!e)throw ni.create("no-app",{appName:t});return e}function c4(){return Array.from(gs.values())}async function Sv(t){let e=!1;const n=t.name;gs.has(n)?(e=!0,gs.delete(n)):Za.has(n)&&t.decRefCount()<=0&&(Za.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function On(t,e,n){var i;let r=(i=i4[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(a.join(" "));return}pr(new ri(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Ox(t,e){if(t!==null&&typeof t!="function")throw ni.create("invalid-log-argument");gB(t,e)}function Fx(t){mB(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="firebase-heartbeat-database",f4=1,yc="firebase-heartbeat-store";let ig=null;function qx(){return ig||(ig=wB(d4,f4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ni.create("idb-open",{originalErrorMessage:t.message})})),ig}async function h4(t){try{const n=(await qx()).transaction(yc),i=await n.objectStore(yc).get(Bx(t));return await n.done,i}catch(e){if(e instanceof Zt)hr.warn(e.message);else{const n=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(n.message)}}}async function GS(t,e){try{const i=(await qx()).transaction(yc,"readwrite");await i.objectStore(yc).put(e,Bx(t)),await i.done}catch(n){if(n instanceof Zt)hr.warn(n.message);else{const i=ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hr.warn(i.message)}}}function Bx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=1024,m4=30*24*60*60*1e3;class g4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=m4}),this._storage.overwrite(this._heartbeatsCache))}catch(i){hr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zS(),{heartbeatsToSend:i,unsentEntries:r}=_4(this._heartbeatsCache.heartbeats),s=Th(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return hr.warn(n),""}}}function zS(){return new Date().toISOString().substring(0,10)}function _4(t,e=p4){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),HS(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),HS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class y4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mc()?nB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return GS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return GS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function HS(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){pr(new ri("platform-logger",e=>new bB(e),"PRIVATE")),pr(new ri("heartbeat",e=>new g4(e),"PRIVATE")),On(Ih,x_,t),On(Ih,x_,"esm2017"),On("fire-js","")}v4("");const T4=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Zt,SDK_VERSION:Tr,_DEFAULT_ENTRY_NAME:ms,_addComponent:_c,_addOrOverwriteComponent:kx,_apps:gs,_clearComponents:s4,_components:ja,_getProvider:Vx,_isFirebaseApp:Ux,_isFirebaseServerApp:st,_registerComponent:pr,_removeServiceInstance:r4,_serverApps:Za,deleteApp:Sv,getApp:u4,getApps:c4,initializeApp:Iv,initializeServerApp:l4,onLog:Ox,registerVersion:On,setLogLevel:Fx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,n){this._delegate=e,this.firebase=n,_c(e,new ri("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Sv(this._delegate)))}_getService(e,n=ms){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=ms){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){_c(this._delegate,e)}_addOrOverwriteComponent(e){kx(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},KS=new Uo("app-compat","Firebase",I4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){const e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:On,setLogLevel:Fx,onLog:Ox,apps:null,SDK_VERSION:Tr,INTERNAL:{registerComponent:a,removeApp:i,useAsService:l,modularAPIs:T4}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(u){delete e[u]}function r(u){if(u=u||ms,!LS(e,u))throw KS.create("no-app",{appName:u});return e[u]}r.App=t;function s(u,f={}){const p=Iv(u,f);if(LS(e,p.name))return e[p.name];const m=new t(p,n);return e[p.name]=m,m}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const f=u.name,p=f.replace("-compat","");if(pr(u)&&u.type==="PUBLIC"){const m=(_=r())=>{if(typeof _[p]!="function")throw KS.create("invalid-app-argument",{appName:f});return _[p]()};u.serviceProps!==void 0&&Eh(m,u.serviceProps),n[p]=m,t.prototype[p]=function(..._){return this._getService.bind(this,f).apply(this,u.multipleInstances?_:[])}}return u.type==="PUBLIC"?n[p]:null}function l(u,f){return f==="serverAuth"?null:f}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(){const t=S4(E4);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Gx,extendNamespace:e,createSubscribe:xx,ErrorFactory:Uo,deepExtend:Eh});function e(n){Eh(t,n)}return t}const A4=Gx();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=new fp("@firebase/app-compat"),w4="@firebase/app-compat",C4="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t){On(w4,C4,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Ix();if(t.firebase!==void 0){$S.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$S.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const pi=A4;R4();var b4="firebase",x4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi.registerVersion(b4,x4,"app-compat");var YS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,zx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function w(){}w.prototype=E.prototype,C.D=E.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(x,M,k){for(var D=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)D[Kt-2]=arguments[Kt];return E.prototype[M].apply(x,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,E,w){w||(w=0);var x=Array(16);if(typeof E=="string")for(var M=0;16>M;++M)x[M]=E.charCodeAt(w++)|E.charCodeAt(w++)<<8|E.charCodeAt(w++)<<16|E.charCodeAt(w++)<<24;else for(M=0;16>M;++M)x[M]=E[w++]|E[w++]<<8|E[w++]<<16|E[w++]<<24;E=C.g[0],w=C.g[1],M=C.g[2];var k=C.g[3],D=E+(k^w&(M^k))+x[0]+3614090360&4294967295;E=w+(D<<7&4294967295|D>>>25),D=k+(M^E&(w^M))+x[1]+3905402710&4294967295,k=E+(D<<12&4294967295|D>>>20),D=M+(w^k&(E^w))+x[2]+606105819&4294967295,M=k+(D<<17&4294967295|D>>>15),D=w+(E^M&(k^E))+x[3]+3250441966&4294967295,w=M+(D<<22&4294967295|D>>>10),D=E+(k^w&(M^k))+x[4]+4118548399&4294967295,E=w+(D<<7&4294967295|D>>>25),D=k+(M^E&(w^M))+x[5]+1200080426&4294967295,k=E+(D<<12&4294967295|D>>>20),D=M+(w^k&(E^w))+x[6]+2821735955&4294967295,M=k+(D<<17&4294967295|D>>>15),D=w+(E^M&(k^E))+x[7]+4249261313&4294967295,w=M+(D<<22&4294967295|D>>>10),D=E+(k^w&(M^k))+x[8]+1770035416&4294967295,E=w+(D<<7&4294967295|D>>>25),D=k+(M^E&(w^M))+x[9]+2336552879&4294967295,k=E+(D<<12&4294967295|D>>>20),D=M+(w^k&(E^w))+x[10]+4294925233&4294967295,M=k+(D<<17&4294967295|D>>>15),D=w+(E^M&(k^E))+x[11]+2304563134&4294967295,w=M+(D<<22&4294967295|D>>>10),D=E+(k^w&(M^k))+x[12]+1804603682&4294967295,E=w+(D<<7&4294967295|D>>>25),D=k+(M^E&(w^M))+x[13]+4254626195&4294967295,k=E+(D<<12&4294967295|D>>>20),D=M+(w^k&(E^w))+x[14]+2792965006&4294967295,M=k+(D<<17&4294967295|D>>>15),D=w+(E^M&(k^E))+x[15]+1236535329&4294967295,w=M+(D<<22&4294967295|D>>>10),D=E+(M^k&(w^M))+x[1]+4129170786&4294967295,E=w+(D<<5&4294967295|D>>>27),D=k+(w^M&(E^w))+x[6]+3225465664&4294967295,k=E+(D<<9&4294967295|D>>>23),D=M+(E^w&(k^E))+x[11]+643717713&4294967295,M=k+(D<<14&4294967295|D>>>18),D=w+(k^E&(M^k))+x[0]+3921069994&4294967295,w=M+(D<<20&4294967295|D>>>12),D=E+(M^k&(w^M))+x[5]+3593408605&4294967295,E=w+(D<<5&4294967295|D>>>27),D=k+(w^M&(E^w))+x[10]+38016083&4294967295,k=E+(D<<9&4294967295|D>>>23),D=M+(E^w&(k^E))+x[15]+3634488961&4294967295,M=k+(D<<14&4294967295|D>>>18),D=w+(k^E&(M^k))+x[4]+3889429448&4294967295,w=M+(D<<20&4294967295|D>>>12),D=E+(M^k&(w^M))+x[9]+568446438&4294967295,E=w+(D<<5&4294967295|D>>>27),D=k+(w^M&(E^w))+x[14]+3275163606&4294967295,k=E+(D<<9&4294967295|D>>>23),D=M+(E^w&(k^E))+x[3]+4107603335&4294967295,M=k+(D<<14&4294967295|D>>>18),D=w+(k^E&(M^k))+x[8]+1163531501&4294967295,w=M+(D<<20&4294967295|D>>>12),D=E+(M^k&(w^M))+x[13]+2850285829&4294967295,E=w+(D<<5&4294967295|D>>>27),D=k+(w^M&(E^w))+x[2]+4243563512&4294967295,k=E+(D<<9&4294967295|D>>>23),D=M+(E^w&(k^E))+x[7]+1735328473&4294967295,M=k+(D<<14&4294967295|D>>>18),D=w+(k^E&(M^k))+x[12]+2368359562&4294967295,w=M+(D<<20&4294967295|D>>>12),D=E+(w^M^k)+x[5]+4294588738&4294967295,E=w+(D<<4&4294967295|D>>>28),D=k+(E^w^M)+x[8]+2272392833&4294967295,k=E+(D<<11&4294967295|D>>>21),D=M+(k^E^w)+x[11]+1839030562&4294967295,M=k+(D<<16&4294967295|D>>>16),D=w+(M^k^E)+x[14]+4259657740&4294967295,w=M+(D<<23&4294967295|D>>>9),D=E+(w^M^k)+x[1]+2763975236&4294967295,E=w+(D<<4&4294967295|D>>>28),D=k+(E^w^M)+x[4]+1272893353&4294967295,k=E+(D<<11&4294967295|D>>>21),D=M+(k^E^w)+x[7]+4139469664&4294967295,M=k+(D<<16&4294967295|D>>>16),D=w+(M^k^E)+x[10]+3200236656&4294967295,w=M+(D<<23&4294967295|D>>>9),D=E+(w^M^k)+x[13]+681279174&4294967295,E=w+(D<<4&4294967295|D>>>28),D=k+(E^w^M)+x[0]+3936430074&4294967295,k=E+(D<<11&4294967295|D>>>21),D=M+(k^E^w)+x[3]+3572445317&4294967295,M=k+(D<<16&4294967295|D>>>16),D=w+(M^k^E)+x[6]+76029189&4294967295,w=M+(D<<23&4294967295|D>>>9),D=E+(w^M^k)+x[9]+3654602809&4294967295,E=w+(D<<4&4294967295|D>>>28),D=k+(E^w^M)+x[12]+3873151461&4294967295,k=E+(D<<11&4294967295|D>>>21),D=M+(k^E^w)+x[15]+530742520&4294967295,M=k+(D<<16&4294967295|D>>>16),D=w+(M^k^E)+x[2]+3299628645&4294967295,w=M+(D<<23&4294967295|D>>>9),D=E+(M^(w|~k))+x[0]+4096336452&4294967295,E=w+(D<<6&4294967295|D>>>26),D=k+(w^(E|~M))+x[7]+1126891415&4294967295,k=E+(D<<10&4294967295|D>>>22),D=M+(E^(k|~w))+x[14]+2878612391&4294967295,M=k+(D<<15&4294967295|D>>>17),D=w+(k^(M|~E))+x[5]+4237533241&4294967295,w=M+(D<<21&4294967295|D>>>11),D=E+(M^(w|~k))+x[12]+1700485571&4294967295,E=w+(D<<6&4294967295|D>>>26),D=k+(w^(E|~M))+x[3]+2399980690&4294967295,k=E+(D<<10&4294967295|D>>>22),D=M+(E^(k|~w))+x[10]+4293915773&4294967295,M=k+(D<<15&4294967295|D>>>17),D=w+(k^(M|~E))+x[1]+2240044497&4294967295,w=M+(D<<21&4294967295|D>>>11),D=E+(M^(w|~k))+x[8]+1873313359&4294967295,E=w+(D<<6&4294967295|D>>>26),D=k+(w^(E|~M))+x[15]+4264355552&4294967295,k=E+(D<<10&4294967295|D>>>22),D=M+(E^(k|~w))+x[6]+2734768916&4294967295,M=k+(D<<15&4294967295|D>>>17),D=w+(k^(M|~E))+x[13]+1309151649&4294967295,w=M+(D<<21&4294967295|D>>>11),D=E+(M^(w|~k))+x[4]+4149444226&4294967295,E=w+(D<<6&4294967295|D>>>26),D=k+(w^(E|~M))+x[11]+3174756917&4294967295,k=E+(D<<10&4294967295|D>>>22),D=M+(E^(k|~w))+x[2]+718787259&4294967295,M=k+(D<<15&4294967295|D>>>17),D=w+(k^(M|~E))+x[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+k&4294967295}i.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var w=E-this.blockSize,x=this.B,M=this.h,k=0;k<E;){if(M==0)for(;k<=w;)r(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<E;)if(x[M++]=C.charCodeAt(k++),M==this.blockSize){r(this,x),M=0;break}}else for(;k<E;)if(x[M++]=C[k++],M==this.blockSize){r(this,x),M=0;break}}this.h=M,this.o+=E},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var w=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=w&255,w/=256;for(this.u(C),C=Array(16),E=w=0;4>E;++E)for(var x=0;32>x;x+=8)C[w++]=this.g[E]>>>x&255;return C};function s(C,E){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=E(C)}function o(C,E){this.h=E;for(var w=[],x=!0,M=C.length-1;0<=M;M--){var k=C[M]|0;x&&k==E||(w[M]=k,x=!1)}this.g=w}var a={};function l(C){return-128<=C&&128>C?s(C,function(E){return new o([E|0],0>E?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return P(u(-C));for(var E=[],w=1,x=0;C>=w;x++)E[x]=C/w|0,w*=4294967296;return new o(E,0)}function f(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return P(f(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(E,8)),x=p,M=0;M<C.length;M+=8){var k=Math.min(8,C.length-M),D=parseInt(C.substring(M,M+k),E);8>k?(k=u(Math.pow(E,k)),x=x.j(k).add(u(D))):(x=x.j(w),x=x.add(u(D)))}return x}var p=l(0),m=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-P(this).m();for(var C=0,E=1,w=0;w<this.g.length;w++){var x=this.i(w);C+=(0<=x?x:4294967296+x)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(b(this))return"-"+P(this).toString(C);for(var E=u(Math.pow(C,6)),w=this,x="";;){var M=N(w,E).g;w=T(w,M.j(E));var k=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=M,S(w))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function b(C){return C.h==-1}t.l=function(C){return C=T(this,C),b(C)?-1:S(C)?0:1};function P(C){for(var E=C.g.length,w=[],x=0;x<E;x++)w[x]=~C.g[x];return new o(w,~C.h).add(m)}t.abs=function(){return b(this)?P(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],x=0,M=0;M<=E;M++){var k=x+(this.i(M)&65535)+(C.i(M)&65535),D=(k>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);x=D>>>16,k&=65535,D&=65535,w[M]=D<<16|k}return new o(w,w[w.length-1]&-2147483648?-1:0)};function T(C,E){return C.add(P(E))}t.j=function(C){if(S(this)||S(C))return p;if(b(this))return b(C)?P(this).j(P(C)):P(P(this).j(C));if(b(C))return P(this.j(P(C)));if(0>this.l(_)&&0>C.l(_))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,w=[],x=0;x<2*E;x++)w[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<C.g.length;M++){var k=this.i(x)>>>16,D=this.i(x)&65535,Kt=C.i(M)>>>16,Ct=C.i(M)&65535;w[2*x+2*M]+=D*Ct,v(w,2*x+2*M),w[2*x+2*M+1]+=k*Ct,v(w,2*x+2*M+1),w[2*x+2*M+1]+=D*Kt,v(w,2*x+2*M+1),w[2*x+2*M+2]+=k*Kt,v(w,2*x+2*M+2)}for(x=0;x<E;x++)w[x]=w[2*x+1]<<16|w[2*x];for(x=E;x<2*E;x++)w[x]=0;return new o(w,0)};function v(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function A(C,E){this.g=C,this.h=E}function N(C,E){if(S(E))throw Error("division by zero");if(S(C))return new A(p,p);if(b(C))return E=N(P(C),E),new A(P(E.g),P(E.h));if(b(E))return E=N(C,P(E)),new A(P(E.g),E.h);if(30<C.g.length){if(b(C)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var w=m,x=E;0>=x.l(C);)w=L(w),x=L(x);var M=F(w,1),k=F(x,1);for(x=F(x,2),w=F(w,2);!S(x);){var D=k.add(x);0>=D.l(C)&&(M=M.add(w),k=D),x=F(x,1),w=F(w,1)}return E=T(C,M.j(E)),new A(M,E)}for(M=p;0<=C.l(E);){for(w=Math.max(1,Math.floor(C.m()/E.m())),x=Math.ceil(Math.log(w)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=u(w),D=k.j(E);b(D)||0<D.l(C);)w-=x,k=u(w),D=k.j(E);S(k)&&(k=m),M=M.add(k),C=T(C,D)}return new A(M,C)}t.A=function(C){return N(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],x=0;x<E;x++)w[x]=this.i(x)&C.i(x);return new o(w,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],x=0;x<E;x++)w[x]=this.i(x)|C.i(x);return new o(w,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),w=[],x=0;x<E;x++)w[x]=this.i(x)^C.i(x);return new o(w,this.h^C.h)};function L(C){for(var E=C.g.length+1,w=[],x=0;x<E;x++)w[x]=C.i(x)<<1|C.i(x-1)>>>31;return new o(w,C.h)}function F(C,E){var w=E>>5;E%=32;for(var x=C.g.length-w,M=[],k=0;k<x;k++)M[k]=0<E?C.i(k+w)>>>E|C.i(k+w+1)<<32-E:C.i(k+w);return new o(M,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,zx=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,oo=o}).apply(typeof YS<"u"?YS:typeof self<"u"?self:typeof window<"u"?window:{});var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hx,wu,Kx,xf,N_,$x,Yx,Jx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ef=="object"&&ef];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var V=d[I];if(!(V in y))break e;y=y[V]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var y=0,I=!1,V={next:function(){if(!I&&y<d.length){var q=y++;return{value:g(q,d[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(d){return d||function(){return s(this,function(g,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function f(d,g,y){return d.call.apply(d.bind,arguments)}function p(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),d.apply(g,V)}}return function(){return d.apply(g,arguments)}}function m(d,g,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function _(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function S(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,V,q){for(var $=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)$[Pe-2]=arguments[Pe];return g.prototype[V].apply(I,$)}}function b(d){const g=d.length;if(0<g){const y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function P(d,g){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(l(I)){const V=d.length||0,q=I.length||0;d.length=V+q;for(let $=0;$<q;$++)d[V+$]=I[$]}else d.push(I)}}class T{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function v(d){return/^[\s\xa0]*$/.test(d)}function A(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function N(d){return N[" "](d),d}N[" "]=function(){};var L=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function F(d,g,y){for(const I in d)g.call(y,d[I],I,d)}function C(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function E(d){const g={};for(const y in d)g[y]=d[y];return g}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,g){let y,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(y in I)d[y]=I[y];for(let q=0;q<w.length;q++)y=w[q],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function M(d){var g=1;d=d.split(":");const y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function k(d){a.setTimeout(()=>{throw d},0)}function D(){var d=De;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Kt{constructor(){this.h=this.g=null}add(g,y){const I=Ct.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Ct=new T(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,re=!1,De=new Kt,ke=()=>{const d=a.Promise.resolve(void 0);ie=()=>{d.then(Rr)}};var Rr=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(y){k(y)}var g=Ct;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}re=!1};function Rt(){this.s=this.s,this.C=this.C}Rt.prototype.s=!1,Rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var Gn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};a.addEventListener("test",y,g),a.removeEventListener("test",y,g)}catch{}return d}();function hn(d,g){if(tt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(L){e:{try{N(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Wp[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&hn.aa.h.call(this)}}S(hn,tt);var Wp={2:"touch",3:"pen",4:"mouse"};hn.prototype.h=function(){hn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),Xp=0;function yd(d,g,y,I,V){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=V,this.key=++Xp,this.da=this.fa=!1}function zo(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function oi(d){this.src=d,this.g={},this.h=0}oi.prototype.add=function(d,g,y,I,V){var q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);var $=Oi(d,g,I,V);return-1<$?(g=d[$],y||(g.fa=!1)):(g=new yd(g,this.src,q,!!I,V),g.fa=y,d.push(g)),g};function mi(d,g){var y=g.type;if(y in d.g){var I=d.g[y],V=Array.prototype.indexOf.call(I,g,void 0),q;(q=0<=V)&&Array.prototype.splice.call(I,V,1),q&&(zo(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Oi(d,g,y,I){for(var V=0;V<d.length;++V){var q=d[V];if(!q.da&&q.listener==g&&q.capture==!!y&&q.ha==I)return V}return-1}var ks="closure_lm_"+(1e6*Math.random()|0),Fl={};function vd(d,g,y,I,V){if(Array.isArray(g)){for(var q=0;q<g.length;q++)vd(d,g[q],y,I,V);return null}return y=ne(y),d&&d[mt]?d.K(g,y,u(I)?!!I.capture:!1,V):Zp(d,g,y,!1,I,V)}function Zp(d,g,y,I,V,q){if(!g)throw Error("Invalid event type");var $=u(V)?!!V.capture:!!V,Pe=Bl(d);if(Pe||(d[ks]=Pe=new oi(d)),y=Pe.add(g,y,I,$,q),y.proxy)return y;if(I=jp(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)Gn||(V=$),V===void 0&&(V=!1),d.addEventListener(g.toString(),I,V);else if(d.attachEvent)d.attachEvent(Ed(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function jp(){function d(y){return g.call(d.src,d.listener,y)}const g=Id;return d}function Td(d,g,y,I,V){if(Array.isArray(g))for(var q=0;q<g.length;q++)Td(d,g[q],y,I,V);else I=u(I)?!!I.capture:!!I,y=ne(y),d&&d[mt]?(d=d.i,g=String(g).toString(),g in d.g&&(q=d.g[g],y=Oi(q,y,I,V),-1<y&&(zo(q[y]),Array.prototype.splice.call(q,y,1),q.length==0&&(delete d.g[g],d.h--)))):d&&(d=Bl(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Oi(g,y,I,V)),(y=-1<d?g[d]:null)&&ql(y))}function ql(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[mt])mi(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(Ed(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=Bl(g))?(mi(y,d),y.h==0&&(y.src=null,g[ks]=null)):zo(d)}}}function Ed(d){return d in Fl?Fl[d]:Fl[d]="on"+d}function Id(d,g){if(d.da)d=!0;else{g=new hn(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&ql(d),d=y.call(I,g)}return d}function Bl(d){return d=d[ks],d instanceof oi?d:null}var Gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ne(d){return typeof d=="function"?d:(d[Gl]||(d[Gl]=function(g){return d.handleEvent(g)}),d[Gl])}function j(){Rt.call(this),this.i=new oi(this),this.M=this,this.F=null}S(j,Rt),j.prototype[mt]=!0,j.prototype.removeEventListener=function(d,g,y,I){Td(this,d,g,y,I)};function le(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new tt(g,d);else if(g instanceof tt)g.target=g.target||d;else{var V=g;g=new tt(I,d),x(g,V)}if(V=!0,y)for(var q=y.length-1;0<=q;q--){var $=g.g=y[q];V=Ve($,I,!0,g)&&V}if($=g.g=d,V=Ve($,I,!0,g)&&V,V=Ve($,I,!1,g)&&V,y)for(q=0;q<y.length;q++)$=g.g=y[q],V=Ve($,I,!1,g)&&V}j.prototype.N=function(){if(j.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)zo(y[I]);delete d.g[g],d.h--}}this.F=null},j.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},j.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function Ve(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,q=0;q<g.length;++q){var $=g[q];if($&&!$.da&&$.capture==y){var Pe=$.listener,Vt=$.ha||$.src;$.fa&&mi(d.i,$),V=Pe.call(Vt,I)!==!1&&V}}return V&&!I.defaultPrevented}function Xe(d,g,y){if(typeof d=="function")y&&(d=m(d,y));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function bt(d){d.g=Xe(()=>{d.g=null,d.i&&(d.i=!1,bt(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Cn extends Rt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(d){Rt.call(this),this.h=d,this.g={}}S(en,Rt);var br=[];function Vs(d){F(d.g,function(g,y){this.g.hasOwnProperty(y)&&ql(g)},d),d.g={}}en.prototype.N=function(){en.aa.N.call(this),Vs(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ai=a.JSON.stringify,em=a.JSON.parse,tE=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Sd(){}Sd.prototype.h=null;function tm(d){return d.h||(d.h=d.i())}function zl(){}var gi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hl(){tt.call(this,"d")}S(Hl,tt);function Kl(){tt.call(this,"c")}S(Kl,tt);var Re={},$t=null;function Fi(){return $t=$t||new j}Re.La="serverreachability";function zn(d){tt.call(this,Re.La,d)}S(zn,tt);function xr(d){const g=Fi();le(g,new zn(g))}Re.STAT_EVENT="statevent";function nm(d,g){tt.call(this,Re.STAT_EVENT,d),this.stat=g}S(nm,tt);function tn(d){const g=Fi();le(g,new nm(g,d))}Re.Ma="timingevent";function nE(d,g){tt.call(this,Re.Ma,d),this.size=g}S(nE,tt);function $l(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Yl(){this.g=!0}Yl.prototype.xa=function(){this.g=!1};function UM(d,g,y,I,V,q){d.info(function(){if(d.g)if(q)for(var $="",Pe=q.split("&"),Vt=0;Vt<Pe.length;Vt++){var ve=Pe[Vt].split("=");if(1<ve.length){var Yt=ve[0];ve=ve[1];var Jt=Yt.split("_");$=2<=Jt.length&&Jt[1]=="type"?$+(Yt+"="+ve+"&"):$+(Yt+"=redacted&")}}else $=null;else $=q;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+g+`
`+y+`
`+$})}function LM(d,g,y,I,V,q,$){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+g+`
`+y+`
`+q+" "+$})}function Ho(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+FM(d,y)+(I?" "+I:"")})}function OM(d,g){d.info(function(){return"TIMEOUT: "+g})}Yl.prototype.info=function(){};function FM(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var q=V[0];if(q!="noop"&&q!="stop"&&q!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return ai(y)}catch{return g}}var Ad={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},im;function wd(){}S(wd,Sd),wd.prototype.g=function(){return new XMLHttpRequest},wd.prototype.i=function(){return{}},im=new wd;function Nr(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new en(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rE}function rE(){this.i=null,this.g="",this.h=!1}var sE={},rm={};function sm(d,g,y){d.L=1,d.v=xd(qi(g)),d.m=y,d.P=!0,oE(d,null)}function oE(d,g){d.F=Date.now(),Cd(d),d.A=qi(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),TE(y.i,"t",I),d.C=0,y=d.j.J,d.h=new rE,d.g=OE(d.j,y?g:null,!d.m),0<d.O&&(d.M=new Cn(m(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(br[0]=V.toString()),V=br);for(var q=0;q<V.length;q++){var $=vd(y,V[q],I||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),xr(),UM(d.i,d.u,d.A,d.l,d.R,d.m)}Nr.prototype.ca=function(d){d=d.target;const g=this.M;g&&Bi(d)==3?g.j():this.Y(d)},Nr.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=Bi(this.g);var g=this.g.Ba();const Yo=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||RE(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=Yo?xr(3):xr(2)),om(this);var y=this.g.Z();this.X=y;t:if(aE(this)){var I=RE(this.g);d="";var V=I.length,q=Bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Us(this),Jl(this);var $="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(q&&g==V-1)});I.length=0,this.h.g+=d,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=y==200,LM(this.i,this.u,this.A,this.l,this.R,Jt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Vt=this.g;if((Pe=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Pe)){var ve=Pe;break t}}ve=null}if(y=ve)Ho(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,am(this,y);else{this.o=!1,this.s=3,tn(12),Us(this),Jl(this);break e}}if(this.P){y=!0;let li;for(;!this.J&&this.C<$.length;)if(li=qM(this,$),li==rm){Jt==4&&(this.s=4,tn(14),y=!1),Ho(this.i,this.l,null,"[Incomplete Response]");break}else if(li==sE){this.s=4,tn(15),Ho(this.i,this.l,$,"[Invalid Chunk]"),y=!1;break}else Ho(this.i,this.l,li,null),am(this,li);if(aE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||$.length!=0||this.h.h||(this.s=1,tn(16),y=!1),this.o=this.o&&y,!y)Ho(this.i,this.l,$,"[Invalid Chunked Response]"),Us(this),Jl(this);else if(0<$.length&&!this.W){this.W=!0;var Yt=this.j;Yt.g==this&&Yt.ba&&!Yt.M&&(Yt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),hm(Yt),Yt.M=!0,tn(11))}}else Ho(this.i,this.l,$,null),am(this,$);Jt==4&&Us(this),this.o&&!this.J&&(Jt==4?kE(this.j,this):(this.o=!1,Cd(this)))}else i1(this.g),y==400&&0<$.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),Us(this),Jl(this)}}}catch{}finally{}};function aE(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function qM(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?rm:(y=Number(g.substring(y,I)),isNaN(y)?sE:(I+=1,I+y>g.length?rm:(g=g.slice(I,I+y),d.C=I+y,g)))}Nr.prototype.cancel=function(){this.J=!0,Us(this)};function Cd(d){d.S=Date.now()+d.I,lE(d,d.I)}function lE(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=$l(m(d.ba,d),g)}function om(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Nr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(OM(this.i,this.A),this.L!=2&&(xr(),tn(17)),Us(this),this.s=2,Jl(this)):lE(this,this.S-d)};function Jl(d){d.j.G==0||d.J||kE(d.j,d)}function Us(d){om(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Vs(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function am(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||lm(y.h,d))){if(!d.K&&lm(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Vd(y),Md(y);else break e;fm(y),tn(18)}}else y.za=V[1],0<y.za-y.T&&37500>V[2]&&y.F&&y.v==0&&!y.C&&(y.C=$l(m(y.Za,y),6e3));if(1>=dE(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Os(y,11)}else if((d.K||y.g==d)&&Vd(y),!v(g))for(V=y.Da.g.parse(g),g=0;g<V.length;g++){let ve=V[g];if(y.T=ve[0],ve=ve[1],y.G==2)if(ve[0]=="c"){y.K=ve[1],y.ia=ve[2];const Yt=ve[3];Yt!=null&&(y.la=Yt,y.j.info("VER="+y.la));const Jt=ve[4];Jt!=null&&(y.Aa=Jt,y.j.info("SVER="+y.Aa));const Yo=ve[5];Yo!=null&&typeof Yo=="number"&&0<Yo&&(I=1.5*Yo,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const li=d.g;if(li){const Ld=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ld){var q=I.h;q.g||Ld.indexOf("spdy")==-1&&Ld.indexOf("quic")==-1&&Ld.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(um(q,q.h),q.h=null))}if(I.D){const pm=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;pm&&(I.ya=pm,Oe(I.I,I.D,pm))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var $=d;if(I.qa=LE(I,I.J?I.ia:null,I.W),$.K){fE(I.h,$);var Pe=$,Vt=I.L;Vt&&(Pe.I=Vt),Pe.B&&(om(Pe),Cd(Pe)),I.g=$}else PE(I);0<y.i.length&&kd(y)}else ve[0]!="stop"&&ve[0]!="close"||Os(y,7);else y.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?Os(y,7):dm(y):ve[0]!="noop"&&y.l&&y.l.ta(ve),y.v=0)}}xr(4)}catch{}}var BM=class{constructor(d,g){this.g=d,this.map=g}};function uE(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cE(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function dE(d){return d.h?1:d.g?d.g.size:0}function lm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function um(d,g){d.g?d.g.add(g):d.h=g}function fE(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}uE.prototype.cancel=function(){if(this.i=hE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function hE(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.D);return g}return b(d.i)}function GM(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function zM(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(const I in d)g[y++]=I;return g}}}function pE(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=zM(d),I=GM(d),V=I.length,q=0;q<V;q++)g.call(void 0,I[q],y&&y[q],d)}var mE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HM(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),V=null;if(0<=I){var q=d[y].substring(0,I);V=d[y].substring(I+1)}else q=d[y];g(q,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ls(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ls){this.h=d.h,Rd(this,d.j),this.o=d.o,this.g=d.g,bd(this,d.s),this.l=d.l;var g=d.i,y=new Xl;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),gE(this,y),this.m=d.m}else d&&(g=String(d).match(mE))?(this.h=!1,Rd(this,g[1]||"",!0),this.o=Ql(g[2]||""),this.g=Ql(g[3]||"",!0),bd(this,g[4]),this.l=Ql(g[5]||"",!0),gE(this,g[6]||"",!0),this.m=Ql(g[7]||"")):(this.h=!1,this.i=new Xl(null,this.h))}Ls.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Wl(g,_E,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Wl(g,_E,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Wl(y,y.charAt(0)=="/"?YM:$M,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Wl(y,QM)),d.join("")};function qi(d){return new Ls(d)}function Rd(d,g,y){d.j=y?Ql(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function bd(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function gE(d,g,y){g instanceof Xl?(d.i=g,WM(d.i,d.h)):(y||(g=Wl(g,JM)),d.i=new Xl(g,d.h))}function Oe(d,g,y){d.i.set(g,y)}function xd(d){return Oe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ql(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Wl(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,KM),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function KM(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var _E=/[#\/\?@]/g,$M=/[#\?:]/g,YM=/[#\?]/g,JM=/[#\?@]/g,QM=/#/g;function Xl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Dr(d){d.g||(d.g=new Map,d.h=0,d.i&&HM(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Xl.prototype,t.add=function(d,g){Dr(this),this.i=null,d=Ko(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function yE(d,g){Dr(d),g=Ko(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function vE(d,g){return Dr(d),g=Ko(d,g),d.g.has(g)}t.forEach=function(d,g){Dr(this),this.g.forEach(function(y,I){y.forEach(function(V){d.call(g,V,I,this)},this)},this)},t.na=function(){Dr(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){const V=d[I];for(let q=0;q<V.length;q++)y.push(g[I])}return y},t.V=function(d){Dr(this);let g=[];if(typeof d=="string")vE(this,d)&&(g=g.concat(this.g.get(Ko(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return Dr(this),this.i=null,d=Ko(this,d),vE(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function TE(d,g,y){yE(d,g),0<y.length&&(d.i=null,d.g.set(Ko(d,g),b(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];const q=encodeURIComponent(String(I)),$=this.V(I);for(I=0;I<$.length;I++){var V=q;$[I]!==""&&(V+="="+encodeURIComponent(String($[I]))),d.push(V)}}return this.i=d.join("&")};function Ko(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function WM(d,g){g&&!d.j&&(Dr(d),d.i=null,d.g.forEach(function(y,I){var V=I.toLowerCase();I!=V&&(yE(this,I),TE(this,V,y))},d)),d.j=g}function XM(d,g){const y=new Yl;if(a.Image){const I=new Image;I.onload=_(Pr,y,"TestLoadImage: loaded",!0,g,I),I.onerror=_(Pr,y,"TestLoadImage: error",!1,g,I),I.onabort=_(Pr,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=_(Pr,y,"TestLoadImage: timeout",!1,g,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function ZM(d,g){const y=new Yl,I=new AbortController,V=setTimeout(()=>{I.abort(),Pr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(q=>{clearTimeout(V),q.ok?Pr(y,"TestPingServer: ok",!0,g):Pr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Pr(y,"TestPingServer: error",!1,g)})}function Pr(d,g,y,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(y)}catch{}}function jM(){this.g=new tE}function e1(d,g,y){const I=y||"";try{pE(d,function(V,q){let $=V;u(V)&&($=ai(V)),g.push(I+q+"="+encodeURIComponent($))})}catch(V){throw g.push(I+"type="+encodeURIComponent("_badmap")),V}}function Nd(d){this.l=d.Ub||null,this.j=d.eb||!1}S(Nd,Sd),Nd.prototype.g=function(){return new Dd(this.l,this.j)},Nd.prototype.i=function(d){return function(){return d}}({});function Dd(d,g){j.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Dd,j),t=Dd.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,jl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,jl(this)),this.g&&(this.readyState=3,jl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;EE(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function EE(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Zl(this):jl(this),this.readyState==3&&EE(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Zl(this))},t.Qa=function(d){this.g&&(this.response=d,Zl(this))},t.ga=function(){this.g&&Zl(this)};function Zl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,jl(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function jl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Dd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function IE(d){let g="";return F(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function cm(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=IE(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):Oe(d,g,y))}function nt(d){j.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(nt,j);var t1=/^https?$/i,n1=["POST","PUT"];t=nt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():im.g(),this.v=this.o?tm(this.o):tm(im),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(q){SE(this,q);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)y.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())y.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(q=>q.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(n1,g,void 0))||I||V||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,$]of y)this.g.setRequestHeader(q,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CE(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){SE(this,q)}};function SE(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,AE(d),Pd(d)}function AE(d){d.A||(d.A=!0,le(d,"complete"),le(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,le(this,"complete"),le(this,"abort"),Pd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pd(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wE(this):this.bb())},t.bb=function(){wE(this)};function wE(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Bi(d)!=4||d.Z()!=2)){if(d.u&&Bi(d)==4)Xe(d.Ea,0,d);else if(le(d,"readystatechange"),Bi(d)==4){d.h=!1;try{const $=d.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=$===0){var V=String(d.D).match(mE)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),I=!t1.test(V?V.toLowerCase():"")}y=I}if(y)le(d,"complete"),le(d,"success");else{d.m=6;try{var q=2<Bi(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",AE(d)}}finally{Pd(d)}}}}function Pd(d,g){if(d.g){CE(d);const y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||le(d,"ready");try{y.onreadystatechange=I}catch{}}}function CE(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Bi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Bi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),em(g)}};function RE(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function i1(d){const g={};d=(d.g&&2<=Bi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(v(d[I]))continue;var y=M(d[I]);const V=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const q=g[V]||[];g[V]=q,q.push(y)}C(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eu(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function bE(d){this.Aa=0,this.i=[],this.j=new Yl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eu("baseRetryDelayMs",5e3,d),this.cb=eu("retryDelaySeedMs",1e4,d),this.Wa=eu("forwardChannelMaxRetries",2,d),this.wa=eu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new uE(d&&d.concurrentRequestLimit),this.Da=new jM,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bE.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,I){tn(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=LE(this,null,this.W),kd(this)};function dm(d){if(xE(d),d.G==3){var g=d.U++,y=qi(d.I);if(Oe(y,"SID",d.K),Oe(y,"RID",g),Oe(y,"TYPE","terminate"),tu(d,y),g=new Nr(d,d.j,g),g.L=2,g.v=xd(qi(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=g.v,y=!0),y||(g.g=OE(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Cd(g)}UE(d)}function Md(d){d.g&&(hm(d),d.g.cancel(),d.g=null)}function xE(d){Md(d),d.u&&(a.clearTimeout(d.u),d.u=null),Vd(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function kd(d){if(!cE(d.h)&&!d.s){d.s=!0;var g=d.Ga;ie||ke(),re||(ie(),re=!0),De.add(g,d),d.B=0}}function r1(d,g){return dE(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=$l(m(d.Ga,d,g),VE(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const V=new Nr(this,this.j,d);let q=this.o;if(this.S&&(q?(q=E(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(V.H=q,q=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=DE(this,V,g),y=qi(this.I),Oe(y,"RID",d),Oe(y,"CVER",22),this.D&&Oe(y,"X-HTTP-Session-Id",this.D),tu(this,y),q&&(this.O?g="headers="+encodeURIComponent(String(IE(q)))+"&"+g:this.m&&cm(y,this.m,q)),um(this.h,V),this.Ua&&Oe(y,"TYPE","init"),this.P?(Oe(y,"$req",g),Oe(y,"SID","null"),V.T=!0,sm(V,y,null)):sm(V,y,g),this.G=2}}else this.G==3&&(d?NE(this,d):this.i.length==0||cE(this.h)||NE(this))};function NE(d,g){var y;g?y=g.l:y=d.U++;const I=qi(d.I);Oe(I,"SID",d.K),Oe(I,"RID",y),Oe(I,"AID",d.T),tu(d,I),d.m&&d.o&&cm(I,d.m,d.o),y=new Nr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=DE(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),um(d.h,y),sm(y,I,g)}function tu(d,g){d.H&&F(d.H,function(y,I){Oe(g,I,y)}),d.l&&pE({},function(y,I){Oe(g,I,y)})}function DE(d,g,y){y=Math.min(d.i.length,y);var I=d.l?m(d.l.Na,d.l,d):null;e:{var V=d.i;let q=-1;for(;;){const $=["count="+y];q==-1?0<y?(q=V[0].g,$.push("ofs="+q)):q=0:$.push("ofs="+q);let Pe=!0;for(let Vt=0;Vt<y;Vt++){let ve=V[Vt].g;const Yt=V[Vt].map;if(ve-=q,0>ve)q=Math.max(0,V[Vt].g-100),Pe=!1;else try{e1(Yt,$,"req"+ve+"_")}catch{I&&I(Yt)}}if(Pe){I=$.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function PE(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;ie||ke(),re||(ie(),re=!0),De.add(g,d),d.v=0}}function fm(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=$l(m(d.Fa,d),VE(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,ME(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=$l(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),Md(this),ME(this))};function hm(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function ME(d){d.g=new Nr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=qi(d.qa);Oe(g,"RID","rpc"),Oe(g,"SID",d.K),Oe(g,"AID",d.T),Oe(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Oe(g,"TO",d.ja),Oe(g,"TYPE","xmlhttp"),tu(d,g),d.m&&d.o&&cm(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=xd(qi(g)),y.m=null,y.P=!0,oE(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Md(this),fm(this),tn(19))};function Vd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function kE(d,g){var y=null;if(d.g==g){Vd(d),hm(d),d.g=null;var I=2}else if(lm(d.h,g))y=g.D,fE(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var V=d.B;I=Fi(),le(I,new nE(I,y)),kd(d)}else PE(d);else if(V=g.s,V==3||V==0&&0<g.X||!(I==1&&r1(d,g)||I==2&&fm(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),V){case 1:Os(d,5);break;case 4:Os(d,10);break;case 3:Os(d,6);break;default:Os(d,2)}}}function VE(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function Os(d,g){if(d.j.info("Error code "+g),g==2){var y=m(d.fb,d),I=d.Xa;const V=!I;I=new Ls(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rd(I,"https"),xd(I),V?XM(I.toString(),y):ZM(I.toString(),y)}else tn(2);d.G=0,d.l&&d.l.sa(g),UE(d),xE(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function UE(d){if(d.G=0,d.ka=[],d.l){const g=hE(d.h);(g.length!=0||d.i.length!=0)&&(P(d.ka,g),P(d.ka,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.ra()}}function LE(d,g,y){var I=y instanceof Ls?qi(y):new Ls(y);if(I.g!="")g&&(I.g=g+"."+I.g),bd(I,I.s);else{var V=a.location;I=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var q=new Ls(null);I&&Rd(q,I),g&&(q.g=g),V&&bd(q,V),y&&(q.l=y),I=q}return y=d.D,g=d.ya,y&&g&&Oe(I,y,g),Oe(I,"VER",d.la),tu(d,I),I}function OE(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new nt(new Nd({eb:y})):new nt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function FE(){}t=FE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ud(){}Ud.prototype.g=function(d,g){return new Rn(d,g)};function Rn(d,g){j.call(this),this.g=new bE(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!v(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!v(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new $o(this)}S(Rn,j),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){dm(this.g)},Rn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=ai(d),d=y);g.i.push(new BM(g.Ya++,d)),g.G==3&&kd(g)},Rn.prototype.N=function(){this.g.l=null,delete this.j,dm(this.g),delete this.g,Rn.aa.N.call(this)};function qE(d){Hl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}S(qE,Hl);function BE(){Kl.call(this),this.status=1}S(BE,Kl);function $o(d){this.g=d}S($o,FE),$o.prototype.ua=function(){le(this.g,"a")},$o.prototype.ta=function(d){le(this.g,new qE(d))},$o.prototype.sa=function(d){le(this.g,new BE)},$o.prototype.ra=function(){le(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,Jx=function(){return new Ud},Yx=function(){return Fi()},$x=Re,N_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ad.NO_ERROR=0,Ad.TIMEOUT=8,Ad.HTTP_ERROR=6,xf=Ad,iE.COMPLETE="complete",Kx=iE,zl.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",j.prototype.listen=j.prototype.K,wu=zl,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,Hx=nt}).apply(typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{});const JS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new fp("@firebase/firestore");function sa(){return _s.logLevel}function N4(t){_s.setLogLevel(t)}function z(t,...e){if(_s.logLevel<=fe.DEBUG){const n=e.map(Av);_s.debug(`Firestore (${Rl}): ${t}`,...n)}}function dt(t,...e){if(_s.logLevel<=fe.ERROR){const n=e.map(Av);_s.error(`Firestore (${Rl}): ${t}`,...n)}}function Pi(t,...e){if(_s.logLevel<=fe.WARN){const n=e.map(Av);_s.warn(`Firestore (${Rl}): ${t}`,...n)}}function Av(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+t;throw dt(e),new Error(e)}function Z(t,e){t||Q()}function D4(t,e){t||Q()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class M4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class k4{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Z(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new zt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Z(typeof i.accessToken=="string"),new Qx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Z(e===null||typeof e=="string"),new Dt(e)}}class V4{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class U4{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new V4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Z(this.o===void 0);const i=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Z(typeof n.token=="string"),this.R=n.token,new L4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=F4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function oe(t,e){return t<e?-1:t>e?1:0}function el(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function Xx(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new We(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new We(0,0))}static max(){return new te(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n,i){n===void 0?n=0:n>e.length&&Q(),i===void 0?i=e.length-n:i>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vc?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pe extends vc{construct(e,n,i){return new pe(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(O.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const q4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends vc{construct(e,n,i){return new Je(e,n,i)}static isValidIdentifier(e){return q4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Je(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(pe.fromString(e))}static fromName(e){return new Y(pe.fromString(e).popFirst(5))}static empty(){return new Y(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new pe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function D_(t){return t.fields.find(e=>e.kind===2)}function $s(t){return t.fields.filter(e=>e.kind!==2)}Sh.UNKNOWN_ID=-1;class Nf{constructor(e,n){this.fieldPath=e,this.kind=n}}class Tc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Tc(0,Bn.min())}}function Zx(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new We(n+1,0):new We(n,i));return new Bn(r,Y.empty(),e)}function jx(t){return new Bn(t.readTime,t.key,-1)}class Bn{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Bn(te.min(),Y.empty(),-1)}static max(){return new Bn(te.max(),Y.empty(),-1)}}function wv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(t){if(t.code!==O.FAILED_PRECONDITION||t.message!==eN)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new U((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(f=>{o[u]=f,++a,a===s&&i(o)},f=>r(f))}})}static doWhile(e,n){return new U((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new zt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ku(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{const r=Cv(i.target.error);this.V.reject(new Ku(e,r))}}static open(e,n,i,r){try{return new hp(n,e.transaction(r,i))}catch(s){throw new Ku(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new G4(n)}}class xi{constructor(e,n,i){this.name=e,this.version=n,this.p=i,xi.S(je())===12.2&&dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!mc())return!1;if(xi.v())return!0;const e=je(),n=xi.S(e),i=0<n&&n<10,r=nN(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}async M(e){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{const o=s.target.result;n(o)},r.onblocked=()=>{i(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{const o=s.target.error;o.name==="VersionError"?i(new G(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new G(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Ku(e,o))},r.onupgradeneeded=s=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,r.transaction,s.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=hp.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),U.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function nN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class B4{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ys(this.B.delete())}}class Ku extends G{constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function xs(t){return t.name==="IndexedDbTransactionError"}class G4{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(z("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ys(i)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next(n=>(n===void 0&&(n=null),z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}U(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const s=r.getAll(i.range);return new U((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(i),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new U((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}j(e,n){z("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,n);i.H=!1;const r=this.cursor(i);return this.W(r,(s,o,a)=>a.delete())}J(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.W(r,n)}Y(e){const n=this.cursor({});return new U((i,r)=>{n.onerror=s=>{const o=Cv(s.target.error);r(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}W(e,n){const i=[];return new U((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const l=new B4(a),u=n(a.primaryKey,a.value,l);if(u instanceof U){const f=u.catch(p=>(l.done(),U.reject(p)));i.push(f)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>U.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ys(t){return new U((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=Cv(i.target.error);n(r)}})}let QS=!1;function Cv(t){const e=xi.S(je());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QS||(QS=!0,setTimeout(()=>{throw i},0)),i}}return t}class z4{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{z("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){xs(n)?z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await bs(n)}await this.X(6e4)})}}class H4{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const i=new Set;let r=n,s=!0;return U.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,s)).next(a=>(z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let i=e;return n.changes.forEach((r,s)=>{const o=jx(s);wv(o,i)>0&&(i=o)}),new Bn(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Tn.oe=-1;function Zc(t){return t==null}function Ec(t){return t===0&&1/t==-1/0}function iN(t){return typeof t=="number"&&Number.isInteger(t)&&!Ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WS(e)),e=K4(t.get(n),e);return WS(e)}function K4(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function WS(t){return t+""}function wi(t){const e=t.length;if(Z(e>=2),e===2)return Z(t.charAt(0)===""&&t.charAt(1)===""),pe.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Q(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=t.substring(s,o),r+="\0";break;case"":r+=t.substring(s,o+1);break;default:Q()}s=o+2}return new pe(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t,e){return[t,un(e)]}function rN(t,e,n){return[t,un(e),n]}const $4={},Y4=["prefixPath","collectionGroup","readTime","documentId"],J4=["prefixPath","collectionGroup","documentId"],Q4=["collectionGroup","readTime","prefixPath","documentId"],W4=["canonicalId","targetId"],X4=["targetId","path"],Z4=["path","targetId"],j4=["collectionId","parent"],eG=["indexId","uid"],tG=["uid","sequenceNumber"],nG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iG=["indexId","uid","orderedDocumentKey"],rG=["userId","collectionPath","documentId"],sG=["userId","collectionPath","largestBatchId"],oG=["userId","collectionGroup","largestBatchId"],sN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aG=[...sN,"documentOverlays"],oN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aN=oN,Rv=[...aN,"indexConfiguration","indexState","indexEntries"],lG=Rv,uG=[...Rv,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends tN{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function wt(t,e){const n=J(t);return xi.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tf(this.root,e,this.comparator,!0)}}class tf{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=s??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jS(this.data.getIterator())}getIteratorFrom(e){return new jS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class jS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Wo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new En([])}unionWith(e){let n=new Ne(Je.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return el(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uN("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const dG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(t){if(Z(!!t),typeof t=="string"){let e=0;const n=dG.exec(t);if(Z(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bv(t){const e=t.mapValue.fields.__previous_value__;return pp(e)?bv(e):e}function Ic(t){const e=mr(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class vs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pf={nullValue:"NULL_VALUE"};function _o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pp(t)?4:cN(t)?9007199254740991:mp(t)?10:11:Q()}function Mi(t,e){if(t===e)return!0;const n=_o(t);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ic(t).isEqual(Ic(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=mr(r.timestampValue),a=mr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ys(r.bytesValue).isEqual(ys(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Ye(r.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(r.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ye(r.integerValue)===Ye(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ye(r.doubleValue),a=Ye(s.doubleValue);return o===a?Ec(o)===Ec(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return el(t.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(ZS(o)!==ZS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mi(o[l],a[l])))return!1;return!0}(t,e);default:return Q()}}function Sc(t,e){return(t.values||[]).find(n=>Mi(n,e))!==void 0}function Ts(t,e){if(t===e)return 0;const n=_o(t),i=_o(e);if(n!==i)return oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ye(s.integerValue||s.doubleValue),l=Ye(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return eA(t.timestampValue,e.timestampValue);case 4:return eA(Ic(t),Ic(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ys(s),l=ys(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=oe(a[u],l[u]);if(f!==0)return f}return oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(Ye(s.latitude),Ye(o.latitude));return a!==0?a:oe(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,f;const p=s.fields||{},m=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=oe(((u=_==null?void 0:_.values)===null||u===void 0?void 0:u.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:tA(_,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zr.mapValue&&o===Zr.mapValue)return 0;if(s===Zr.mapValue)return 1;if(o===Zr.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=oe(l[p],f[p]);if(m!==0)return m;const _=Ts(a[l[p]],u[f[p]]);if(_!==0)return _}return oe(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function eA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=mr(t),i=mr(e),r=oe(n.seconds,i.seconds);return r!==0?r:oe(n.nanos,i.nanos)}function tA(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ts(n[r],i[r]);if(s)return s}return oe(n.length,i.length)}function tl(t){return M_(t)}function M_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=mr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=M_(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${M_(n.fields[o])}`;return r+"}"}(t.mapValue):Q()}function yo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k_(t){return!!t&&"integerValue"in t}function Ac(t){return!!t&&"arrayValue"in t}function nA(t){return!!t&&"nullValue"in t}function iA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mf(t){return!!t&&"mapValue"in t}function mp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function $u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Lo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=$u(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const dN={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function hG(t){return"nullValue"in t?Pf:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?yo(vs.empty(),Y.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?mp(t)?dN:{mapValue:{}}:Q()}function pG(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?yo(vs.empty(),Y.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dN:"mapValue"in t?mp(t)?{mapValue:{}}:Zr:Q()}function rA(t,e){const n=Ts(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function sA(t,e){const n=Ts(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Mf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(n)}setAll(e){let n=Je.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=$u(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Mf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Lo(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new qt($u(this.value))}}function fN(t){const e=[];return Lo(t.fields,(n,i)=>{const r=new Je([n]);if(Mf(i)){const s=fN(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ge(e,0,te.min(),te.min(),te.min(),qt.empty(),0)}static newFoundDocument(e,n,i,r){return new Ge(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Ge(e,2,n,te.min(),te.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new Ge(e,3,n,te.min(),te.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.position=e,this.inclusive=n}}function oA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(o.referenceValue),n.key):i=Ts(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function aA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function mG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{}class ge extends hN{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new gG(e,n,i):n==="array-contains"?new vG(e,i):n==="in"?new vN(e,i):n==="not-in"?new TG(e,i):n==="array-contains-any"?new EG(e,i):new ge(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new _G(e,i):new yG(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ts(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.matchesComparison(Ts(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ce extends hN{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ce(e,n)}matches(e){return nl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nl(t){return t.op==="and"}function V_(t){return t.op==="or"}function xv(t){return pN(t)&&nl(t)}function pN(t){for(const e of t.filters)if(e instanceof Ce)return!1;return!0}function U_(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+tl(t.value);if(xv(t))return t.filters.map(e=>U_(e)).join(",");{const e=t.filters.map(n=>U_(n)).join(",");return`${t.op}(${e})`}}function mN(t,e){return t instanceof ge?function(i,r){return r instanceof ge&&i.op===r.op&&i.field.isEqual(r.field)&&Mi(i.value,r.value)}(t,e):t instanceof Ce?function(i,r){return r instanceof Ce&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&mN(o,r.filters[a]),!0):!1}(t,e):void Q()}function gN(t,e){const n=t.filters.concat(e);return Ce.create(n,t.op)}function _N(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`}(t):t instanceof Ce?function(n){return n.op.toString()+" {"+n.getFilters().map(_N).join(" ,")+"}"}(t):"Filter"}class gG extends ge{constructor(e,n,i){super(e,n,i),this.key=Y.fromName(i.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class _G extends ge{constructor(e,n){super(e,"in",n),this.keys=yN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yG extends ge{constructor(e,n){super(e,"not-in",n),this.keys=yN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class vG extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ac(n)&&Sc(n.arrayValue,this.value)}}class vN extends ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}}class TG extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sc(this.value.arrayValue,n)}}class EG extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ac(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Sc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function L_(t,e=null,n=[],i=[],r=null,s=null,o=null){return new IG(t,e,n,i,r,s,o)}function vo(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>U_(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>tl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>tl(i)).join(",")),e.ue=n}return e.ue}function jc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aA(t.startAt,e.startAt)&&aA(t.endAt,e.endAt)}function Ah(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wh(t,e){return t.filters.filter(n=>n instanceof ge&&n.field.isEqual(e))}function lA(t,e,n){let i=Pf,r=!0;for(const s of wh(t,e)){let o=Pf,a=!0;switch(s.op){case"<":case"<=":o=hG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Pf}rA({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];rA({value:i,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}function uA(t,e,n){let i=Zr,r=!0;for(const s of wh(t,e)){let o=Zr,a=!0;switch(s.op){case">=":case">":o=pG(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zr}sA({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];sA({value:i,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(i=o,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function TN(t,e,n,i,r,s,o,a){return new Er(t,e,n,i,r,s,o,a)}function bl(t){return new Er(t)}function cA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nv(t){return t.collectionGroup!==null}function ka(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ne(Je.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new wc(s,i))}),n.has(Je.keyField().canonicalString())||e.ce.push(new wc(Je.keyField(),i))}return e.ce}function cn(t){const e=J(t);return e.le||(e.le=SG(e,ka(t))),e.le}function SG(t,e){if(t.limitType==="F")return L_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new wc(r.field,s)});const n=t.endAt?new Es(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Es(t.startAt.position,t.startAt.inclusive):null;return L_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function O_(t,e){const n=t.filters.concat([e]);return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ch(t,e,n){return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ed(t,e){return jc(cn(t),cn(e))&&t.limitType===e.limitType}function EN(t){return`${vo(cn(t))}|lt:${t.limitType}`}function oa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>_N(r)).join(", ")}]`),Zc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>tl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>tl(r)).join(",")),`Target(${i})`}(cn(t))}; limitType=${t.limitType})`}function td(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of ka(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=oA(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,ka(i),r)||i.endAt&&!function(o,a,l){const u=oA(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,ka(i),r))}(t,e)}function IN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SN(t){return(e,n)=>{let i=!1;for(const r of ka(t)){const s=AG(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function AG(t,e,n){const i=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ts(l,u):Q()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return lN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG=new Le(Y.comparator);function In(){return wG}const AN=new Le(Y.comparator);function Cu(...t){let e=AN;for(const n of t)e=e.insert(n.key,n);return e}function wN(t){let e=AN;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ci(){return Yu()}function CN(){return Yu()}function Yu(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const CG=new Le(Y.comparator),RG=new Ne(Y.comparator);function ce(...t){let e=RG;for(const n of t)e=e.add(n);return e}const bG=new Ne(oe);function Dv(){return bG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(e)?"-0":e}}function RN(t){return{integerValue:""+t}}function bN(t,e){return iN(e)?RN(e):Pv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this._=void 0}}function xG(t,e,n){return t instanceof il?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&pp(s)&&(s=bv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof To?NN(t,e):t instanceof Eo?DN(t,e):function(r,s){const o=xN(r,s),a=dA(o)+dA(r.Pe);return k_(o)&&k_(r.Pe)?RN(a):Pv(r.serializer,a)}(t,e)}function NG(t,e,n){return t instanceof To?NN(t,e):t instanceof Eo?DN(t,e):n}function xN(t,e){return t instanceof rl?function(i){return k_(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class il extends gp{}class To extends gp{constructor(e){super(),this.elements=e}}function NN(t,e){const n=PN(e);for(const i of t.elements)n.some(r=>Mi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Eo extends gp{constructor(e){super(),this.elements=e}}function DN(t,e){let n=PN(e);for(const i of t.elements)n=n.filter(r=>!Mi(r,i));return{arrayValue:{values:n}}}class rl extends gp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function dA(t){return Ye(t.integerValue||t.doubleValue)}function PN(t){return Ac(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.field=e,this.transform=n}}function DG(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof To&&r instanceof To||i instanceof Eo&&r instanceof Eo?el(i.elements,r.elements,Mi):i instanceof rl&&r instanceof rl?Mi(i.Pe,r.Pe):i instanceof il&&r instanceof il}(t.transform,e.transform)}class PG{constructor(e,n){this.version=e,this.transformResults=n}}class Qe{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qe}static exists(e){return new Qe(void 0,e)}static updateTime(e){return new Qe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _p{}function MN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nl(t.key,Qe.none()):new xl(t.key,t.data,Qe.none());{const n=t.data,i=qt.empty();let r=new Ne(Je.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Ir(t.key,i,new En(r.toArray()),Qe.none())}}function MG(t,e,n){t instanceof xl?function(r,s,o){const a=r.value.clone(),l=hA(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ir?function(r,s,o){if(!kf(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hA(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(kN(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ju(t,e,n,i){return t instanceof xl?function(s,o,a,l){if(!kf(s.precondition,o))return a;const u=s.value.clone(),f=pA(s.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ir?function(s,o,a,l){if(!kf(s.precondition,o))return a;const u=pA(s.fieldTransforms,l,o),f=o.data;return f.setAll(kN(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(s,o,a){return kf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kG(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=xN(i.transform,r||null);s!=null&&(n===null&&(n=qt.empty()),n.set(i.field,s))}return n||null}function fA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&el(i,r,(s,o)=>DG(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xl extends _p{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ir extends _p{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function hA(t,e,n){const i=new Map;Z(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,NG(o,a,n[r]))}return i}function pA(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,xG(s,o,e))}return i}class Nl extends _p{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mv extends _p{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&MG(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ju(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ju(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=CN();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=MN(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&el(this.mutations,e.mutations,(n,i)=>fA(n,i))&&el(this.baseMutations,e.baseMutations,(n,i)=>fA(n,i))}}class Vv{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Z(e.mutations.length===i.length);let r=function(){return CG}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Vv(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,ye;function VN(t){switch(t){default:return Q();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function UN(t){if(t===void 0)return dt("GRPC error has no .code"),O.UNKNOWN;switch(t){case gt.OK:return O.OK;case gt.CANCELLED:return O.CANCELLED;case gt.UNKNOWN:return O.UNKNOWN;case gt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case gt.INTERNAL:return O.INTERNAL;case gt.UNAVAILABLE:return O.UNAVAILABLE;case gt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case gt.NOT_FOUND:return O.NOT_FOUND;case gt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case gt.ABORTED:return O.ABORTED;case gt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case gt.DATA_LOSS:return O.DATA_LOSS;default:return Q()}}(ye=gt||(gt={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UG=new oo([4294967295,4294967295],0);function mA(t){const e=LN().encode(t),n=new zx;return n.update(e),new Uint8Array(n.digest())}function gA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new oo([n,i],0),new oo([r,s],0)]}class Lv{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ru(`Invalid padding: ${n}`);if(i<0)throw new Ru(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=oo.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(oo.fromNumber(i)));return r.compare(UG)===1&&(r=new oo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=mA(e),[i,r]=gA(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Lv(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=mA(e),[i,r]=gA(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,rd.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new id(te.min(),r,new Le(oe),In(),ce())}}class rd{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new rd(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class ON{constructor(e,n){this.targetId=e,this.me=n}}class FN{constructor(e,n,i=ot.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class _A{constructor(){this.fe=0,this.ge=vA(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),n=ce(),i=ce();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Q()}}),new rd(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=vA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LG{constructor(e){this.Le=e,this.Be=new Map,this.ke=In(),this.qe=yA(),this.Qe=new Le(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Ah(s))if(i===0){const o=new Y(s.path);this.Ue(n,o,Ge.newNoDocument(o,te.min()))}else Z(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=ys(i).toUint8Array()}catch(l){if(l instanceof uN)return Pi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Lv(o,r,s)}catch(l){return Pi(l instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Ah(a.target)){const l=new Y(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ge.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new id(e,n,this.Qe,this.ke,i);return this.ke=In(),this.qe=yA(),this.Qe=new Le(oe),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _A,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ne(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _A),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yA(){return new Le(Y.comparator)}function vA(){return new Le(Y.comparator)}const OG={asc:"ASCENDING",desc:"DESCENDING"},FG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qG={and:"AND",or:"OR"};class BG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function F_(t,e){return t.useProto3Json||Zc(e)?e:{value:e}}function sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GG(t,e){return sl(t,e.toTimestamp())}function ht(t){return Z(!!t),te.fromTimestamp(function(n){const i=mr(n);return new We(i.seconds,i.nanos)}(t))}function Ov(t,e){return q_(t,e).canonicalString()}function q_(t,e){const n=function(r){return new pe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BN(t){const e=pe.fromString(t);return Z(XN(e)),e}function Cc(t,e){return Ov(t.databaseId,e.path)}function Ni(t,e){const n=BN(e);if(n.get(1)!==t.databaseId.projectId)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(HN(n))}function GN(t,e){return Ov(t.databaseId,e)}function zN(t){const e=BN(t);return e.length===4?pe.emptyPath():HN(e)}function B_(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HN(t){return Z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function TA(t,e,n){return{name:Cc(t,e),fields:n.value.mapValue.fields}}function KN(t,e,n){const i=Ni(t,e.name),r=ht(e.updateTime),s=e.createTime?ht(e.createTime):te.min(),o=new qt({mapValue:{fields:e.fields}}),a=Ge.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zG(t,e){return"found"in e?function(i,r){Z(!!r.found),r.found.name,r.found.updateTime;const s=Ni(i,r.found.name),o=ht(r.found.updateTime),a=r.found.createTime?ht(r.found.createTime):te.min(),l=new qt({mapValue:{fields:r.found.fields}});return Ge.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(i,r){Z(!!r.missing),Z(!!r.readTime);const s=Ni(i,r.missing),o=ht(r.readTime);return Ge.newNoDocument(s,o)}(t,e):Q()}function HG(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(Z(f===void 0||typeof f=="string"),ot.fromBase64String(f||"")):(Z(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ot.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=u.code===void 0?O.UNKNOWN:UN(u.code);return new G(f,u.message||"")}(o);n=new FN(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ni(t,i.document.name),s=ht(i.document.updateTime),o=i.document.createTime?ht(i.document.createTime):te.min(),a=new qt({mapValue:{fields:i.document.fields}}),l=Ge.newFoundDocument(r,s,o,a),u=i.targetIds||[],f=i.removedTargetIds||[];n=new Vf(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ni(t,i.document),s=i.readTime?ht(i.readTime):te.min(),o=Ge.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Vf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ni(t,i.document),s=i.removedTargetIds||[];n=new Vf([],s,r,null)}else{if(!("filter"in e))return Q();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new VG(r,s),a=i.targetId;n=new ON(a,o)}}return n}function Rc(t,e){let n;if(e instanceof xl)n={update:TA(t,e.key,e.value)};else if(e instanceof Nl)n={delete:Cc(t,e.key)};else if(e instanceof Ir)n={update:TA(t,e.key,e.data),updateMask:WG(e.fieldMask)};else{if(!(e instanceof Mv))return Q();n={verify:Cc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof il)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof To)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Eo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:GG(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function G_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Qe.updateTime(ht(s.updateTime)):s.exists!==void 0?Qe.exists(s.exists):Qe.none()}(e.currentDocument):Qe.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;if("setToServerValue"in a)Z(a.setToServerValue==="REQUEST_TIME"),l=new il;else if("appendMissingElements"in a){const f=a.appendMissingElements.values||[];l=new To(f)}else if("removeAllFromArray"in a){const f=a.removeAllFromArray.values||[];l=new Eo(f)}else"increment"in a?l=new rl(o,a.increment):Q();const u=Je.fromServerFormat(a.fieldPath);return new nd(u,l)}(t,r)):[];if(e.update){e.update.name;const r=Ni(t,e.update.name),s=new qt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new En(u.map(f=>Je.fromServerFormat(f)))}(e.updateMask);return new Ir(r,s,o,n,i)}return new xl(r,s,n,i)}if(e.delete){const r=Ni(t,e.delete);return new Nl(r,n)}if(e.verify){const r=Ni(t,e.verify);return new Mv(r,n)}return Q()}function KG(t,e){return t&&t.length>0?(Z(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?ht(r.updateTime):ht(s);return o.isEqual(te.min())&&(o=ht(s)),new PG(o,r.transformResults||[])}(n,e))):[]}function $N(t,e){return{documents:[GN(t,e.path)]}}function YN(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=GN(t,r);const s=function(u){if(u.length!==0)return WN(Ce.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(f=>function(m){return{field:aa(m.field),direction:YG(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=F_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function JN(t){let e=zN(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Z(i===1);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const m=QN(p);return m instanceof Ce&&xv(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(S){return new wc(la(S.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Zc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,_=p.values||[];return new Es(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,_=p.values||[];return new Es(_,m)}(n.endAt)),TN(e,r,o,s,a,"F",l,u)}function $G(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=la(n.unaryFilter.field);return ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=la(n.unaryFilter.field);return ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=la(n.unaryFilter.field);return ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=la(n.unaryFilter.field);return ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(la(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ce.create(n.compositeFilter.filters.map(i=>QN(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function YG(t){return OG[t]}function JG(t){return FG[t]}function QG(t){return qG[t]}function aa(t){return{fieldPath:t.canonicalString()}}function la(t){return Je.fromServerFormat(t.fieldPath)}function WN(t){return t instanceof ge?function(n){if(n.op==="=="){if(iA(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NAN"}};if(nA(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iA(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NOT_NAN"}};if(nA(n.value))return{unaryFilter:{field:aa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(n.field),op:JG(n.op),value:n.value}}}(t):t instanceof Ce?function(n){const i=n.getFilters().map(r=>WN(r));return i.length===1?i[0]:{compositeFilter:{op:QG(n.op),filters:i}}}(t):Q()}function WG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n,i,r,s=te.min(),o=te.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.ct=e}}function XG(t,e){let n;if(e.document)n=KN(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Y.fromSegments(e.noDocument.path),r=So(e.noDocument.readTime);n=Ge.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Q();{const i=Y.fromSegments(e.unknownDocument.path),r=So(e.unknownDocument.version);n=Ge.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){const s=new We(r[0],r[1]);return te.fromTimestamp(s)}(e.readTime)),n}function EA(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Rh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:Cc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:sl(s,o.version.toTimestamp()),createTime:sl(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Io(e.version)};else{if(!e.isUnknownDocument())return Q();i.unknownDocument={path:n.path.toArray(),version:Io(e.version)}}return i}function Rh(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Io(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function So(t){const e=new We(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Js(t,e){const n=(e.baseMutations||[]).map(s=>G_(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map(s=>G_(t.ct,s)),r=We.fromMillis(e.localWriteTimeMs);return new kv(e.batchId,r,n,i)}function bu(t){const e=So(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?So(t.lastLimboFreeSnapshotVersion):te.min();let i;return i=function(s){return s.documents!==void 0}(t.query)?function(s){return Z(s.documents.length===1),cn(bl(zN(s.documents[0])))}(t.query):function(s){return cn(JN(s))}(t.query),new ji(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ot.fromBase64String(t.resumeToken))}function jN(t,e){const n=Io(e.snapshotVersion),i=Io(e.lastLimboFreeSnapshotVersion);let r;r=Ah(e.target)?$N(t.ct,e.target):YN(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Fv(t){const e=JN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ch(e,e.limit,"L"):e}function rg(t,e){return new Uv(e.largestBatchId,G_(t.ct,e.overlayMutation))}function IA(t,e){const n=e.path.lastSegment();return[t,un(e.path.popLast()),n]}function SA(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Io(i.readTime),documentKey:un(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{getBundleMetadata(e,n){return AA(e).get(n).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:So(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,n){return AA(e).put(function(r){return{bundleId:r.id,createTime:Io(ht(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return wA(e).get(n).next(i=>{if(i)return function(s){return{name:s.name,query:Fv(s.bundledQuery),readTime:So(s.readTime)}}(i)})}saveNamedQuery(e,n){return wA(e).put(function(r){return{name:r.name,readTime:Io(ht(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function AA(t){return wt(t,"bundles")}function wA(t){return wt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const i=n.uid||"";return new yp(e,i)}getOverlay(e,n){return cu(e).get(IA(this.userId,n)).next(i=>i?rg(this.serializer,i):null)}getOverlays(e,n){const i=Ci();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){const r=[];return i.forEach((s,o)=>{const a=new Uv(n,o);r.push(this.ht(e,a))}),U.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach(o=>r.add(un(o.getCollectionPath())));const s=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(cu(e).j("collectionPathOverlayIndex",a))}),U.waitFor(s)}getOverlaysForCollection(e,n,i){const r=Ci(),s=un(n),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=rg(this.serializer,l);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,n,i,r){const s=Ci();let o;const a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return cu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,f)=>{const p=rg(this.serializer,u);s.size()<r||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return cu(e).put(function(r,s,o){const[a,l,u]=IA(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rc(r.ct,o.mutation)}}(this.serializer,this.userId,n))}}function cu(t){return wt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{Pt(e){return wt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const i=n==null?void 0:n.value;return i?ot.fromUint8Array(i):ot.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ye(e.integerValue));else if("doubleValue"in e){const i=Ye(e.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),Ec(i)?n.At(0):n.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(n,20),typeof i=="string"&&(i=mr(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ys(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in e?cN(e)?this.dt(n,Number.MAX_SAFE_INTEGER):mp(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const i=e.fields||{};this.dt(n,55);for(const r of Object.keys(i))this.Vt(r,n),this.Tt(i[r],n)}wt(e,n){var i,r;const s=e.fields||{};this.dt(n,53);const o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(n,15),n.At(Ye(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const i=e.values||[];this.dt(n,50);for(const r of i)this.Tt(r,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach(i=>{this.dt(n,60),this.Dt(i,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}Qs.vt=new Qs;function e3(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function CA(t){const e=64-function(i){let r=0;for(let s=0;s<8;++s){const o=e3(255&i[s]);if(r+=o,o!==8)break}return r}(t);return Math.ceil(e/8)}class t3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Ot(i.value),i=n.next();this.Nt()}Lt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{const r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{const r=n.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){const n=this.qt(e),i=CA(n);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Kt(e){const n=this.qt(e),i=CA(n);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class n3{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class i3{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class du{constructor(){this.jt=new t3,this.Ht=new n3(this.jt),this.Jt=new i3(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Ws(this.indexId,this.documentKey,this.arrayValue,i)}}function kr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=RA(t.arrayValue,e.arrayValue),n!==0?n:(n=RA(t.directionalValue,e.directionalValue),n!==0?n:Y.comparator(t.documentKey,e.documentKey)))}function RA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.Xt=new Ne((n,i)=>Je.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const i=n;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(e){if(Z(e.collectionGroup===this.collectionId),this.nn)return!1;const n=D_(e);if(n!==void 0&&!this.sn(n))return!1;const i=$s(e);let r=new Set,s=0,o=0;for(;s<i.length&&this.sn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const l=i[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<i.length;++s){const a=i[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ne(Je.comparator);const n=[];for(const i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Nf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Nf(i.field,0))}for(const i of this.en)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Nf(i.field,i.dir==="asc"?0:1)));return new Sh(Sh.UNKNOWN_ID,this.collectionId,n,Tc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){var e,n;if(Z(t instanceof ge||t instanceof Ce),t instanceof ge){if(t instanceof vN){const r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ge.create(t.field,"==",s)))||[];return Ce.create(r,"or")}return t}const i=t.filters.map(r=>eD(r));return Ce.create(i,t.op)}function r3(t){if(t.getFilters().length===0)return[];const e=K_(eD(t));return Z(tD(e)),z_(e)||H_(e)?[e]:e.getFilters()}function z_(t){return t instanceof ge}function H_(t){return t instanceof Ce&&xv(t)}function tD(t){return z_(t)||H_(t)||function(n){if(n instanceof Ce&&V_(n)){for(const i of n.getFilters())if(!z_(i)&&!H_(i))return!1;return!0}return!1}(t)}function K_(t){if(Z(t instanceof ge||t instanceof Ce),t instanceof ge)return t;if(t.filters.length===1)return K_(t.filters[0]);const e=t.filters.map(i=>K_(i));let n=Ce.create(e,t.op);return n=bh(n),tD(n)?n:(Z(n instanceof Ce),Z(nl(n)),Z(n.filters.length>1),n.filters.reduce((i,r)=>qv(i,r)))}function qv(t,e){let n;return Z(t instanceof ge||t instanceof Ce),Z(e instanceof ge||e instanceof Ce),n=t instanceof ge?e instanceof ge?function(r,s){return Ce.create([r,s],"and")}(t,e):xA(t,e):e instanceof ge?xA(e,t):function(r,s){if(Z(r.filters.length>0&&s.filters.length>0),nl(r)&&nl(s))return gN(r,s.getFilters());const o=V_(r)?r:s,a=V_(r)?s:r,l=o.filters.map(u=>qv(u,a));return Ce.create(l,"or")}(t,e),bh(n)}function xA(t,e){if(nl(e))return gN(e,t.getFilters());{const n=e.filters.map(i=>qv(t,i));return Ce.create(n,"or")}}function bh(t){if(Z(t instanceof ge||t instanceof Ce),t instanceof ge)return t;const e=t.getFilters();if(e.length===1)return bh(e[0]);if(pN(t))return t;const n=e.map(r=>bh(r)),i=[];return n.forEach(r=>{r instanceof ge?i.push(r):r instanceof Ce&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ce.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(){this.un=new Bv}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Bn.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Bn.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Bv{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ne(pe.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ne(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new Uint8Array(0);class o3{constructor(e,n){this.databaseId=n,this.cn=new Bv,this.ln=new Ns(i=>vo(i),(i,r)=>jc(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:i,parent:un(r)};return NA(e).put(s)}return U.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[Xx(n),""],!1,!0);return NA(e).U(r).next(s=>{for(const o of s){if(o.collectionId!==n)break;i.push(wi(o.parent))}return i})}addFieldIndex(e,n){const i=fu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;const s=i.add(r);if(n.indexState){const o=Zo(e);return s.next(a=>{o.put(SA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const i=fu(e),r=Zo(e),s=Xo(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=fu(e),i=Xo(e),r=Zo(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return U.forEach(this.hn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){const s=new bA(i).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const i=Xo(e);let r=!0;const s=new Map;return U.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=ce();const a=[];return U.forEach(s,(l,u)=>{z("IndexedDbIndexManager",`Using index ${function(A){return`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(N=>`${N.fieldPath}:${N.kind}`).join(",")}`}(l)} to execute ${vo(n)}`);const f=function(A,N){const L=D_(N);if(L===void 0)return null;for(const F of wh(A,L.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null}(u,l),p=function(A,N){const L=new Map;for(const F of $s(N))for(const C of wh(A,F.fieldPath))switch(C.op){case"==":case"in":L.set(F.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return L.set(F.fieldPath.canonicalString(),C.value),Array.from(L.values())}return null}(u,l),m=function(A,N){const L=[];let F=!0;for(const C of $s(N)){const E=C.kind===0?lA(A,C.fieldPath,A.startAt):uA(A,C.fieldPath,A.startAt);L.push(E.value),F&&(F=E.inclusive)}return new Es(L,F)}(u,l),_=function(A,N){const L=[];let F=!0;for(const C of $s(N)){const E=C.kind===0?uA(A,C.fieldPath,A.endAt):lA(A,C.fieldPath,A.endAt);L.push(E.value),F&&(F=E.inclusive)}return new Es(L,F)}(u,l),S=this.In(l,u,m),b=this.In(l,u,_),P=this.Tn(l,u,p),T=this.En(l.indexId,f,S,m.inclusive,b,_.inclusive,P);return U.forEach(T,v=>i.G(v,n.limit).next(A=>{A.forEach(N=>{const L=Y.fromSegments(N.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}return U.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=r3(Ce.create(e.filters,"and")).map(i=>L_(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,i,r,s,o,a){const l=(n!=null?n.length:1)*Math.max(i.length,s.length),u=l/(n!=null?n.length:1),f=[];for(let p=0;p<l;++p){const m=n?this.dn(n[p/u]):nf,_=this.An(e,m,i[p%u],r),S=this.Rn(e,m,s[p%u],o),b=a.map(P=>this.An(e,m,P,!0));f.push(...this.createRange(_,S,b))}return f}An(e,n,i,r){const s=new Ws(e,Y.empty(),n,i);return r?s:s.Zt()}Rn(e,n,i,r){const s=new Ws(e,Y.empty(),n,i);return r?s.Zt():s}Pn(e,n){const i=new bA(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const a of s)i.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let i=2;const r=this.hn(n);return U.forEach(r,s=>this.Pn(e,s).next(o=>{o?i!==0&&o.fields.length<function(l){let u=new Ne(Je.comparator),f=!1;for(const p of l.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?f=!0:u=u.add(m.field));for(const p of l.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(f?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(n)&&r.length>1&&i===2?1:i)}Vn(e,n){const i=new du;for(const r of $s(e)){const s=n.data.field(r.fieldPath);if(s==null)return null;const o=i.Yt(r.kind);Qs.vt.It(s,o)}return i.zt()}dn(e){const n=new du;return Qs.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const i=new du;return Qs.vt.It(yo(this.databaseId,n),i.Yt(function(s){const o=$s(s);return o.length===0?0:o[o.length-1].kind}(e))),i.zt()}Tn(e,n,i){if(i===null)return[];let r=[];r.push(new du);let s=0;for(const o of $s(e)){const a=i[s++];for(const l of r)if(this.fn(n,o.fieldPath)&&Ac(a))r=this.gn(r,o,a);else{const u=l.Yt(o.kind);Qs.vt.It(a,u)}}return this.pn(r)}In(e,n,i){return this.Tn(e,n,i.position)}pn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].zt();return n}gn(e,n,i){const r=[...e],s=[];for(const o of i.arrayValue.values||[])for(const a of r){const l=new du;l.seed(a.zt()),Qs.vt.It(o,l.Yt(n.kind)),s.push(l)}return s}fn(e,n){return!!e.filters.find(i=>i instanceof ge&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){const i=fu(e),r=Zo(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(s=>{const o=[];return U.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(f,p){const m=p?new Tc(p.sequenceNumber,new Bn(So(p.readTime),new Y(wi(p.documentKey)),p.largestBatchId)):Tc.empty(),_=f.fields.map(([S,b])=>new Nf(Je.fromServerFormat(S),b));return new Sh(f.indexId,f.collectionGroup,_,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:oe(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){const r=fu(e),s=Zo(e);return this.yn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>U.forEach(a,l=>s.put(SA(l.indexId,this.uid,o,i)))))}updateIndexEntries(e,n){const i=new Map;return U.forEach(n,(r,s)=>{const o=i.get(r.collectionGroup);return(o?U.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),U.forEach(a,l=>this.wn(e,r,l).next(u=>{const f=this.Sn(s,l);return u.isEqual(f)?U.resolve():this.bn(e,s,l,u,f)}))))})}Dn(e,n,i,r){return Xo(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,n.key),documentKey:n.key.path.toArray()})}vn(e,n,i,r){return Xo(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,n.key),n.key.path.toArray()])}wn(e,n,i){const r=Xo(e);let s=new Ne(kr);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,n)])},(o,a)=>{s=s.add(new Ws(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let i=new Ne(kr);const r=this.Vn(n,e);if(r==null)return i;const s=D_(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Ac(o))for(const a of o.arrayValue.values||[])i=i.add(new Ws(n.indexId,e.key,this.dn(a),r))}else i=i.add(new Ws(n.indexId,e.key,nf,r));return i}bn(e,n,i,r,s){z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,f,p,m){const _=l.getIterator(),S=u.getIterator();let b=Wo(_),P=Wo(S);for(;b||P;){let T=!1,v=!1;if(b&&P){const A=f(b,P);A<0?v=!0:A>0&&(T=!0)}else b!=null?v=!0:T=!0;T?(p(P),P=Wo(S)):v?(m(b),b=Wo(_)):(b=Wo(_),P=Wo(S))}}(r,s,kr,a=>{o.push(this.Dn(e,n,i,a))},a=>{o.push(this.vn(e,n,i,a))}),U.waitFor(o)}yn(e){let n=1;return Zo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((o,a)=>kr(o,a)).filter((o,a,l)=>!a||kr(o,l[a-1])!==0);const r=[];r.push(e);for(const o of i){const a=kr(o,e),l=kr(o,n);if(a===0)r[0]=e.Zt();else if(a>0&&l<0)r.push(o),r.push(o.Zt());else if(l>0)break}r.push(n);const s=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];const a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,nf,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,nf,[]];s.push(IDBKeyRange.bound(a,l))}return s}Cn(e,n){return kr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(DA)}getMinOffset(e,n){return U.mapArray(this.hn(n),i=>this.Pn(e,i).next(r=>r||Q())).next(DA)}}function NA(t){return wt(t,"collectionParents")}function Xo(t){return wt(t,"indexEntries")}function fu(t){return wt(t,"indexConfiguration")}function Zo(t){return wt(t,"indexState")}function DA(t){Z(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;wv(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Bn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yn{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.J({range:o},(f,p,m)=>(a++,m.delete()));s.push(l.next(()=>{Z(a===1)}));const u=[];for(const f of n.mutations){const p=rN(e,f.key.path,n.batchId);s.push(r.delete(p)),u.push(f.key)}return U.waitFor(s).next(()=>u)}function xh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Q();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(41943040,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);class vp{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(e,n,i,r){Z(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new vp(s,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).J({index:"userMutationsIndex",range:i},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,i,r){const s=ua(e),o=Vr(e);return o.add({}).next(a=>{Z(typeof a=="number");const l=new kv(a,n,i,r),u=function(_,S,b){const P=b.baseMutations.map(v=>Rc(_.ct,v)),T=b.mutations.map(v=>Rc(_.ct,v));return{userId:S,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:P,mutations:T}}(this.serializer,this.userId,l),f=[];let p=new Ne((m,_)=>oe(m.canonicalString(),_.canonicalString()));for(const m of r){const _=rN(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),f.push(o.put(u)),f.push(s.put(_,$4))}return p.forEach(m=>{f.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),U.waitFor(f).next(()=>l)})}lookupMutationBatch(e,n){return Vr(e).get(n).next(i=>i?(Z(i.userId===this.userId),Js(this.serializer,i)):null)}Mn(e,n){return this.Fn[n]?U.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){const r=i.keys();return this.Fn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Vr(e).J({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(Z(a.batchId>=i),s=Js(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Vr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).U("userMutationsIndex",n).next(i=>i.map(r=>Js(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Df(this.userId,n.path),r=IDBKeyRange.lowerBound(i),s=[];return ua(e).J({range:r},(o,a,l)=>{const[u,f,p]=o,m=wi(f);if(u===this.userId&&n.path.isEqual(m))return Vr(e).get(p).next(_=>{if(!_)throw Q();Z(_.userId===this.userId),s.push(Js(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(oe);const r=[];return n.forEach(s=>{const o=Df(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ua(e).J({range:a},(u,f,p)=>{const[m,_,S]=u,b=wi(_);m===this.userId&&s.path.isEqual(b)?i=i.add(S):p.done()});r.push(l)}),U.waitFor(r).next(()=>this.xn(e,i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,s=Df(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Ne(oe);return ua(e).J({range:o},(l,u,f)=>{const[p,m,_]=l,S=wi(m);p===this.userId&&i.isPrefixOf(S)?S.length===r&&(a=a.add(_)):f.done()}).next(()=>this.xn(e,a))}xn(e,n){const i=[],r=[];return n.forEach(s=>{r.push(Vr(e).get(s).next(o=>{if(o===null)throw Q();Z(o.userId===this.userId),i.push(Js(this.serializer,o))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return nD(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return U.resolve();const i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return ua(e).J({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=wi(s[1]);r.push(l)}else a.done()}).next(()=>{Z(r.length===0)})})}containsKey(e,n){return iD(e,this.userId,n)}Nn(e){return rD(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iD(t,e,n){const i=Df(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return ua(t).J({range:s,H:!0},(a,l,u)=>{const[f,p,m]=a;f===e&&p===r&&(o=!0),u.done()}).next(()=>o)}function Vr(t){return wt(t,"mutations")}function ua(t){return wt(t,"documentMutations")}function rD(t){return wt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ao(0)}static kn(){return new Ao(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const i=new Ao(n.highestTargetId);return n.highestTargetId=i.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>te.fromTimestamp(new We(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.qn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Qn(e,r)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(i=>(i.targetCount+=1,this.$n(n,i),this.Qn(e,i))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>jo(e).delete(n.targetId)).next(()=>this.qn(e)).next(i=>(Z(i.targetCount>0),i.targetCount-=1,this.Qn(e,i)))}removeTargets(e,n,i){let r=0;const s=[];return jo(e).J((o,a)=>{const l=bu(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>U.waitFor(s)).next(()=>r)}forEachTarget(e,n){return jo(e).J((i,r)=>{const s=bu(r);n(s)})}qn(e){return MA(e).get("targetGlobalKey").next(n=>(Z(n!==null),n))}Qn(e,n){return MA(e).put("targetGlobalKey",n)}Kn(e,n){return jo(e).put(jN(this.serializer,n))}$n(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const i=vo(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return jo(e).J({range:r,index:"queryTargetsIndex"},(o,a,l)=>{const u=bu(a);jc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,i){const r=[],s=Hr(e);return n.forEach(o=>{const a=un(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),U.waitFor(r)}removeMatchingKeys(e,n,i){const r=Hr(e);return U.forEach(n,s=>{const o=un(s.path);return U.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,n){const i=Hr(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Hr(e);let s=ce();return r.J({range:i,H:!0},(o,a,l)=>{const u=wi(o[1]),f=new Y(u);s=s.add(f)}).next(()=>s)}containsKey(e,n){const i=un(n.path),r=IDBKeyRange.bound([i],[Xx(i)],!1,!0);let s=0;return Hr(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return jo(e).get(n).next(i=>i?bu(i):null)}}function jo(t){return wt(t,"targets")}function MA(t){return wt(t,"targetGlobal")}function Hr(t){return wt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA([t,e],[n,i]){const r=oe(t,n);return r===0?oe(e,i):r}class l3{constructor(e){this.Un=e,this.buffer=new Ne(kA),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();kA(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class u3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xs(n)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await bs(n)}await this.Hn(3e5)})}}class c3{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Tn.oe);const i=new l3(n);return this.Jn.forEachTarget(e,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(PA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PA):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let i,r,s,o,a,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(i=p,a=Date.now(),this.removeTargets(e,i,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(u=Date.now(),sa()<=fe.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function d3(t,e){return new c3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.db=e,this.garbageCollector=d3(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}er(e){let n=0;return this.Zn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(i,r)=>n(r))}addReference(e,n,i){return rf(e,i)}removeReference(e,n,i){return rf(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return rf(e,n)}nr(e,n){return function(r,s){let o=!1;return rD(r).Y(a=>iD(r,a,s).next(l=>(l&&(o=!0),U.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const l=this.nr(e,o).next(u=>{if(!u)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,te.min()),Hr(e).delete(function(p){return[0,un(p.path)]}(o))))});r.push(l)}}).next(()=>U.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return rf(e,n)}tr(e,n){const i=Hr(e);let r,s=Tn.oe;return i.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Tn.oe&&n(new Y(wi(r)),s),s=u,r=l):s=Tn.oe}).next(()=>{s!==Tn.oe&&n(new Y(wi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rf(t,e){return Hr(t).put(function(i,r){return{targetId:0,path:un(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return qs(e).put(i)}removeEntry(e,n,i){return qs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Rh(o),a[a.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.rr(e,i)))}getEntry(e,n){let i=Ge.newInvalidDocument(n);return qs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hu(n))},(r,s)=>{i=this.ir(n,s)}).next(()=>i)}sr(e,n){let i={size:0,document:Ge.newInvalidDocument(n)};return qs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hu(n))},(r,s)=>{i={document:this.ir(n,s),size:xh(s)}}).next(()=>i)}getEntries(e,n){let i=In();return this._r(e,n,(r,s)=>{const o=this.ir(r,s);i=i.insert(r,o)}).next(()=>i)}ar(e,n){let i=In(),r=new Le(Y.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);i=i.insert(s,a),r=r.insert(s,xh(o))}).next(()=>({documents:i,ur:r}))}_r(e,n,i){if(n.isEmpty())return U.resolve();let r=new Ne(LA);n.forEach(l=>r=r.add(l));const s=IDBKeyRange.bound(hu(r.first()),hu(r.last())),o=r.getIterator();let a=o.getNext();return qs(e).J({index:"documentKeyIndex",range:s},(l,u,f)=>{const p=Y.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&LA(a,p)<0;)i(a,null),a=o.getNext();a&&a.isEqual(p)&&(i(a,u),a=o.hasNext()?o.getNext():null),a?f.$(hu(a)):f.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Rh(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qs(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let f=In();for(const p of u){const m=this.ir(Y.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(td(n,m)||r.has(m.key))&&(f=f.insert(m.key,m))}return f})}getAllFromCollectionGroup(e,n,i,r){let s=In();const o=UA(n,i),a=UA(n,Bn.max());return qs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,f)=>{const p=this.ir(Y.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(p.key,p),s.size===r&&f.done()}).next(()=>s)}newChangeBuffer(e){return new p3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return VA(e).get("remoteDocumentGlobalKey").next(n=>(Z(!!n),n))}rr(e,n){return VA(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const i=XG(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(te.min())))return i}return Ge.newInvalidDocument(e)}}function oD(t){return new h3(t)}class p3 extends sD{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Ns(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const n=[];let i=0,r=new Ne((s,o)=>oe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=EA(this.cr.serializer,o);r=r.add(s.path.popLast());const u=xh(l);i+=u-a.size,n.push(this.cr.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){const l=EA(this.cr.serializer,o.convertToNoDocument(te.min()));n.push(this.cr.addEntry(e,s,l))}}),r.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,i)),U.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(i=>(this.lr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:i,ur:r})=>(r.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function VA(t){return wt(t,"remoteDocumentGlobal")}function qs(t){return wt(t,"remoteDocumentsV14")}function hu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UA(t,e){const n=e.documentKey.path.toArray();return[t,Rh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function LA(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=oe(n[s],i[s]),r)return r;return r=oe(n.length,i.length),r||(r=oe(n[n.length-2],i[i.length-2]),r||oe(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ju(i.mutation,r,En.empty(),We.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const r=Ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Cu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=In();const o=Yu(),a=function(){return Yu()}();return n.forEach((l,u)=>{const f=i.get(u.key);r.has(u.key)&&(f===void 0||f.mutation instanceof Ir)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Ju(f.mutation,u,f.mutation.getFieldMask(),We.now())):o.set(u.key,En.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,f)=>o.set(u,f)),n.forEach((u,f)=>{var p;return a.set(u,new m3(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Yu();let r=new Le((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let f=i.get(l)||En.empty();f=a.applyToLocalView(u,f),i.set(l,f);const p=(r.get(a.batchId)||ce()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,p=CN();f.forEach(m=>{if(!s.has(m)){const _=MN(n.get(m),i.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):U.resolve(Ci());let a=-1,l=s;return o.next(u=>U.forEach(u,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{l=l.insert(f,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ce())).next(f=>({batchId:a,changes:wN(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(i=>{let r=Cu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=Cu();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const u=function(p,m){return new Er(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,Ge.newInvalidDocument(f)))});let a=Cu();return o.forEach((l,u)=>{const f=s.get(l);f!==void 0&&Ju(f.mutation,u,En.empty(),We.now()),td(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ht(r.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Fv(r.bundledQuery),readTime:ht(r.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.overlays=new Le(Y.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ci();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const r=Ci(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Le((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let f=s.get(u.largestBatchId);f===null&&(f=Ci(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Ci(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=r)););return U.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Uv(n,i));let s=this.Ir.get(n);s===void 0&&(s=ce(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.Tr=new Ne(xt.Er),this.dr=new Ne(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new xt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new xt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Y(new pe([])),i=new xt(n,e),r=new xt(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new pe([])),i=new xt(n,e),r=new xt(n,e+1);let s=ce();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ne(xt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kv(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new xt(n,0),r=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ne(oe);return n.forEach(r=>{const s=new xt(r,0),o=new xt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Y.isDocumentKey(s)||(s=s.child(""));const o=new xt(new Y(s),0);let a=new Ne(oe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Z(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return U.forEach(n.mutations,r=>{const s=new xt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new xt(n,0),r=this.br.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e){this.Mr=e,this.docs=function(){return new Le(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():Ge.newInvalidDocument(n))}getEntries(e,n){let i=In();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ge.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=In();const o=n.path,a=new Y(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||wv(jx(f),i)<=0||(r.has(f.key)||td(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Q()}Or(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new E3(this)}getSize(e){return U.resolve(this.size)}}class E3 extends sD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.persistence=e,this.Nr=new Ns(n=>vo(n),jc),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gv,this.targetCount=0,this.kr=Ao.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ao(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Tn(0),this.Kr=!1,this.Kr=!0,this.$r=new y3,this.referenceDelegate=e(this),this.Ur=new I3(this),this.indexManager=new s3,this.remoteDocumentCache=function(r){return new T3(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ZN(n),this.Gr=new g3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new v3(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){z("MemoryPersistence","Starting transaction:",e);const r=new S3(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class S3 extends tN{constructor(e){super(),this.currentSequenceNumber=e}}class Tp{constructor(e){this.persistence=e,this.Jr=new Gv,this.Yr=null}static Zr(e){return new Tp(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,i=>{const r=Y.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.serializer=e}O(e,n,i,r){const s=new hp("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XS,{unique:!0}),l.createObjectStore("documentMutations")}(e),OA(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=U.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),OA(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",f)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(f=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",XS,{unique:!0});const p=u.store("mutations"),m=f.map(_=>p.put(_));return U.waitFor(m)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.ni(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),i<7&&r>=7&&(o=o.next(()=>this.ii(s))),i<8&&r>=8&&(o=o.next(()=>this.si(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.oi(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:rG});u.createIndex("collectionPathOverlayIndex",sG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",oG,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:Y4});u.createIndex("documentKeyIndex",J4),u.createIndex("collectionGroupIndex",Q4)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ai(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:eG}).createIndex("sequenceNumberIndex",tG,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:nG}).createIndex("documentKeyIndex",iG,{unique:!1})}(e))),i<16&&r>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),i<17&&r>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=xh(r)}).next(()=>{const i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(e){const n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>U.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",o).next(a=>U.forEach(a,l=>{Z(l.userId===s.userId);const u=Js(this.serializer,l);return nD(e,s.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.J((o,a)=>{const l=new pe(o),u=function(p){return[0,un(p)]}(l);s.push(n.get(u).next(f=>f?U.resolve():(p=>n.put({targetId:0,path:un(p),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>U.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:j4});const i=n.store("collectionParents"),r=new Bv,s=o=>{if(r.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:un(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new pe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const f=wi(a);return s(f.popLast())}))}oi(e){const n=e.store("targets");return n.J((i,r)=>{const s=bu(r),o=jN(this.serializer,s);return n.put(o)})}_i(e,n){const i=n.store("remoteDocuments"),r=[];return i.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(p){return p.document?new Y(pe.fromString(p.document.name).popFirst(5)):p.noDocument?Y.fromSegments(p.noDocument.path):p.unknownDocument?Y.fromSegments(p.unknownDocument.path):Q()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>U.waitFor(r))}ai(e,n){const i=n.store("mutations"),r=oD(this.serializer),s=new lD(Tp.Zr,this.serializer.ct);return i.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let f=(u=a.get(l.userId))!==null&&u!==void 0?u:ce();Js(this.serializer,l).keys().forEach(p=>f=f.add(p)),a.set(l.userId,f)}),U.forEach(a,(l,u)=>{const f=new Dt(u),p=yp.lt(this.serializer,f),m=s.getIndexManager(f),_=vp.lt(f,this.serializer,m,s.referenceDelegate);return new aD(r,_,p,m).recalculateAndSaveOverlaysForDocumentKeys(new P_(n,Tn.oe),l).next()})})}}function OA(t){t.createObjectStore("targetDocuments",{keyPath:X4}).createIndex("documentTargetsIndex",Z4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",W4,{unique:!0}),t.createObjectStore("targetGlobal")}const sg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zv{constructor(e,n,i,r,s,o,a,l,u,f,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=f,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!zv.D())throw new G(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new f3(this,r),this.Ai=n+"main",this.serializer=new ZN(l),this.Ri=new xi(this.Ai,this.hi,new A3(this.serializer)),this.$r=new jG,this.Ur=new a3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oD(this.serializer),this.Gr=new ZG,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,f===!1&&dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(O.FAILED_PRECONDITION,sg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Tn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(xs(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pu(e).get("owner").next(n=>U.resolve(this.vi(n)))}Ci(e){return sf(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const i=wt(n,"clientMetadata");return i.U().next(r=>{const s=this.xi(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return U.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?U.resolve(!0):pu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new G(O.FAILED_PRECONDITION,sg);return!1}}return!(!this.networkEnabled||!this.inForeground)||sf(e).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){const s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new P_(e,Tn.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(i=>this.Mi(i.updateTimeMs,n)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>sf(e).U().next(n=>this.xi(n,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return vp.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new o3(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return yp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,i){z("IndexedDbPersistence","Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?uG:l===16?lG:l===15?Rv:l===14?aN:l===13?oN:l===12?aG:l===11?sN:void Q()}(this.hi);let o;return this.Ri.runTransaction(e,r,s,a=>(o=new P_(a,this.Qr?this.Qr.next():Tn.oe),n==="readwrite-primary"?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new G(O.FAILED_PRECONDITION,eN);return i(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return pu(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G(O.FAILED_PRECONDITION,sg)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pu(e).put("owner",n)}static D(){return xi.D()}bi(e){const n=pu(e);return n.get("owner").next(i=>this.vi(i)?(z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):U.resolve())}Mi(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(dt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;bx()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const i=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return dt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){dt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pu(t){return wt(t,"owner")}function sf(t){return wt(t,"clientMetadata")}function Hv(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=ce(),r=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Kv(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bx()?8:nN(je())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new w3;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(sa()<=fe.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",oa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(sa()<=fe.DEBUG&&z("QueryEngine","Query:",oa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(sa()<=fe.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",oa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):U.resolve())}Yi(e,n){if(cA(n))return U.resolve(null);let i=cn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ch(n,null,"F"),i=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=ce(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Ch(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return cA(n)||r.isEqual(te.min())?U.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?U.resolve(null):(sa()<=fe.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),oa(n)),this.rs(e,o,n,Zx(r,-1)).next(a=>a))})}ts(e,n){let i=new Ne(SN(e));return n.forEach((r,s)=>{td(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return sa()<=fe.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",oa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Bn.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Le(oe),this._s=new Ns(s=>vo(s),jc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function cD(t,e,n,i){return new C3(t,e,n,i)}async function dD(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ce();for(const u of r){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function R3(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const p=u.batch,m=p.keys();let _=U.resolve();return m.forEach(S=>{_=_.next(()=>f.getEntry(l,S)).next(b=>{const P=u.docVersions.get(S);Z(P!==null),b.version.compareTo(P)<0&&(p.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),f.addEntry(b)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function fD(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function b3(t,e){const n=J(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((f,p)=>{const m=r.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ot.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,i)),r=r.insert(p,_),function(b,P,T){return b.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,_,f)&&a.push(n.Ur.updateTargetData(s,_))});let l=In(),u=ce();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(hD(s,o,e.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!i.isEqual(te.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(f)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function hD(t,e,n){let i=ce(),r=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=In();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function x3(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function ol(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new ji(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function al(t,e,n){const i=J(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!xs(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Nh(t,e,n){const i=J(t);let r=te.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){const p=J(l),m=p._s.get(f);return m!==void 0?U.resolve(p.os.get(m)):p.Ur.getTargetData(u,f)}(i,o,cn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:te.min(),n?s:ce())).next(a=>(gD(i,IN(e),a),{documents:a,Ts:s})))}function pD(t,e){const n=J(t),i=J(n.Ur),r=n.os.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>i.ot(s,e).next(o=>o?o.target:null))}function mD(t,e){const n=J(t),i=n.us.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.cs.getAllFromCollectionGroup(r,e,Zx(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(gD(n,e,r),r))}function gD(t,e,n){let i=t.us.get(e)||te.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}async function N3(t,e,n,i){const r=J(t);let s=ce(),o=In();for(const u of n){const f=e.Es(u.metadata.name);u.document&&(s=s.add(f));const p=e.ds(u);p.setReadTime(e.As(u.metadata.readTime)),o=o.insert(f,p)}const a=r.cs.newChangeBuffer({trackRemovals:!0}),l=await ol(r,function(f){return cn(bl(pe.fromString(`__bundle__/docs/${f}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>hD(u,a,o).next(f=>(a.apply(u),f)).next(f=>r.Ur.removeMatchingKeysForTargetId(u,l.targetId).next(()=>r.Ur.addMatchingKeys(u,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,f.Ps,f.Is)).next(()=>f.Ps)))}async function D3(t,e,n=ce()){const i=await ol(t,cn(Fv(e.bundledQuery))),r=J(t);return r.persistence.runTransaction("Save named query","readwrite",s=>{const o=ht(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return r.Gr.saveNamedQuery(s,e);const a=i.withResumeToken(ot.EMPTY_BYTE_STRING,o);return r.os=r.os.insert(a.targetId,a),r.Ur.updateTargetData(s,a).next(()=>r.Ur.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Ur.addMatchingKeys(s,n,i.targetId)).next(()=>r.Gr.saveNamedQuery(s,e))})}function FA(t,e){return`firestore_clients_${t}_${e}`}function qA(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function og(t,e){return`firestore_targets_${t}_${e}`}class Dh{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Rs(e,n,i){const r=JSON.parse(i);let s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new G(r.error.code,r.error.message))),o?new Dh(e,n,r.state,s):(dt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qu{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Rs(e,n){const i=JSON.parse(n);let r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new G(i.error.code,i.error.message))),s?new Qu(e,i.state,r):(dt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ph{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const i=JSON.parse(n);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=Dv();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=iN(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new Ph(e,s):(dt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class $v{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new $v(n.clientId,n.onlineState):(dt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $_{constructor(){this.activeTargetIds=Dv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ag{constructor(e,n,i,r,s){this.window=e,this.ui=n,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Le(oe),this.started=!1,this.bs=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=FA(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new $_),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const i of e){if(i===this.ps)continue;const r=this.getItem(FA(this.persistenceKey,i));if(r){const s=Ph.Rs(i,r);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const n=this.storage.getItem(this.xs);if(n){const i=this.Ls(n);i&&this.Bs(i)}for(const i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,i){this.qs(e,n,i),this.Qs(e)}addLocalQueryTarget(e,n=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(og(this.persistenceKey,e));if(r){const s=Qu.Rs(e,r);s&&(i=s.state)}}return n&&this.Ks.fs(e),this.Ns(),i}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(og(this.persistenceKey,e))}updateQueryState(e,n,i){this.$s(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Qs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return z("SharedClientState","READ",e,n),n}setItem(e,n){z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const n=e;if(n.storageArea===this.storage){if(z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){const i=this.Gs(n.key);return this.zs(i,null)}{const i=this.js(n.key,n.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){const i=this.Hs(n.key,n.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){const i=this.Ys(n.key,n.newValue);if(i)return this.Zs(i)}}else if(n.key===this.xs){if(n.newValue!==null){const i=this.Ls(n.newValue);if(i)return this.Bs(i)}}else if(n.key===this.vs){const i=function(s){let o=Tn.oe;if(s!=null)try{const a=JSON.parse(s);Z(typeof a=="number"),o=a}catch(a){dt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);i!==Tn.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Os){const i=this.Xs(n.newValue);await Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(n)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,i){const r=new Dh(this.currentUser,e,n,i),s=qA(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){const n=qA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){const n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,i){const r=og(this.persistenceKey,e),s=new Qu(e,n,i);this.setItem(r,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const i=this.Gs(e);return Ph.Rs(i,n)}Hs(e,n){const i=this.Fs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Dh.Rs(new Dt(s),r,n)}Ys(e,n){const i=this.Ms.exec(e),r=Number(i[1]);return Qu.Rs(r,n)}Ls(e){return $v.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const i=n?this.Ss.insert(e,n):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=i})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Dv();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class _D{constructor(){this.so=new $_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function lg(){return of===null?of=function(){return 268435456+Math.round(2147483648*Math.random())}():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class V3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=lg(),l=this.xo(n,i.toUriEncodedString());z("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(f=>(z("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw Pi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=M3[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=lg();return new Promise((o,a)=>{const l=new Hx;l.setWithCredentials(!0),l.listenOnce(Kx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xf.NO_ERROR:const f=l.getResponseJson();z(Qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case xf.TIMEOUT:z(Qt,`RPC '${e}' ${s} timed out`),a(new G(O.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const p=l.getStatus();if(z(Qt,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const S=function(P){const T=P.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(T)>=0?T:O.UNKNOWN}(_.status);a(new G(S,_.message))}else a(new G(O.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(O.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{z(Qt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);z(Qt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=lg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jx(),a=Yx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const f=s.join("");z(Qt,`Creating RPC '${e}' stream ${r}: ${f}`,l);const p=o.createWebChannel(f,l);let m=!1,_=!1;const S=new k3({Io:P=>{_?z(Qt,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(m||(z(Qt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),z(Qt,`RPC '${e}' stream ${r} sending:`,P),p.send(P))},To:()=>p.close()}),b=(P,T,v)=>{P.listen(T,A=>{try{v(A)}catch(N){setTimeout(()=>{throw N},0)}})};return b(p,wu.EventType.OPEN,()=>{_||(z(Qt,`RPC '${e}' stream ${r} transport opened.`),S.yo())}),b(p,wu.EventType.CLOSE,()=>{_||(_=!0,z(Qt,`RPC '${e}' stream ${r} transport closed`),S.So())}),b(p,wu.EventType.ERROR,P=>{_||(_=!0,Pi(Qt,`RPC '${e}' stream ${r} transport errored:`,P),S.So(new G(O.UNAVAILABLE,"The operation could not be completed")))}),b(p,wu.EventType.MESSAGE,P=>{var T;if(!_){const v=P.data[0];Z(!!v);const A=v,N=A.error||((T=A[0])===null||T===void 0?void 0:T.error);if(N){z(Qt,`RPC '${e}' stream ${r} received error:`,N);const L=N.status;let F=function(w){const x=gt[w];if(x!==void 0)return UN(x)}(L),C=N.message;F===void 0&&(F=O.INTERNAL,C="Unknown error status: "+L+" with message "+N.message),_=!0,S.So(new G(F,C)),p.close()}else z(Qt,`RPC '${e}' stream ${r} received:`,v),S.bo(v)}}),b(a,$x.STAT_EVENT,P=>{P.stat===N_.PROXY?z(Qt,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===N_.NOPROXY&&z(Qt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(){return typeof window<"u"?window:null}function Uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){return new BG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yv(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(dt(n.toString()),dt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new G(O.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U3 extends vD{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HG(this.serializer,e),i=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?ht(o.readTime):te.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=B_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Ah(l)?{documents:$N(s,l)}:{query:YN(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qN(s,o.resumeToken);const u=F_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=sl(s,o.snapshotVersion.toTimestamp());const u=F_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=$G(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=B_(this.serializer),n.removeTarget=e,this.a_(n)}}class L3 extends vD{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Z(!!e.streamToken),this.lastStreamToken=e.streamToken,Z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KG(e.writeResults,e.commitTime),i=ht(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=B_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>Rc(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,q_(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(O.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,q_(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(O.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class F3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(dt(n),this.D_=!1):z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Ds(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=J(l);u.L_.add(4),await Dl(u),u.q_.set("Unknown"),u.L_.delete(4),await od(u)}(this))})}),this.q_=new F3(i,r)}}async function od(t){if(Ds(t))for(const e of t.B_)await e(!0)}async function Dl(t){for(const e of t.B_)await e(!1)}function Ep(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wv(n)?Qv(n):Ml(n).r_()&&Jv(n,e))}function ll(t,e){const n=J(t),i=Ml(n);n.N_.delete(e),i.r_()&&TD(n,e),n.N_.size===0&&(i.r_()?i.o_():Ds(n)&&n.q_.set("Unknown"))}function Jv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(t).A_(e)}function TD(t,e){t.Q_.xe(e),Ml(t).R_(e)}function Qv(t){t.Q_=new LG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ml(t).start(),t.q_.v_()}function Wv(t){return Ds(t)&&!Ml(t).n_()&&t.N_.size>0}function Ds(t){return J(t).L_.size===0}function ED(t){t.Q_=void 0}async function B3(t){t.q_.set("Online")}async function G3(t){t.N_.forEach((e,n)=>{Jv(t,e)})}async function z3(t,e){ED(t),Wv(t)?(t.q_.M_(e),Qv(t)):t.q_.set("Unknown")}async function H3(t,e,n){if(t.q_.set("Online"),e instanceof FN&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mh(t,i)}else if(e instanceof Vf?t.Q_.Ke(e):e instanceof ON?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const i=await fD(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.N_.get(u);f&&s.N_.set(u,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(ot.EMPTY_BYTE_STRING,f.snapshotVersion)),TD(s,l);const p=new ji(f.target,l,u,f.sequenceNumber);Jv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){z("RemoteStore","Failed to raise snapshot:",i),await Mh(t,i)}}async function Mh(t,e,n){if(!xs(e))throw e;t.L_.add(1),await Dl(t),t.q_.set("Offline"),n||(n=()=>fD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await od(t)})}function ID(t,e){return e().catch(n=>Mh(t,n,e))}async function Pl(t){const e=J(t),n=Is(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;K3(e);)try{const r=await x3(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,$3(e,r)}catch(r){await Mh(e,r)}SD(e)&&AD(e)}function K3(t){return Ds(t)&&t.O_.length<10}function $3(t,e){t.O_.push(e);const n=Is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function SD(t){return Ds(t)&&!Is(t).n_()&&t.O_.length>0}function AD(t){Is(t).start()}async function Y3(t){Is(t).p_()}async function J3(t){const e=Is(t);for(const n of t.O_)e.m_(n.mutations)}async function Q3(t,e,n){const i=t.O_.shift(),r=Vv.from(i,e,n);await ID(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Pl(t)}async function W3(t,e){e&&Is(t).V_&&await async function(i,r){if(function(o){return VN(o)&&o!==O.ABORTED}(r.code)){const s=i.O_.shift();Is(i).s_(),await ID(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Pl(i)}}(t,e),SD(t)&&AD(t)}async function GA(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const i=Ds(n);n.L_.add(3),await Dl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await od(n)}async function Y_(t,e){const n=J(t);e?(n.L_.delete(2),await od(n)):e||(n.L_.add(2),await Dl(n),n.q_.set("Unknown"))}function Ml(t){return t.K_||(t.K_=function(n,i,r){const s=J(n);return s.w_(),new U3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:B3.bind(null,t),Ro:G3.bind(null,t),mo:z3.bind(null,t),d_:H3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Wv(t)?Qv(t):t.q_.set("Unknown")):(await t.K_.stop(),ED(t))})),t.K_}function Is(t){return t.U_||(t.U_=function(n,i,r){const s=J(n);return s.w_(),new L3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Y3.bind(null,t),mo:W3.bind(null,t),f_:J3.bind(null,t),g_:Q3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Pl(t)):(await t.U_.stop(),t.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Xv(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kl(t,e){if(dt("AsyncQueue",`${e}: ${t}`),xs(t))return new G(O.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=Cu(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Va(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Va;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.W_=new Le(Y.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class ul{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ul(e,n,Va.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Z3{constructor(){this.queries=HA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=HA(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new G(O.ABORTED,"Firestore shutting down"))}}function HA(){return new Ns(t=>EN(t),ed)}async function Zv(t,e){const n=J(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new X3,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=kl(o,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&eT(n)}async function jv(t,e){const n=J(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function j3(t,e){const n=J(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&eT(n)}function ez(t,e,n){const i=J(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function eT(t){t.Y_.forEach(e=>{e.next()})}var J_,KA;(KA=J_||(J_={})).ea="default",KA.Cache="cache";class tT{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==J_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.serializer=e}Es(e){return Ni(this.serializer,e)}ds(e){return e.metadata.exists?KN(this.serializer,e.document,!1):Ge.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ht(e)}}class nz{constructor(e,n,i){this.ca=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wD(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const i=pe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,i=new $A(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.Es(r.metadata.name);for(const o of r.metadata.queries){const a=(n.get(o)||ce()).add(s);n.set(o,a)}}return n}async complete(){const e=await N3(this.localStore,new $A(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(const i of this.queries)await D3(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function wD(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.key=e}}class RD{constructor(e){this.key=e}}class bD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=SN(e),this.Ra=new Va(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new zA,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{const m=r.get(f),_=td(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let P=!1;m&&_?m.data.isEqual(_.data)?S!==b&&(i.track({type:3,doc:_}),P=!0):this.ga(m,_)||(i.track({type:2,doc:_}),P=!0,(l&&this.Aa(_,l)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!m&&_?(i.track({type:0,doc:_}),P=!0):m&&!_&&(i.track({type:1,doc:m}),P=!0,(l||u)&&(a=!0)),P&&(_?(o=o.add(_),s=b?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,S){const b=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return b(_)-b(S)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ul(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new zA,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ce(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new RD(i))}),this.da.forEach(i=>{e.has(i)||n.push(new CD(i))}),n}ba(e){this.Ta=e.Ts,this.da=ce();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ul.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class iz{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rz{constructor(e){this.key=e,this.va=!1}}class sz{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ns(a=>EN(a),ed),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(Y.comparator),this.Na=new Map,this.La=new Gv,this.Ba={},this.ka=new Map,this.qa=Ao.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function oz(t,e,n=!0){const i=Ip(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await xD(i,e,n,!0),r}async function az(t,e){const n=Ip(t);await xD(n,e,!0,!1)}async function xD(t,e,n,i){const r=await ol(t.localStore,cn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await nT(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&Ep(t.remoteStore,r),a}async function nT(t,e,n,i,r){t.Ka=(p,m,_)=>async function(b,P,T,v){let A=P.view.ma(T);A.ns&&(A=await Nh(b.localStore,P.query,!1).then(({documents:C})=>P.view.ma(C,A)));const N=v&&v.targetChanges.get(P.targetId),L=v&&v.targetMismatches.get(P.targetId)!=null,F=P.view.applyChanges(A,b.isPrimaryClient,N,L);return Q_(b,P.targetId,F.wa),F.snapshot}(t,p,m,_);const s=await Nh(t.localStore,e,!0),o=new bD(e,s.Ts),a=o.ma(s.documents),l=rd.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Q_(t,n,u.wa);const f=new iz(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function lz(t,e,n){const i=J(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!ed(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await al(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&ll(i.remoteStore,r.targetId),cl(i,r.targetId)}).catch(bs)):(cl(i,r.targetId),await al(i.localStore,r.targetId,!0))}async function uz(t,e){const n=J(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ll(n.remoteStore,i.targetId))}async function cz(t,e,n){const i=oT(t);try{const r=await function(o,a){const l=J(o),u=We.now(),f=a.reduce((_,S)=>_.add(S.key),ce());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let S=In(),b=ce();return l.cs.getEntries(_,f).next(P=>{S=P,S.forEach((T,v)=>{v.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,S)).next(P=>{p=P;const T=[];for(const v of a){const A=kG(v,p.get(v.key).overlayedDocument);A!=null&&T.push(new Ir(v.key,A,fN(A.value.mapValue),Qe.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,T,a)}).next(P=>{m=P;const T=P.applyToLocalDocumentSet(p,b);return l.documentOverlayCache.saveOverlays(_,P.batchId,T)})}).then(()=>({batchId:m.batchId,changes:wN(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Le(oe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await Sr(i,r.changes),await Pl(i.remoteStore)}catch(r){const s=kl(r,"Failed to persist write");n.reject(s)}}async function ND(t,e){const n=J(t);try{const i=await b3(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Z(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Z(o.va):r.removedDocuments.size>0&&(Z(o.va),o.va=!1))}),await Sr(n,i,e)}catch(i){await bs(i)}}function YA(t,e,n){const i=J(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=J(o);l.onlineState=a;let u=!1;l.queries.forEach((f,p)=>{for(const m of p.j_)m.Z_(a)&&(u=!0)}),u&&eT(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dz(t,e,n){const i=J(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Le(Y.comparator);o=o.insert(s,Ge.newNoDocument(s,te.min()));const a=ce().add(s),l=new id(te.min(),new Map,new Le(oe),o,a);await ND(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),sT(i)}else await al(i.localStore,e,!1).then(()=>cl(i,e,n)).catch(bs)}async function fz(t,e){const n=J(t),i=e.batch.batchId;try{const r=await R3(n.localStore,e);rT(n,i,null),iT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Sr(n,r)}catch(r){await bs(r)}}async function hz(t,e,n){const i=J(t);try{const r=await function(o,a){const l=J(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Z(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(i.localStore,e);rT(i,e,n),iT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Sr(i,r)}catch(r){await bs(r)}}async function pz(t,e){const n=J(t);Ds(n.remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await function(o){const a=J(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void e.resolve();const r=n.ka.get(i)||[];r.push(e),n.ka.set(i,r)}catch(i){const r=kl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function iT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function rT(t,e,n){const i=J(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function cl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||DD(t,i)})}function DD(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ll(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sT(t))}function Q_(t,e,n){for(const i of n)i instanceof CD?(t.La.addReference(i.key,e),mz(t,i)):i instanceof RD?(z("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||DD(t,i.key)):Q()}function mz(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(z("SyncEngine","New document in limbo: "+n),t.xa.add(i),sT(t))}function sT(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(pe.fromString(e)),i=t.qa.next();t.Na.set(i,new rz(n)),t.Oa=t.Oa.insert(n,i),Ep(t.remoteStore,new ji(cn(bl(n.path)),i,"TargetPurposeLimboResolution",Tn.oe))}}async function Sr(t,e,n){const i=J(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var f;if((u||n)&&i.isPrimaryClient){const p=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){r.push(u);const p=Kv.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const f=J(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(u,m=>U.forEach(m.$i,_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>U.forEach(m.Ui,_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!xs(p))throw p;z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=f.os.get(m),S=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(m,b)}}}(i.localStore,s))}async function gz(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const i=await dD(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(O.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sr(n,i.hs)}}function _z(t,e){const n=J(t),i=n.Na.get(e);if(i&&i.va)return ce().add(i.key);{let r=ce();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}async function yz(t,e){const n=J(t),i=await Nh(n.localStore,e.query,!0),r=e.view.ba(i);return n.isPrimaryClient&&Q_(n,e.targetId,r.wa),r}async function vz(t,e){const n=J(t);return mD(n.localStore,e).then(i=>Sr(n,i))}async function Tz(t,e,n,i){const r=J(t),s=await function(a,l){const u=J(a),f=J(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",p=>f.Mn(p,l).next(m=>m?u.localDocuments.getDocuments(p,m):U.resolve(null)))}(r.localStore,e);s!==null?(n==="pending"?await Pl(r.remoteStore):n==="acknowledged"||n==="rejected"?(rT(r,e,i||null),iT(r,e),function(a,l){J(J(a).mutationQueue).On(l)}(r.localStore,e)):Q(),await Sr(r,s)):z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Ez(t,e){const n=J(t);if(Ip(n),oT(n),e===!0&&n.Qa!==!0){const i=n.sharedClientState.getAllActiveQueryTargets(),r=await JA(n,i.toArray());n.Qa=!0,await Y_(n.remoteStore,!0);for(const s of r)Ep(n.remoteStore,s)}else if(e===!1&&n.Qa!==!1){const i=[];let r=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(cl(n,o),al(n.localStore,o,!0))),ll(n.remoteStore,o)}),await r,await JA(n,i),function(o){const a=J(o);a.Na.forEach((l,u)=>{ll(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Le(Y.comparator)}(n),n.Qa=!1,await Y_(n.remoteStore,!1)}}async function JA(t,e,n){const i=J(t),r=[],s=[];for(const o of e){let a;const l=i.Ma.get(o);if(l&&l.length!==0){a=await ol(i.localStore,cn(l[0]));for(const u of l){const f=i.Fa.get(u),p=await yz(i,f);p.snapshot&&s.push(p.snapshot)}}else{const u=await pD(i.localStore,o);a=await ol(i.localStore,u),await nT(i,PD(u),o,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(s),r}function PD(t){return TN(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Iz(t){return function(n){return J(J(n).persistence).Qi()}(J(t).localStore)}async function Sz(t,e,n,i){const r=J(t);if(r.Qa)return void z("SyncEngine","Ignoring unexpected query state notification.");const s=r.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await mD(r.localStore,IN(s[0])),a=id.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ot.EMPTY_BYTE_STRING);await Sr(r,o,a);break}case"rejected":await al(r.localStore,e,!0),cl(r,e,i);break;default:Q()}}async function Az(t,e,n){const i=Ip(t);if(i.Qa){for(const r of e){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){z("SyncEngine","Adding an already active target "+r);continue}const s=await pD(i.localStore,r),o=await ol(i.localStore,s);await nT(i,PD(s),o.targetId,!1,o.resumeToken),Ep(i.remoteStore,o)}for(const r of n)i.Ma.has(r)&&await al(i.localStore,r,!1).then(()=>{ll(i.remoteStore,r),cl(i,r)}).catch(bs)}}function Ip(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ND.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_z.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dz.bind(null,e),e.Ca.d_=j3.bind(null,e.eventManager),e.Ca.$a=ez.bind(null,e.eventManager),e}function oT(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hz.bind(null,e),e}function wz(t,e,n){const i=J(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(_,S){const b=J(_),P=ht(S.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",T=>b.Gr.getBundleMetadata(T,S.id)).then(T=>!!T&&T.createTime.compareTo(P)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(_){return{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(wD(l));const u=new nz(l,s.localStore,o.serializer);let f=await o.Ua();for(;f;){const m=await u.la(f);m&&a._updateProgress(m),f=await o.Ua()}const p=await u.complete();return await Sr(s,p.Ia,void 0),await function(_,S){const b=J(_);return b.persistence.runTransaction("Save bundle","readwrite",P=>b.Gr.saveBundleMetadata(P,S))}(s.localStore,l),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(l){return Pi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return cD(this.persistence,new uD,e.initialUser,this.serializer)}Ga(e){return new lD(Tp.Zr,this.serializer)}Wa(e){return new _D}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class MD extends bc{constructor(e,n,i){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await oT(this.Ja.syncEngine),await Pl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return cD(this.persistence,new uD,e.initialUser,this.serializer)}ja(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new u3(i,e.asyncQueue,n)}Ha(e,n){const i=new H4(n,this.persistence);return new z4(e.asyncQueue,i)}Ga(e){const n=Hv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new zv(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,yD(),Uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new _D}}class Cz extends MD{constructor(e,n){super(e,n,!1),this.Ja=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ja.syncEngine;this.sharedClientState instanceof ag&&(this.sharedClientState.syncEngine={no:Tz.bind(null,n),ro:Sz.bind(null,n),io:Az.bind(null,n),Qi:Iz.bind(null,n),eo:vz.bind(null,n)},await this.sharedClientState.start()),await this.persistence.yi(async i=>{await Ez(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())})}Wa(e){const n=yD();if(!ag.D(n))throw new G(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Hv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ag(n,e.asyncQueue,i,e.clientId,e.initialUser)}}class xc{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>YA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gz.bind(null,this.syncEngine),await Y_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Z3}()}createDatastore(e){const n=sd(e.databaseInfo.databaseId),i=function(s){return new V3(s)}(e.databaseInfo);return function(s,o,a,l){return new O3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new q3(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>YA(this.syncEngine,n,0),function(){return BA.D()?new BA:new P3}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,f){const p=new sz(r,s,o,a,l,u);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=J(r);z("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Dl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xc.provider={build:()=>new xc};function QA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):dt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,n){this.Xa=e,this.serializer=n,this.metadata=new zt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const n=this.eu.decode(e),i=Number(n);isNaN(i)&&this.ru(`length string (${n}) is not valid number`);const r=await this.iu(i);return new tz(JSON.parse(r),e.length+i)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const n=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=J(r),a={documents:s.map(p=>Cc(o.serializer,p))},l=await o.Lo("BatchGetDocuments",o.serializer.databaseId,pe.emptyPath(),a,s.length),u=new Map;l.forEach(p=>{const m=zG(o.serializer,p);u.set(m.key.toString(),m)});const f=[];return s.forEach(p=>{const m=u.get(p.toString());Z(!!m),f.push(m)}),f}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Nl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const r=Y.fromPath(i);this.mutations.push(new Mv(r,this.precondition(r)))}),await async function(i,r){const s=J(i),o={writes:r.map(a=>Rc(s.serializer,a))};await s.Mo("Commit",s.serializer.databaseId,pe.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Q();n=te.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new G(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?Qe.exists(!1):Qe.updateTime(n):Qe.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new G(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qe.updateTime(n)}return Qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n,i,r,s){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this._u=i.maxAttempts,this.t_=new Yv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new bz(this.datastore),n=this.cu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})})}cu(e){try{const n=this.updateFunction(e);return!Zc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!VN(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Dt.UNAUTHENTICATED,this.clientId=Wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=kl(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ug(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await dD(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function WA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aT(t);z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>GA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>GA(e.remoteStore,r)),t._onlineComponents=e}async function aT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await ug(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===O.FAILED_PRECONDITION||r.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),await ug(t,new bc)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await ug(t,new bc);return t._offlineComponents}async function Ap(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await WA(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await WA(t,new xc))),t._onlineComponents}function kD(t){return aT(t).then(e=>e.persistence)}function lT(t){return aT(t).then(e=>e.localStore)}function VD(t){return Ap(t).then(e=>e.remoteStore)}function uT(t){return Ap(t).then(e=>e.syncEngine)}function Dz(t){return Ap(t).then(e=>e.datastore)}async function dl(t){const e=await Ap(t),n=e.eventManager;return n.onListen=oz.bind(null,e.syncEngine),n.onUnlisten=lz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=az.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uz.bind(null,e.syncEngine),n}function Pz(t){return t.asyncQueue.enqueue(async()=>{const e=await kD(t),n=await VD(t);return e.setNetworkEnabled(!0),function(r){const s=J(r);return s.L_.delete(0),od(s)}(n)})}function Mz(t){return t.asyncQueue.enqueue(async()=>{const e=await kD(t),n=await VD(t);return e.setNetworkEnabled(!1),async function(r){const s=J(r);s.L_.add(0),await Dl(s),s.q_.set("Offline")}(n)})}function kz(t,e){const n=new zt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,o){try{const a=await function(u,f){const p=J(u);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,f))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new G(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=kl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await lT(t),e,n)),n.promise}function UD(t,e,n={}){const i=new zt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const f=new Sp({next:m=>{f.Za(),o.enqueueAndForget(()=>jv(s,p));const _=m.docs.has(a);!_&&m.fromCache?u.reject(new G(O.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new G(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new tT(bl(a.path),f,{includeMetadataChanges:!0,_a:!0});return Zv(s,p)}(await dl(t),t.asyncQueue,e,n,i)),i.promise}function Vz(t,e){const n=new zt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,o){try{const a=await Nh(r,s,!0),l=new bD(s,a.Ts),u=l.ma(a.documents),f=l.applyChanges(u,!1);o.resolve(f.snapshot)}catch(a){const l=kl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await lT(t),e,n)),n.promise}function LD(t,e,n={}){const i=new zt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const f=new Sp({next:m=>{f.Za(),o.enqueueAndForget(()=>jv(s,p)),m.fromCache&&l.source==="server"?u.reject(new G(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new tT(a,f,{includeMetadataChanges:!0,_a:!0});return Zv(s,p)}(await dl(t),t.asyncQueue,e,n,i)),i.promise}function Uz(t,e){const n=new Sp(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){J(r).Y_.add(s),s.next()}(await dl(t),n)),()=>{n.Za(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){J(r).Y_.delete(s)}(await dl(t),n))}}function Lz(t,e,n,i){const r=function(o,a){let l;return l=typeof o=="string"?LN().encode(o):o,function(f,p){return new Rz(f,p)}(function(f,p){if(f instanceof Uint8Array)return QA(f,p);if(f instanceof ArrayBuffer)return QA(new Uint8Array(f),p);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,sd(e));t.asyncQueue.enqueueAndForget(async()=>{wz(await uT(t),r,i)})}function Oz(t,e){return t.asyncQueue.enqueue(async()=>function(i,r){const s=J(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,r))}(await lT(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e,n){if(!n)throw new G(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FD(t,e,n,i){if(e===!0&&i===!0)throw new G(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZA(t){if(!Y.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jA(t){if(Y.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Te(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wp(t);throw new G(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qD(t,e){if(e<=0)throw new G(O.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OD((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ew({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ew(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new P4;switch(i.type){case"firstParty":return new U4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=XA.get(n);i&&(z("ComponentProvider","Removing Datastore"),XA.delete(n),i.terminate())}(this),Promise.resolve()}}function Fz(t,e,n,i={}){var r;const s=(t=Te(t,ad))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Dt.MOCK_USER;else{a=Ax(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new G(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Dt(u)}t._authCredentials=new M4(new Qx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class BD{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new BD(this.firestore,e,this._query)}},Ze=class GD{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new GD(this.firestore,e,this._key)}},cs=class zD extends dn{constructor(e,n,i){super(e,n,bl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new Y(e))}withConverter(e){return new zD(this.firestore,e,this._path)}};function HD(t,e,...n){if(t=ee(t),cT("collection","path",e),t instanceof ad){const i=pe.fromString(e,...n);return jA(i),new cs(t,null,i)}{if(!(t instanceof Ze||t instanceof cs))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pe.fromString(e,...n));return jA(i),new cs(t.firestore,null,i)}}function qz(t,e){if(t=Te(t,ad),cT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(O.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dn(t,null,function(i){return new Er(pe.emptyPath(),i)}(e))}function kh(t,e,...n){if(t=ee(t),arguments.length===1&&(e=Wx.newId()),cT("doc","path",e),t instanceof ad){const i=pe.fromString(e,...n);return ZA(i),new Ze(t,null,new Y(i))}{if(!(t instanceof Ze||t instanceof cs))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pe.fromString(e,...n));return ZA(i),new Ze(t.firestore,t instanceof cs?t.converter:null,new Y(i))}}function KD(t,e){return t=ee(t),e=ee(e),(t instanceof Ze||t instanceof cs)&&(e instanceof Ze||e instanceof cs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function $D(t,e){return t=ee(t),e=ee(e),t instanceof dn&&e instanceof dn&&t.firestore===e.firestore&&ed(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yv(this,"async_queue_retry"),this.Vu=()=>{const i=Uf();i&&z("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Uf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Uf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xs(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw dt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=Xv.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function W_(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Bz{constructor(){this._progressObserver={},this._taskCompletionResolver=new zt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=-1;let pt=class extends ad{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new tw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tw(e),this._firestoreClient=void 0,await e}}};function jt(t){if(t._terminated)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YD(t),t._firestoreClient}function YD(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,f){return new fG(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,OD(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Nz(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function zz(t,e){Pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return JD(t,xc.provider,{build:i=>new MD(i,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Hz(t){Pi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();JD(t,xc.provider,{build:n=>new Cz(n,e.cacheSizeBytes)})}function JD(t,e,n){if((t=Te(t,pt))._firestoreClient||t._terminated)throw new G(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new G(O.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},YD(t)}function Kz(t){if(t._initialized&&!t._terminated)throw new G(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(i){if(!xi.D())return Promise.resolve();const r=i+"main";await xi.delete(r)}(Hv(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function $z(t){return function(n){const i=new zt;return n.asyncQueue.enqueueAndForget(async()=>pz(await uT(n),i)),i.promise}(jt(t=Te(t,pt)))}function Yz(t){return Pz(jt(t=Te(t,pt)))}function Jz(t){return Mz(jt(t=Te(t,pt)))}function Qz(t,e){const n=jt(t=Te(t,pt)),i=new Bz;return Lz(n,t._databaseId,e,i),i}function Wz(t,e){return Oz(jt(t=Te(t,pt)),e).then(n=>n?new dn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(ot.fromBase64String(e))}catch(n){throw new G(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ki(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ss=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=/^__.*__$/;class Zz{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new xl(e,this.data,n,this.fieldTransforms)}}class QD{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function WD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Rp{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(WD(this.Cu)&&Xz.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sd(e)}Qu(e,n,i,r=!1){return new Rp({Cu:e,methodName:n,qu:i,path:Je.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fo(t){const e=t._freezeSettings(),n=sd(t._databaseId);return new jz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bp(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);yT("Data must be an object, but it was:",o,i);const a=jD(i,o);let l,u;if(s.merge)l=new En(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const m=X_(e,p,n);if(!o.contains(m))throw new G(O.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);tP(f,m)||f.push(m)}l=new En(f),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new Zz(new qt(a),l,u)}class ld extends Oo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function XD(t,e,n){return new Rp({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fT extends Oo{_toFieldTransform(e){return new nd(e.path,new il)}isEqual(e){return e instanceof fT}}class hT extends Oo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=XD(this,e,!0),i=this.Ku.map(s=>qo(s,n)),r=new To(i);return new nd(e.path,r)}isEqual(e){return e instanceof hT&&gc(this.Ku,e.Ku)}}class pT extends Oo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=XD(this,e,!0),i=this.Ku.map(s=>qo(s,n)),r=new Eo(i);return new nd(e.path,r)}isEqual(e){return e instanceof pT&&gc(this.Ku,e.Ku)}}class mT extends Oo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new rl(e.serializer,bN(e.serializer,this.$u));return new nd(e.path,n)}isEqual(e){return e instanceof mT&&this.$u===e.$u}}function gT(t,e,n,i){const r=t.Qu(1,e,n);yT("Data must be an object, but it was:",r,i);const s=[],o=qt.empty();Lo(i,(l,u)=>{const f=vT(e,l,n);u=ee(u);const p=r.Nu(f);if(u instanceof ld)s.push(f);else{const m=qo(u,p);m!=null&&(s.push(f),o.set(f,m))}});const a=new En(s);return new QD(o,a,r.fieldTransforms)}function _T(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[X_(e,i,n)],l=[r];if(s.length%2!=0)throw new G(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(X_(e,s[m])),l.push(s[m+1]);const u=[],f=qt.empty();for(let m=a.length-1;m>=0;--m)if(!tP(u,a[m])){const _=a[m];let S=l[m];S=ee(S);const b=o.Nu(_);if(S instanceof ld)u.push(_);else{const P=qo(S,b);P!=null&&(u.push(_),f.set(_,P))}}const p=new En(u);return new QD(f,p,o.fieldTransforms)}function ZD(t,e,n,i=!1){return qo(n,t.Qu(i?4:3,e))}function qo(t,e){if(eP(t=ee(t)))return yT("Unsupported field value:",e,t),jD(t,e);if(t instanceof Oo)return function(i,r){if(!WD(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=qo(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=ee(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=We.fromDate(i);return{timestampValue:sl(r.serializer,s)}}if(i instanceof We){const s=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:sl(r.serializer,s)}}if(i instanceof Cp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ki)return{bytesValue:qN(r.serializer,i._byteString)};if(i instanceof Ze){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ov(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof dT)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Pv(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${wp(i)}`)}(t,e)}function jD(t,e){const n={};return lN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(t,(i,r)=>{const s=qo(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function eP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Cp||t instanceof ki||t instanceof Ze||t instanceof Oo||t instanceof dT)}function yT(t,e,n){if(!eP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=wp(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function X_(t,e,n){if((e=ee(e))instanceof Ss)return e._internalPath;if(typeof e=="string")return vT(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,n)}const e6=new RegExp("[~\\*/\\[\\]]");function vT(t,e,n){if(e.search(e6)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ss(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vh(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new G(O.INVALID_ARGUMENT,a+t+l)}function tP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t6 extends Nc{data(){return super.data()}}function xp(t,e){return typeof e=="string"?vT(t,e):e instanceof Ss?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TT{}class ud extends TT{}function Ur(t,e,...n){let i=[];e instanceof TT&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof ET).length,a=s.filter(l=>l instanceof Np).length;if(o>1||o>0&&a>0)throw new G(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Np extends ud{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Np(e,n,i)}_apply(e){const n=this._parse(e);return rP(e._query,n),new dn(e.firestore,e.converter,O_(e._query,n))}_parse(e){const n=Fo(e.firestore);return function(s,o,a,l,u,f,p){let m;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){iw(p,f);const _=[];for(const S of p)_.push(nw(l,s,S));m={arrayValue:{values:_}}}else m=nw(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||iw(p,f),m=ZD(a,o,p,f==="in"||f==="not-in");return ge.create(u,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function n6(t,e,n){const i=e,r=xp("where",t);return Np._create(r,i,n)}class ET extends TT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ET(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ce.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)rP(o,l),o=O_(o,l)}(e._query,n),new dn(e.firestore,e.converter,O_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IT extends ud{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new IT(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new G(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new G(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(s,o)}(e._query,this._field,this._direction);return new dn(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Er(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function i6(t,e="asc"){const n=e,i=xp("orderBy",t);return IT._create(i,n)}class Dp extends ud{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Dp(e,n,i)}_apply(e){return new dn(e.firestore,e.converter,Ch(e._query,this._limit,this._limitType))}}function r6(t){return qD("limit",t),Dp._create("limit",t,"F")}function s6(t){return qD("limitToLast",t),Dp._create("limitToLast",t,"L")}class Pp extends ud{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Pp(e,n,i)}_apply(e){const n=iP(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,function(r,s){return new Er(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function o6(...t){return Pp._create("startAt",t,!0)}function a6(...t){return Pp._create("startAfter",t,!1)}class Mp extends ud{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new Mp(e,n,i)}_apply(e){const n=iP(e,this.type,this._docOrFields,this._inclusive);return new dn(e.firestore,e.converter,function(r,s){return new Er(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function l6(...t){return Mp._create("endBefore",t,!1)}function u6(...t){return Mp._create("endAt",t,!0)}function iP(t,e,n,i){if(n[0]=ee(n[0]),n[0]instanceof Nc)return function(s,o,a,l,u){if(!l)throw new G(O.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const p of ka(s))if(p.field.isKeyField())f.push(yo(o,l.key));else{const m=l.data.field(p.field);if(pp(m))throw new G(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const _=p.field.canonicalString();throw new G(O.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(m)}return new Es(f,u)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=Fo(t.firestore);return function(o,a,l,u,f,p){const m=o.explicitOrderBy;if(f.length>m.length)throw new G(O.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let S=0;S<f.length;S++){const b=f[S];if(m[S].field.isKeyField()){if(typeof b!="string")throw new G(O.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof b}`);if(!Nv(o)&&b.indexOf("/")!==-1)throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${b}' contains a slash.`);const P=o.path.child(pe.fromString(b));if(!Y.isDocumentKey(P))throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const T=new Y(P);_.push(yo(a,T))}else{const P=ZD(l,u,b);_.push(P)}}return new Es(_,p)}(t._query,t.firestore._databaseId,r,e,n,i)}}function nw(t,e,n){if(typeof(n=ee(n))=="string"){if(n==="")throw new G(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nv(e)&&n.indexOf("/")!==-1)throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(pe.fromString(n));if(!Y.isDocumentKey(i))throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return yo(t,new Y(i))}if(n instanceof Ze)return yo(t,n._key);throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wp(n)}.`)}function iw(t,e){if(!Array.isArray(t)||t.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rP(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ST{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Lo(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ye(o.doubleValue));return new dT(s)}convertGeoPoint(e){return new Cp(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=bv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){const n=mr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=pe.fromString(e);Z(XN(i));const r=new vs(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(n)||dt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class c6 extends ST{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let gr=class extends Nc{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(xp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Wu=class extends gr{data(e={}){return super.data(e)}},As=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Zs(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Wu(this._firestore,this._userDataWriter,i.key,i,new Zs(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Wu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Zs(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Wu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Zs(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,f=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:d6(a.type),doc:l,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function d6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}function sP(t,e){return t instanceof gr&&e instanceof gr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof As&&e instanceof As&&t._firestore===e._firestore&&$D(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f6(t){t=Te(t,Ze);const e=Te(t.firestore,pt);return UD(jt(e),t._key).then(n=>AT(e,t,n))}class Bo extends ST{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,n)}}function h6(t){t=Te(t,Ze);const e=Te(t.firestore,pt),n=jt(e),i=new Bo(e);return kz(n,t._key).then(r=>new gr(e,i,t._key,r,new Zs(r!==null&&r.hasLocalMutations,!0),t.converter))}function p6(t){t=Te(t,Ze);const e=Te(t.firestore,pt);return UD(jt(e),t._key,{source:"server"}).then(n=>AT(e,t,n))}function m6(t){t=Te(t,dn);const e=Te(t.firestore,pt),n=jt(e),i=new Bo(e);return nP(t._query),LD(n,t._query).then(r=>new As(e,i,t,r))}function g6(t){t=Te(t,dn);const e=Te(t.firestore,pt),n=jt(e),i=new Bo(e);return Vz(n,t._query).then(r=>new As(e,i,t,r))}function _6(t){t=Te(t,dn);const e=Te(t.firestore,pt),n=jt(e),i=new Bo(e);return LD(n,t._query,{source:"server"}).then(r=>new As(e,i,t,r))}function rw(t,e,n){t=Te(t,Ze);const i=Te(t.firestore,pt),r=kp(t.converter,e,n);return cd(i,[bp(Fo(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Qe.none())])}function sw(t,e,n,...i){t=Te(t,Ze);const r=Te(t.firestore,pt),s=Fo(r);let o;return o=typeof(e=ee(e))=="string"||e instanceof Ss?_T(s,"updateDoc",t._key,e,n,i):gT(s,"updateDoc",t._key,e),cd(r,[o.toMutation(t._key,Qe.exists(!0))])}function y6(t){return cd(Te(t.firestore,pt),[new Nl(t._key,Qe.none())])}function v6(t,e){const n=Te(t.firestore,pt),i=kh(t),r=kp(t.converter,e);return cd(n,[bp(Fo(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Qe.exists(!1))]).then(()=>i)}function oP(t,...e){var n,i,r;t=ee(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||W_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(W_(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,u,f;if(t instanceof Ze)u=Te(t.firestore,pt),f=bl(t._key.path),l={next:p=>{e[o]&&e[o](AT(u,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Te(t,dn);u=Te(p.firestore,pt),f=p._query;const m=new Bo(u);l={next:_=>{e[o]&&e[o](new As(u,m,p,_))},error:e[o+1],complete:e[o+2]},nP(t._query)}return function(m,_,S,b){const P=new Sp(b),T=new tT(_,P,S);return m.asyncQueue.enqueueAndForget(async()=>Zv(await dl(m),T)),()=>{P.Za(),m.asyncQueue.enqueueAndForget(async()=>jv(await dl(m),T))}}(jt(u),f,a,l)}function T6(t,e){return Uz(jt(t=Te(t,pt)),W_(e)?e:{next:e})}function cd(t,e){return function(i,r){const s=new zt;return i.asyncQueue.enqueueAndForget(async()=>cz(await uT(i),r,s)),s.promise}(jt(t),e)}function AT(t,e,n){const i=n.docs.get(e._key),r=new Bo(t);return new gr(t,r,e._key,i,new Zs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I6=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fo(e)}set(e,n,i){this._verifyNotCommitted();const r=Kr(e,this._firestore),s=kp(r.converter,n,i),o=bp(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,Qe.none())),this}update(e,n,i,...r){this._verifyNotCommitted();const s=Kr(e,this._firestore);let o;return o=typeof(n=ee(n))=="string"||n instanceof Ss?_T(this._dataReader,"WriteBatch.update",s._key,n,i,r):gT(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Qe.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Kr(e,this._firestore);return this._mutations=this._mutations.concat(new Nl(n._key,Qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Kr(t,e){if((t=ee(t)).firestore!==e)throw new G(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S6=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Fo(n)}get(n){const i=Kr(n,this._firestore),r=new c6(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return Q();const o=s[0];if(o.isFoundDocument())return new Nc(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Nc(this._firestore,r,i._key,null,i.converter);throw Q()})}set(n,i,r){const s=Kr(n,this._firestore),o=kp(s.converter,i,r),a=bp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(n,i,r,...s){const o=Kr(n,this._firestore);let a;return a=typeof(i=ee(i))=="string"||i instanceof Ss?_T(this._dataReader,"Transaction.update",o._key,i,r,s):gT(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(n){const i=Kr(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Kr(e,this._firestore),i=new Bo(this._firestore);return super.get(e).then(r=>new gr(this._firestore,i,n._key,r._document,new Zs(!1,!1),n.converter))}};function A6(t,e,n){t=Te(t,pt);const i=Object.assign(Object.assign({},E6),n);return function(s){if(s.maxAttempts<1)throw new G(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new zt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await Dz(s);new xz(s.asyncQueue,u,a,o,l).au()}),l.promise}(jt(t),r=>e(new S6(t,r)),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(){return new ld("deleteField")}function C6(){return new fT("serverTimestamp")}function R6(...t){return new hT("arrayUnion",t)}function b6(...t){return new pT("arrayRemove",t)}function x6(t){return new mT("increment",t)}(function(e,n=!0){(function(r){Rl=r})(Tr),pr(new ri("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new pt(new k4(i.getProvider("auth-internal")),new O4(i.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vs(u.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),On(JS,"4.7.3",e),On(JS,"4.7.3","esm2017")})();const N6="@firebase/firestore-compat",D6="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function aw(){if(!cG())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}let aP=class Z_{constructor(e){this._delegate=e}static fromBase64String(e){return aw(),new Z_(ki.fromBase64String(e))}static fromUint8Array(e){return ow(),new Z_(ki.fromUint8Array(e))}toBase64(){return aw(),this._delegate.toBase64()}toUint8Array(){return ow(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){return P6(t,["next","error","complete"])}function P6(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{enableIndexedDbPersistence(e,n){return zz(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Hz(e._delegate)}clearIndexedDbPersistence(e){return Kz(e._delegate)}}class lP{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof vs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Pi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){Fz(this._delegate,e,n,i)}enableNetwork(){return Yz(this._delegate)}disableNetwork(){return Jz(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,FD("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $z(this._delegate)}onSnapshotsInSync(e){return T6(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fl(this,HD(this._delegate,e))}catch(n){throw on(n,"collection()","Firestore.collection()")}}doc(e){try{return new Xn(this,kh(this._delegate,e))}catch(n){throw on(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sn(this,qz(this._delegate,e))}catch(n){throw on(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return A6(this._delegate,n=>e(new uP(this,n)))}batch(){return jt(this._delegate),new cP(new I6(this._delegate,e=>cd(this._delegate,e)))}loadBundle(e){return Qz(this._delegate,e)}namedQuery(e){return Wz(this._delegate,e).then(n=>n?new sn(this,n):null)}}class Vp extends ST{constructor(e){super(),this.firestore=e}convertBytes(e){return new aP(new ki(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Xn.forKey(n,this.firestore,null)}}function k6(t){N4(t)}class uP{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Vp(e)}get(e){const n=js(e);return this._delegate.get(n).then(i=>new Dc(this._firestore,new gr(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){const r=js(e);return i?(wT("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=js(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=js(e);return this._delegate.delete(n),this}}class cP{constructor(e){this._delegate=e}set(e,n,i){const r=js(e);return i?(wT("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){const s=js(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,i,...r),this}delete(e){const n=js(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class wo{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){const i=new Wu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pc(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const i=wo.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(n);return s||(s=new wo(e,new Vp(e),n),r.set(n,s)),s}}wo.INSTANCES=new WeakMap;class Xn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vp(e)}static forPath(e,n,i){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Xn(n,new Ze(n._delegate,i,new Y(e)))}static forKey(e,n,i){return new Xn(n,new Ze(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new fl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fl(this.firestore,HD(this._delegate,e))}catch(n){throw on(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ee(e),e instanceof Ze?KD(this._delegate,e):!1}set(e,n){n=wT("DocumentReference.set",n);try{return n?rw(this._delegate,e,n):rw(this._delegate,e)}catch(i){throw on(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?sw(this._delegate,e):sw(this._delegate,e,n,...i)}catch(r){throw on(r,"updateDoc()","DocumentReference.update()")}}delete(){return y6(this._delegate)}onSnapshot(...e){const n=dP(e),i=fP(e,r=>new Dc(this.firestore,new gr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return oP(this._delegate,n,i)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=h6(this._delegate):(e==null?void 0:e.source)==="server"?n=p6(this._delegate):n=f6(this._delegate),n.then(i=>new Dc(this.firestore,new gr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Xn(this.firestore,e?this._delegate.withConverter(wo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function on(t,e,n){return t.message=t.message.replace(e,n),t}function dP(t){for(const e of t)if(typeof e=="object"&&!j_(e))return e;return{}}function fP(t,e){var n,i;let r;return j_(t[0])?r=t[0]:j_(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:s=>{r.next&&r.next(e(s))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}class Dc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Xn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sP(this._delegate,e._delegate)}}class Pc extends Dc{data(e){const n=this._delegate.data(e);return this._delegate._converter||D4(n!==void 0),n}}class sn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vp(e)}where(e,n,i){try{return new sn(this.firestore,Ur(this._delegate,n6(e,n,i)))}catch(r){throw on(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new sn(this.firestore,Ur(this._delegate,i6(e,n)))}catch(i){throw on(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sn(this.firestore,Ur(this._delegate,r6(e)))}catch(n){throw on(n,"limit()","Query.limit()")}}limitToLast(e){try{return new sn(this.firestore,Ur(this._delegate,s6(e)))}catch(n){throw on(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sn(this.firestore,Ur(this._delegate,o6(...e)))}catch(n){throw on(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sn(this.firestore,Ur(this._delegate,a6(...e)))}catch(n){throw on(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sn(this.firestore,Ur(this._delegate,l6(...e)))}catch(n){throw on(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sn(this.firestore,Ur(this._delegate,u6(...e)))}catch(n){throw on(n,"endAt()","Query.endAt()")}}isEqual(e){return $D(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=g6(this._delegate):(e==null?void 0:e.source)==="server"?n=_6(this._delegate):n=m6(this._delegate),n.then(i=>new ey(this.firestore,new As(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const n=dP(e),i=fP(e,r=>new ey(this.firestore,new As(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return oP(this._delegate,n,i)}withConverter(e){return new sn(this.firestore,e?this._delegate.withConverter(wo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class V6{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Pc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ey{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new V6(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Pc(this._firestore,i))})}isEqual(e){return sP(this._delegate,e._delegate)}}class fl extends sn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Xn(this.firestore,e):null}doc(e){try{return e===void 0?new Xn(this.firestore,kh(this._delegate)):new Xn(this.firestore,kh(this._delegate,e))}catch(n){throw on(n,"doc()","CollectionReference.doc()")}}add(e){return v6(this._delegate,e).then(n=>new Xn(this.firestore,n))}isEqual(e){return KD(this._delegate,e._delegate)}withConverter(e){return new fl(this.firestore,e?this._delegate.withConverter(wo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function js(t){return Te(t,Ze)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(...e){this._delegate=new Ss(...e)}static documentId(){return new CT(Je.keyField().canonicalString())}isEqual(e){return e=ee(e),e instanceof Ss?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._delegate=e}static serverTimestamp(){const e=C6();return e._methodName="FieldValue.serverTimestamp",new Xs(e)}static delete(){const e=w6();return e._methodName="FieldValue.delete",new Xs(e)}static arrayUnion(...e){const n=R6(...e);return n._methodName="FieldValue.arrayUnion",new Xs(n)}static arrayRemove(...e){const n=b6(...e);return n._methodName="FieldValue.arrayRemove",new Xs(n)}static increment(e){const n=x6(e);return n._methodName="FieldValue.increment",new Xs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={Firestore:lP,GeoPoint:Cp,Timestamp:We,Blob:aP,Transaction:uP,WriteBatch:cP,DocumentReference:Xn,DocumentSnapshot:Dc,Query:sn,QueryDocumentSnapshot:Pc,QuerySnapshot:ey,CollectionReference:fl,FieldPath:CT,FieldValue:Xs,setLogLevel:k6,CACHE_SIZE_UNLIMITED:Gz};function L6(t,e){t.INTERNAL.registerComponent(new ri("firestore-compat",n=>{const i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},U6)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){L6(t,(e,n)=>new lP(e,n,new M6)),t.registerVersion(N6,D6)}O6(pi);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="firebasestorage.googleapis.com",pP="storageBucket",F6=2*60*1e3,q6=10*60*1e3,B6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends Zt{constructor(e,n,i=0){super(cg(e),`Firebase Storage: ${n} (${cg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,et.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ke||(Ke={}));function cg(t){return"storage/"+t}function RT(){const t="An unknown error occurred, please check the error payload for server response.";return new et(Ke.UNKNOWN,t)}function G6(t){return new et(Ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function z6(t){return new et(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new et(Ke.UNAUTHENTICATED,t)}function K6(){return new et(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $6(t){return new et(Ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function mP(){return new et(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gP(){return new et(Ke.CANCELED,"User canceled the upload/download.")}function Y6(t){return new et(Ke.INVALID_URL,"Invalid URL '"+t+"'.")}function J6(t){return new et(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Q6(){return new et(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+pP+"' property when initializing the app?")}function _P(){return new et(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W6(){return new et(Ke.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function X6(){return new et(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Z6(t){return new et(Ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ua(t){return new et(Ke.INVALID_ARGUMENT,t)}function yP(){return new et(Ke.APP_DELETED,"The Firebase app was deleted.")}function vP(t){return new et(Ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xu(t,e){return new et(Ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mu(t){throw new et(Ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Xt.makeFromUrl(e,n)}catch{return new Xt(e,"")}if(i.path==="")return i;throw J6(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${r}/o${m}`,"i"),S={bucket:1,path:3},b=n===hP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",T=new RegExp(`^https?://${b}/${r}/${P}`,"i"),A=[{regex:a,indices:l,postModify:s},{regex:_,indices:S,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<A.length;N++){const L=A[N],F=L.regex.exec(e);if(F){const C=F[L.indices.bucket];let E=F[L.indices.path];E||(E=""),i=new Xt(C,E),L.postModify(i);break}}if(i==null)throw Y6(e);return i}}class j6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function f(...P){u||(u=!0,e.apply(null,P))}function p(P){r=setTimeout(()=>{r=null,t(_,l())},P)}function m(){s&&clearTimeout(s)}function _(P,...T){if(u){m();return}if(P){m(),f.call(null,P,...T);return}if(l()||o){m(),f.call(null,P,...T);return}i<64&&(i*=2);let A;a===1?(a=2,A=0):A=(i+Math.random())*1e3,p(A)}let S=!1;function b(P){S||(S=!0,m(),!u&&(r!==null?(P||(a=2),clearTimeout(r),p(0)):P||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,b(!0)},n),b}function t5(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){return t!==void 0}function i5(t){return typeof t=="function"}function r5(t){return typeof t=="object"&&!Array.isArray(t)}function Up(t){return typeof t=="string"||t instanceof String}function lw(t){return bT()&&t instanceof Blob}function bT(){return typeof Blob<"u"}function ty(t,e,n,i){if(i<e)throw Ua(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Ua(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function TP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var ao;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ao||(ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,n,i,r,s,o,a,l,u,f,p,m=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,S)=>{this.resolve_=_,this.reject_=S,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new af(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ao.NO_ERROR,l=s.getStatus();if(!a||EP(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===ao.ABORT;i(!1,new af(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;i(!0,new af(u,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());n5(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=RT();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?yP():gP();o(l)}else{const l=mP();o(l)}};this.canceled_?n(!1,new af(!1,null,!0)):this.backoffId_=e5(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class af{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function o5(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function a5(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l5(t,e){e&&(t["X-Firebase-GMPID"]=e)}function u5(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c5(t,e,n,i,r,s,o=!0){const a=TP(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return l5(u,e),o5(u,n),a5(u,s),u5(u,i),new s5(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function f5(...t){const e=d5();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(bT())return new Blob(t);throw new et(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function h5(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p5(t){if(typeof atob>"u")throw Z6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dg{constructor(e,n){this.data=e,this.contentType=n||null}}function IP(t,e){switch(t){case Zn.RAW:return new dg(SP(e));case Zn.BASE64:case Zn.BASE64URL:return new dg(AP(t,e));case Zn.DATA_URL:return new dg(g5(e),_5(e))}throw RT()}function SP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function m5(t){let e;try{e=decodeURIComponent(t)}catch{throw Xu(Zn.DATA_URL,"Malformed data URL.")}return SP(e)}function AP(t,e){switch(t){case Zn.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Xu(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Zn.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Xu(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=p5(e)}catch(r){throw r.message.includes("polyfill")?r:Xu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class wP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xu(Zn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=y5(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function g5(t){const e=new wP(t);return e.base64?AP(Zn.BASE64,e.rest):m5(e.rest)}function _5(t){return new wP(t).contentType}function y5(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){let i=0,r="";lw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(lw(this.data_)){const i=this.data_,r=h5(i,e,n);return r===null?null:new Qi(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Qi(i,!0)}}static getBlob(...e){if(bT()){const n=e.map(i=>i instanceof Qi?i.data_:i);return new Qi(f5.apply(null,n))}else{const n=e.map(o=>Up(o)?IP(Zn.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new Qi(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){let e;try{e=JSON.parse(t)}catch{return null}return r5(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function T5(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function CP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t,e){return e}class nn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||E5}}let lf=null;function I5(t){return!Up(t)||t.length<2?t:CP(t)}function Lp(){if(lf)return lf;const t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));function e(s,o){return I5(o)}const n=new nn("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new nn("size");return r.xform=i,t.push(r),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),lf=t,lf}function S5(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new Xt(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function A5(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return S5(i,t),i}function RP(t,e,n){const i=xT(e);return i===null?null:A5(t,i,n)}function w5(t,e,n,i){const r=xT(e);if(r===null||!Up(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const f=t.bucket,p=t.fullPath,m="/b/"+o(f)+"/o/"+o(p),_=Ps(m,n,i),S=TP({alt:"media",token:u});return _+S})[0]}function NT(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="prefixes",cw="items";function C5(t,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[uw])for(const r of n[uw]){const s=r.replace(/\/$/,""),o=t._makeStorageReference(new Xt(e,s));i.prefixes.push(o)}if(n[cw])for(const r of n[cw]){const s=t._makeStorageReference(new Xt(e,r.name));i.items.push(s)}return i}function R5(t,e,n){const i=xT(n);return i===null?null:C5(t,e,i)}class Ar{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){if(!t)throw RT()}function Op(t,e){function n(i,r){const s=RP(t,r,e);return Di(s!==null),s}return n}function b5(t,e){function n(i,r){const s=R5(t,e,r);return Di(s!==null),s}return n}function x5(t,e){function n(i,r){const s=RP(t,r,e);return Di(s!==null),w5(s,r,t.host,t._protocol)}return n}function Vl(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=K6():r=H6():n.getStatus()===402?r=z6(t.bucket):n.getStatus()===403?r=$6(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Fp(t){const e=Vl(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=G6(t.path)),s.serverResponse=r.serverResponse,s}return n}function bP(t,e,n){const i=e.fullServerUrl(),r=Ps(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Ar(r,s,Op(t,n),o);return a.errorHandler=Fp(e),a}function N5(t,e,n,i,r){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);const o=e.bucketOnlyServerUrl(),a=Ps(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,f=new Ar(a,l,b5(t,e.bucket),u);return f.urlParams=s,f.errorHandler=Vl(e),f}function D5(t,e,n){const i=e.fullServerUrl(),r=Ps(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Ar(r,s,x5(t,n),o);return a.errorHandler=Fp(e),a}function P5(t,e,n,i){const r=e.fullServerUrl(),s=Ps(r,t.host,t._protocol),o="PATCH",a=NT(n,i),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,f=new Ar(s,o,Op(t,i),u);return f.headers=l,f.body=a,f.errorHandler=Fp(e),f}function M5(t,e){const n=e.fullServerUrl(),i=Ps(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new Ar(i,r,o,s);return a.successCodes=[200,204],a.errorHandler=Fp(e),a}function k5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xP(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=k5(null,e)),i}function V5(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let A="";for(let N=0;N<2;N++)A=A+Math.random().toString().slice(2);return A}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=xP(e,i,r),f=NT(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",_=Qi.getBlob(p,i,m);if(_===null)throw _P();const S={name:u.fullPath},b=Ps(s,t.host,t._protocol),P="POST",T=t.maxUploadRetryTime,v=new Ar(b,P,Op(t,n),T);return v.urlParams=S,v.headers=o,v.body=_.uploadData(),v.errorHandler=Vl(e),v}class Uh{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}}function DT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Di(!1)}return Di(!!n&&(e||["active"]).indexOf(n)!==-1),n}function U5(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o=xP(e,i,r),a={name:o.fullPath},l=Ps(s,t.host,t._protocol),u="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=NT(o,n),m=t.maxUploadRetryTime;function _(b){DT(b);let P;try{P=b.getResponseHeader("X-Goog-Upload-URL")}catch{Di(!1)}return Di(Up(P)),P}const S=new Ar(l,u,_,m);return S.urlParams=a,S.headers=f,S.body=p,S.errorHandler=Vl(e),S}function L5(t,e,n,i){const r={"X-Goog-Upload-Command":"query"};function s(u){const f=DT(u,["active","final"]);let p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Di(!1)}p||Di(!1);const m=Number(p);return Di(!isNaN(m)),new Uh(m,i.size(),f==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Ar(n,o,s,a);return l.headers=r,l.errorHandler=Vl(e),l}const dw=256*1024;function O5(t,e,n,i,r,s,o,a){const l=new Uh(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw W6();const u=l.total-l.current;let f=u;r>0&&(f=Math.min(f,r));const p=l.current,m=p+f;let _="";f===0?_="finalize":u===f?_="upload, finalize":_="upload";const S={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},b=i.slice(p,m);if(b===null)throw _P();function P(N,L){const F=DT(N,["active","final"]),C=l.current+f,E=i.size();let w;return F==="final"?w=Op(e,s)(N,L):w=null,new Uh(C,E,F==="final",w)}const T="POST",v=e.maxUploadRetryTime,A=new Ar(n,T,P,v);return A.headers=S,A.body=b.uploadData(),A.progressCallback=a||null,A.errorHandler=Vl(t),A}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5={STATE_CHANGED:"state_changed"},an={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fg(t){switch(t){case"running":case"pausing":case"canceling":return an.RUNNING;case"paused":return an.PAUSED;case"success":return an.SUCCESS;case"canceled":return an.CANCELED;case"error":return an.ERROR;default:return an.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n,i){if(i5(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class B5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw mu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class G5 extends B5{initXhr(){this.xhr_.responseType="text"}}function _i(){return new G5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=Lp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ke.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(EP(r.status,[]))if(s)r=mP();else{this.sleepTime=Math.max(this.sleepTime*2,B6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ke.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const i=U5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,_i,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,i)=>{const r=L5(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,_i,n,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=dw*this._chunkMultiplier,n=new Uh(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=O5(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,_i,r,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){dw*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const i=bP(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,_i,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const i=V5(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,_i,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=gP(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=fg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){const s=new q5(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(fg(this._state)){case an.SUCCESS:ea(this._resolve.bind(null,this.snapshot))();break;case an.CANCELED:case an.ERROR:const n=this._reject;ea(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fg(this._state)){case an.RUNNING:case an.PAUSED:e.next&&ea(e.next.bind(e,this.snapshot))();break;case an.SUCCESS:e.complete&&ea(e.complete.bind(e))();break;case an.CANCELED:case an.ERROR:e.error&&ea(e.error.bind(e,this._error))();break;default:e.error&&ea(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this._service=e,n instanceof Xt?this._location=n:this._location=Xt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Co(e,n)}get root(){const e=new Xt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CP(this._location.path)}get storage(){return this._service}get parent(){const e=v5(this._location.path);if(e===null)return null;const n=new Xt(this._location.bucket,e);return new Co(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vP(e)}}function z5(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new NP(t,new Qi(e),n)}function H5(t){const e={prefixes:[],items:[]};return DP(t,e).then(()=>e)}async function DP(t,e,n){const r=await PP(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await DP(t,e,r.nextPageToken)}function PP(t,e){e!=null&&typeof e.maxResults=="number"&&ty("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=N5(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,_i)}function K5(t){t._throwIfRoot("getMetadata");const e=bP(t.storage,t._location,Lp());return t.storage.makeRequestWithTokens(e,_i)}function $5(t,e){t._throwIfRoot("updateMetadata");const n=P5(t.storage,t._location,e,Lp());return t.storage.makeRequestWithTokens(n,_i)}function Y5(t){t._throwIfRoot("getDownloadURL");const e=D5(t.storage,t._location,Lp());return t.storage.makeRequestWithTokens(e,_i).then(n=>{if(n===null)throw X6();return n})}function J5(t){t._throwIfRoot("deleteObject");const e=M5(t.storage,t._location);return t.storage.makeRequestWithTokens(e,_i)}function MP(t,e){const n=T5(t._location.path,e),i=new Xt(t._location.bucket,n);return new Co(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){return/^[A-Za-z]+:\/\//.test(t)}function W5(t,e){return new Co(t,e)}function kP(t,e){if(t instanceof PT){const n=t;if(n._bucket==null)throw Q6();const i=new Co(n,n._bucket);return e!=null?kP(i,e):i}else return e!==void 0?MP(t,e):t}function X5(t,e){if(e&&Q5(e)){if(t instanceof PT)return W5(t,e);throw Ua("To use ref(service, url), the first argument must be a Storage instance.")}else return kP(t,e)}function fw(t,e){const n=e==null?void 0:e[pP];return n==null?null:Xt.makeFromBucketSpec(n,t)}function Z5(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Ax(r,t.app.options.projectId))}class PT{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=hP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=F6,this._maxUploadRetryTime=q6,this._requests=new Set,r!=null?this._bucket=Xt.makeFromBucketSpec(r,this._host):this._bucket=fw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xt.makeFromBucketSpec(this._url,e):this._bucket=fw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ty("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ty("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Co(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new j6(yP());{const o=c5(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const hw="@firebase/storage",pw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="storage";function eH(t,e,n){return t=ee(t),z5(t,e,n)}function tH(t){return t=ee(t),K5(t)}function nH(t,e){return t=ee(t),$5(t,e)}function iH(t,e){return t=ee(t),PP(t,e)}function rH(t){return t=ee(t),H5(t)}function sH(t){return t=ee(t),Y5(t)}function oH(t){return t=ee(t),J5(t)}function mw(t,e){return t=ee(t),X5(t,e)}function aH(t,e){return MP(t,e)}function lH(t,e,n,i={}){Z5(t,e,n,i)}function uH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new PT(n,i,r,e,Tr)}function cH(){pr(new ri(j5,uH,"PUBLIC").setMultipleInstances(!0)),On(hw,pw,""),On(hw,pw,"esm2017")}cH();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new uf(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new uf(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=o=>n(new uf(o,this,this._ref)):s={next:n.next?o=>n.next(new uf(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class _w{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new or(e,this._service))}get items(){return this._delegate.items.map(e=>new or(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=aH(this._delegate,e);return new or(n,this.storage)}get root(){return new or(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new or(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new gw(eH(this._delegate,e,n),this)}putString(e,n=Zn.RAW,i){this._throwIfRoot("putString");const r=IP(n,e),s=Object.assign({},i);return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new gw(new NP(this._delegate,new Qi(r.data,!0),s),this)}listAll(){return rH(this._delegate).then(e=>new _w(e,this.storage))}list(e){return iH(this._delegate,e||void 0).then(n=>new _w(n,this.storage))}getMetadata(){return tH(this._delegate)}updateMetadata(e){return nH(this._delegate,e)}getDownloadURL(){return sH(this._delegate)}delete(){return this._throwIfRoot("delete"),oH(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw vP(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(yw(e))throw Ua("ref() expected a child path but got a URL, use refFromURL instead.");return new or(mw(this._delegate,e),this)}refFromURL(e){if(!yw(e))throw Ua("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Xt.makeFromUrl(e,this._delegate.host)}catch{throw Ua("refFromUrl() expected a valid full URL but got an invalid one.")}return new or(mw(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){lH(this._delegate,e,n,i)}}function yw(t){return/^[A-Za-z]+:\/\//.test(t)}const dH="@firebase/storage-compat",fH="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH="storage-compat";function pH(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new VP(n,i)}function mH(t){const e={TaskState:an,TaskEvent:F5,StringFormat:Zn,Storage:VP,Reference:or};t.INTERNAL.registerComponent(new ri(hH,pH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(dH,fH)}mH(pi);function MT(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}const gu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ta={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function UP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _H=gH,yH=UP,LP=new Uo("auth","Firebase",UP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new fp("@firebase/auth");function vH(t,...e){Lh.logLevel<=fe.WARN&&Lh.warn(`Auth (${Tr}): ${t}`,...e)}function Lf(t,...e){Lh.logLevel<=fe.ERROR&&Lh.error(`Auth (${Tr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,...e){throw VT(t,...e)}function St(t,...e){return VT(t,...e)}function kT(t,e,n){const i=Object.assign(Object.assign({},yH()),{[e]:n});return new Uo("auth","Firebase",i).create(e,{appName:t.name})}function kt(t){return kT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ul(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ht(t,"argument-error"),kT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function VT(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return LP.create(t,...e)}function H(t,e,...n){if(!t)throw VT(e,...n)}function Ri(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lf(e),new Error(e)}function di(t,e){t||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UT(){return vw()==="http:"||vw()==="https:"}function vw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UT()||Cx()||"connection"in navigator)?navigator.onLine:!0}function EH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,n){this.shortDelay=e,this.longDelay=n,di(n>e,"Short delay should be less than long delay!"),this.isMobile=jq()||vv()}get(){return TH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t,e){di(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH=new dd(3e4,6e4);function lt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ut(t,e,n,i,r={}){return FP(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Cl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return tB()||(u.referrerPolicy="no-referrer"),OP.fetch()(qP(t,t.config.apiHost,n,a),u)})}async function FP(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},IH),e);try{const r=new wH(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xu(t,"user-disabled",o);const f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kT(t,f,u);Ht(t,f)}}catch(r){if(r instanceof Zt)throw r;Ht(t,"network-request-failed",{message:String(r)})}}async function wr(t,e,n,i,r={}){const s=await ut(t,e,n,i,r);return"mfaPendingCredential"in s&&Ht(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qP(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?LT(t.config,r):`${t.config.apiScheme}://${r}`}function AH(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(St(this.auth,"network-request-failed")),SH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=St(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){return t!==void 0&&t.getResponse!==void 0}function Ew(t){return t!==void 0&&t.enterprise!==void 0}class CH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AH(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RH(t){return(await ut(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function bH(t,e){return ut(t,"GET","/v2/recaptchaConfig",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xH(t,e){return ut(t,"POST","/v1/accounts:delete",e)}async function NH(t,e){return ut(t,"POST","/v1/accounts:update",e)}async function BP(t,e){return ut(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DH(t,e=!1){const n=ee(t),i=await n.getIdToken(e),r=qp(i);H(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Zu(hg(r.auth_time)),issuedAtTime:Zu(hg(r.iat)),expirationTime:Zu(hg(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hg(t){return Number(t)*1e3}function qp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Lf("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ex(n);return r?JSON.parse(r):(Lf("Failed to decode base64 JWT payload"),null)}catch(r){return Lf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Iw(t){const e=qp(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _r(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Zt&&PH(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function PH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await _r(t,BP(n,{idToken:i}));H(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?GP(s.providerUserInfo):[],a=VH(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ny(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function kH(t){const e=ee(t);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VH(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function GP(t){return t.map(e=>{var{providerId:n}=e,i=MT(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UH(t,e){const n=await FP(t,{},async()=>{const i=Cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=qP(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",OP.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LH(t,e){return ut(t,"POST","/v2/accounts:revokeToken",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");const n=Iw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await UH(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new La;return i&&(H(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(H(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(H(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new La,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class er{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=MT(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ny(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _r(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DH(this,e)}reload(){return kH(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(st(this.auth.app))return Promise.reject(kt(this.auth));const e=await this.getIdToken();return await _r(this,xH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,f;const p=(i=n.displayName)!==null&&i!==void 0?i:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:N,isAnonymous:L,providerData:F,stsTokenManager:C}=n;H(A&&C,e,"internal-error");const E=La.fromJSON(this.name,C);H(typeof A=="string",e,"internal-error"),Lr(p,e.name),Lr(m,e.name),H(typeof N=="boolean",e,"internal-error"),H(typeof L=="boolean",e,"internal-error"),Lr(_,e.name),Lr(S,e.name),Lr(b,e.name),Lr(P,e.name),Lr(T,e.name),Lr(v,e.name);const w=new er({uid:A,auth:e,email:m,emailVerified:N,displayName:p,isAnonymous:L,photoURL:S,phoneNumber:_,tenantId:b,stsTokenManager:E,createdAt:T,lastLoginAt:v});return F&&Array.isArray(F)&&(w.providerData=F.map(x=>Object.assign({},x))),P&&(w._redirectEventId=P),w}static async _fromIdTokenResponse(e,n,i=!1){const r=new La;r.updateFromServerResponse(n);const s=new er({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await kc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];H(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?GP(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new La;a.updateFromIdToken(i);const l=new er({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ny(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function Mn(t){di(t instanceof Function,"Expected a class definition");let e=Sw.get(t);return e?(di(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zP.type="NONE";const hl=zP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e,n){return`firebase:${t}:${e}:${n}`}class Oa{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=lo(this.userKey,r.apiKey,s),this.fullPersistenceKey=lo("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Oa(Mn(hl),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||Mn(hl);const o=lo(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(o);if(f){const p=er._fromJSON(e,f);u!==s&&(a=p),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Oa(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Oa(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JP(e))return"Blackberry";if(QP(e))return"Webos";if(KP(e))return"Safari";if((e.includes("chrome/")||$P(e))&&!e.includes("edge/"))return"Chrome";if(fd(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HP(t=je()){return/firefox\//i.test(t)}function KP(t=je()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $P(t=je()){return/crios\//i.test(t)}function YP(t=je()){return/iemobile/i.test(t)}function fd(t=je()){return/android/i.test(t)}function JP(t=je()){return/blackberry/i.test(t)}function QP(t=je()){return/webos/i.test(t)}function hd(t=je()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OH(t=je()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function FH(t=je()){var e;return hd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qH(){return Rx()&&document.documentMode===10}function WP(t=je()){return hd(t)||fd(t)||QP(t)||JP(t)||/windows phone/i.test(t)||YP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e=[]){let n;switch(t){case"Browser":n=Aw(je());break;case"Worker":n=`${Aw(je())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GH(t,e={}){return ut(t,"GET","/v2/passwordPolicy",lt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH=6;class HH{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zH,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ww(this),this.idTokenSubscription=new ww(this),this.beforeStateQueue=new BH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Oa.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await BP(this,{idToken:e}),i=await er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(st(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(st(this.app))return Promise.reject(kt(this));const n=e?ee(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return st(this.app)?Promise.reject(kt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return st(this.app)?Promise.reject(kt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GH(this),n=new HH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Uo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await LH(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Oa.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vH(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function at(t){return ee(t)}class ww{constructor(e){this.auth=e,this.observer=null,this.addObserver=xx(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $H(t){pd=t}function OT(t){return pd.loadJS(t)}function YH(){return pd.recaptchaV2Script}function JH(){return pd.recaptchaEnterpriseScript}function QH(){return pd.gapiScript}function ZP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const WH="recaptcha-enterprise",XH="NO_RECAPTCHA";class ZH{constructor(e){this.type=WH,this.auth=at(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{bH(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new CH(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Ew(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(XH)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Ew(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JH();l.length!==0&&(l+=a),OT(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Cw(t,e,n,i=!1){const r=new ZH(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vc(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Cw(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Cw(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}function jH(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Mn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function e9(t,e,n){const i=at(t);H(i._canInitEmulator,i,"emulator-config-failed"),H(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=jP(e),{host:o,port:a}=t9(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||n9()}function jP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function t9(t){const e=jP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Rw(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Rw(o)}}}function Rw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function n9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t,e){return ut(t,"POST","/v1/accounts:resetPassword",lt(t,e))}async function i9(t,e){return ut(t,"POST","/v1/accounts:update",e)}async function r9(t,e){return ut(t,"POST","/v1/accounts:signUp",e)}async function s9(t,e){return ut(t,"POST","/v1/accounts:update",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o9(t,e){return wr(t,"POST","/v1/accounts:signInWithPassword",lt(t,e))}async function Bp(t,e){return ut(t,"POST","/v1/accounts:sendOobCode",lt(t,e))}async function a9(t,e){return Bp(t,e)}async function l9(t,e){return Bp(t,e)}async function u9(t,e){return Bp(t,e)}async function c9(t,e){return Bp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(t,e){return wr(t,"POST","/v1/accounts:signInWithEmailLink",lt(t,e))}async function f9(t,e){return wr(t,"POST","/v1/accounts:signInWithEmailLink",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends Ll{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Uc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Uc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vc(e,n,"signInWithPassword",o9);case"emailLink":return d9(e,{email:this._email,oobCode:this._password});default:Ht(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vc(e,i,"signUpPassword",r9);case"emailLink":return f9(e,{idToken:n,email:this._email,oobCode:this._password});default:Ht(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar(t,e){return wr(t,"POST","/v1/accounts:signInWithIdp",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9="http://localhost";class Vi extends Ll{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ht("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=MT(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Vi(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ar(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ar(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ar(e,n)}buildRequest(){const e={requestUri:h9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(t,e){return ut(t,"POST","/v1/accounts:sendVerificationCode",lt(t,e))}async function m9(t,e){return wr(t,"POST","/v1/accounts:signInWithPhoneNumber",lt(t,e))}async function g9(t,e){const n=await wr(t,"POST","/v1/accounts:signInWithPhoneNumber",lt(t,e));if(n.temporaryProof)throw xu(t,"account-exists-with-different-credential",n);return n}const _9={USER_NOT_FOUND:"user-not-found"};async function y9(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return wr(t,"POST","/v1/accounts:signInWithPhoneNumber",lt(t,n),_9)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends Ll{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new uo({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new uo({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return m9(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return g9(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return y9(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new uo({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T9(t){const e=Sa(Au(t)).link,n=e?Sa(Au(e)).deep_link_id:null,i=Sa(Au(t)).deep_link_id;return(i?Sa(Au(i)).link:null)||i||n||e||t}class Gp{constructor(e){var n,i,r,s,o,a;const l=Sa(Au(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,f=(i=l.oobCode)!==null&&i!==void 0?i:null,p=v9((r=l.mode)!==null&&r!==void 0?r:null);H(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=T9(e);try{return new Gp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.providerId=Ms.PROVIDER_ID}static credential(e,n){return Uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Gp.parseLink(n);return H(i,"argument-error"),Uc._fromEmailAndCode(e,i.code,i.tenantId)}}Ms.PROVIDER_ID="password";Ms.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ms.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends Cr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fa extends Ol{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),Vi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),Vi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:a}=e;if(!i&&!r&&!n&&!s||!a)return null;try{return new Fa(a)._credential({idToken:n,accessToken:i,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Ol{constructor(){super("facebook.com")}static credential(e){return Vi._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vi._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return vi.credential(n,i)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Ol{constructor(){super("github.com")}static credential(e){return Vi._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9="http://localhost";class pl extends Ll{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ar(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ar(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ar(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,pendingToken:s}=n;return!i||!r||!s||i!==r?null:new pl(i,s)}static _create(e,n){return new pl(e,n)}buildRequest(){return{requestUri:E9,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9="saml.";class Oh extends Cr{constructor(e){H(e.startsWith(I9),"argument-error"),super(e)}static credentialFromResult(e){return Oh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Oh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=pl.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:i}=e;if(!n||!i)return null;try{return pl._create(i,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Ol{constructor(){super("twitter.com")}static credential(e,n){return Vi._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ei.credential(n,i)}catch{return null}}}Ei.TWITTER_SIGN_IN_METHOD="twitter.com";Ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e){return wr(t,"POST","/v1/accounts:signUp",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await er._fromIdTokenResponse(e,i,r),o=bw(i);return new si({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=bw(i);return new si({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function bw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(t){var e;if(st(t.app))return Promise.reject(kt(t));const n=at(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new si({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await tM(n,{returnSecureToken:!0}),r=await si._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends Zt{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Fh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Fh(e,n,i,r)}}function nM(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fh._fromErrorAndOperation(t,s,e,i):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A9(t,e){const n=ee(t);await zp(!0,n,e);const{providerUserInfo:i}=await NH(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),r=iM(i||[]);return n.providerData=n.providerData.filter(s=>r.has(s.providerId)),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function FT(t,e,n=!1){const i=await _r(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return si._forOperation(t,"link",i)}async function zp(t,e,n){await kc(e);const i=iM(e.providerData),r=t===!1?"provider-already-linked":"no-such-provider";H(i.has(n)===t,e.auth,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e,n=!1){const{auth:i}=t;if(st(i.app))return Promise.reject(kt(i));const r="reauthenticate";try{const s=await _r(t,nM(i,r,e,t),n);H(s.idToken,i,"internal-error");const o=qp(s.idToken);H(o,i,"internal-error");const{sub:a}=o;return H(t.uid===a,i,"user-mismatch"),si._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ht(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e,n=!1){if(st(t.app))return Promise.reject(kt(t));const i="signIn",r=await nM(t,i,e),s=await si._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function Hp(t,e){return sM(at(t),e)}async function oM(t,e){const n=ee(t);return await zp(!1,n,e.providerId),FT(n,e)}async function aM(t,e){return rM(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w9(t,e){return wr(t,"POST","/v1/accounts:signInWithCustomToken",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(t,e){if(st(t.app))return Promise.reject(kt(t));const n=at(t),i=await w9(n,{token:e,returnSecureToken:!0}),r=await si._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?qT._fromServerResponse(e,n):"totpInfo"in n?BT._fromServerResponse(e,n):Ht(e,"internal-error")}}class qT extends md{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new qT(n)}}class BT extends md{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new BT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e,n){var i;H(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(t){const e=at(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function R9(t,e,n){const i=at(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Kp(i,r,n),await Vc(i,r,"getOobCode",l9)}async function b9(t,e,n){await eM(ee(t),{oobCode:e,newPassword:n}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&GT(t),i})}async function x9(t,e){await s9(ee(t),{oobCode:e})}async function lM(t,e){const n=ee(t),i=await eM(n,{oobCode:e}),r=i.requestType;switch(H(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(i.mfaInfo,n,"internal-error");default:H(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=md._fromServerResponse(at(n),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function N9(t,e){const{data:n}=await lM(ee(t),e);return n.email}async function D9(t,e,n){if(st(t.app))return Promise.reject(kt(t));const i=at(t),o=await Vc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GT(t),l}),a=await si._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function P9(t,e,n){return st(t.app)?Promise.reject(kt(t)):Hp(ee(t),Ms.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&GT(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(t,e,n){const i=at(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){H(a.handleCodeInApp,i,"argument-error"),a&&Kp(i,o,a)}s(r,n),await Vc(i,r,"getOobCode",u9)}function k9(t,e){const n=Gp.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function V9(t,e,n){if(st(t.app))return Promise.reject(kt(t));const i=ee(t),r=Ms.credentialWithLink(e,n||Mc());return H(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Hp(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(t,e){return ut(t,"POST","/v1/accounts:createAuthUri",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L9(t,e){const n=UT()?Mc():"http://localhost",i={identifier:e,continueUri:n},{signinMethods:r}=await U9(ee(t),i);return r||[]}async function O9(t,e){const n=ee(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Kp(n.auth,r,e);const{email:s}=await a9(n.auth,r);s!==t.email&&await t.reload()}async function F9(t,e,n){const i=ee(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Kp(i.auth,s,n);const{email:o}=await c9(i.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e){return ut(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=ee(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await _r(i,q9(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function G9(t,e){const n=ee(t);return st(n.auth.app)?Promise.reject(kt(n.auth)):uM(n,e,null)}function z9(t,e){return uM(ee(t),null,e)}async function uM(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await _r(t,i9(i,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!i&&(t!=null&&t.idToken)){const o=(n=(e=qp(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new qa(s,a)}}if(!i)return null;switch(i){case"facebook.com":return new K9(s,r);case"github.com":return new $9(s,r);case"google.com":return new Y9(s,r);case"twitter.com":return new J9(s,r,t.screenName||null);case"custom":case"anonymous":return new qa(s,null);default:return new qa(s,i,r)}}class qa{constructor(e,n,i={}){this.isNewUser=e,this.providerId=n,this.profile=i}}class cM extends qa{constructor(e,n,i,r){super(e,n,i),this.username=r}}class K9 extends qa{constructor(e,n){super(e,"facebook.com",n)}}class $9 extends cM{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Y9 extends qa{constructor(e,n){super(e,"google.com",n)}}class J9 extends cM{constructor(e,n,i){super(e,"twitter.com",n,i)}}function Q9(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:H9(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,i){this.type=e,this.credential=n,this.user=i}static _fromIdtoken(e,n){return new eo("enroll",e,n)}static _fromMfaPendingCredential(e){return new eo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,i;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return eo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((i=e.multiFactorSession)===null||i===void 0)&&i.idToken)return eo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n,i){this.session=e,this.hints=n,this.signInResolver=i}static _fromError(e,n){const i=at(e),r=n.customData._serverResponse,s=(r.mfaInfo||[]).map(a=>md._fromServerResponse(i,a));H(r.mfaPendingCredential,i,"internal-error");const o=eo._fromMfaPendingCredential(r.mfaPendingCredential);return new zT(o,s,async a=>{const l=await a._process(i,o);delete r.mfaInfo,delete r.mfaPendingCredential;const u=Object.assign(Object.assign({},r),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const f=await si._fromIdTokenResponse(i,n.operationType,u);return await i._updateCurrentUser(f.user),f;case"reauthenticate":return H(n.user,i,"internal-error"),si._forOperation(n.user,n.operationType,u);default:Ht(i,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function W9(t,e){var n;const i=ee(t),r=e;return H(e.customData.operationType,i,"argument-error"),H((n=r.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,i,"argument-error"),zT._fromError(i,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:start",lt(t,e))}function Z9(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:finalize",lt(t,e))}function j9(t,e){return ut(t,"POST","/v2/accounts/mfaEnrollment:withdraw",lt(t,e))}class HT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(i=>md._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new HT(e)}async getSession(){return eo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const i=e,r=await this.getSession(),s=await _r(this.user,i._process(this.user.auth,r,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const r=await _r(this.user,j9(this.user.auth,{idToken:i,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(r),await this.user.reload()}catch(r){throw r}}}const pg=new WeakMap;function e8(t){const e=ee(t);return pg.has(e)||pg.set(e,HT._fromUser(e)),pg.get(e)}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=1e3,n8=10;class fM extends dM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);qH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,n8):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},t8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fM.type="LOCAL";const KT=fM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM extends dM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hM.type="SESSION";const Ro=hM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new $p(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await i8(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$p.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=gd("",20);r.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return window}function s8(t){_t().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(){return typeof _t().WorkerGlobalScope<"u"&&typeof _t().importScripts=="function"}async function o8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function l8(){return $T()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="firebaseLocalStorageDb",u8=1,Bh="firebaseLocalStorage",mM="fbase_key";class _d{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yp(t,e){return t.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function c8(){const t=indexedDB.deleteDatabase(pM);return new _d(t).toPromise()}function iy(){const t=indexedDB.open(pM,u8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Bh,{keyPath:mM})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Bh)?e(i):(i.close(),await c8(),e(await iy()))})})}async function xw(t,e,n){const i=Yp(t,!0).put({[mM]:e,value:n});return new _d(i).toPromise()}async function d8(t,e){const n=Yp(t,!1).get(e),i=await new _d(n).toPromise();return i===void 0?null:i.value}function Nw(t,e){const n=Yp(t,!0).delete(e);return new _d(n).toPromise()}const f8=800,h8=3;class gM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>h8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $T()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$p._getInstance(l8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o8(),!this.activeServiceWorker)return;this.sender=new r8(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await iy();return await xw(e,qh,"1"),await Nw(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>xw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>d8(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Yp(r,!1).getAll();return new _d(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),f8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gM.type="LOCAL";const Lc=gM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t,e){return ut(t,"POST","/v2/accounts/mfaSignIn:start",lt(t,e))}function m8(t,e){return ut(t,"POST","/v2/accounts/mfaSignIn:finalize",lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8=500,_8=6e4,cf=1e12;class y8{constructor(e){this.auth=e,this.counter=cf,this._widgets=new Map}render(e,n){const i=this.counter;return this._widgets.set(i,new v8(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;const i=e||cf;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;const i=e||cf;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const i=e||cf;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""}}class v8{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r=typeof e=="string"?document.getElementById(e):e;H(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=T8(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},_8)},g8))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function T8(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=ZP("rcb"),E8=new dd(3e4,6e4);class I8{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=_t().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return H(S8(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Tw(_t().grecaptcha)?Promise.resolve(_t().grecaptcha):new Promise((i,r)=>{const s=_t().setTimeout(()=>{r(St(e,"network-request-failed"))},E8.get());_t()[mg]=()=>{_t().clearTimeout(s),delete _t()[mg];const a=_t().grecaptcha;if(!a||!Tw(a)){r(St(e,"internal-error"));return}const l=a.render;a.render=(u,f)=>{const p=l(u,f);return this.counter++,p},this.hostLanguage=n,i(a)};const o=`${YH()}?${Cl({onload:mg,render:"explicit",hl:n})}`;OT(o).catch(()=>{clearTimeout(s),r(St(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=_t().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function S8(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class A8{async load(e){return new y8(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="recaptcha",w8={theme:"light",type:"image"};let C8=class{constructor(e,n,i=Object.assign({},w8)){this.parameters=i,this.type=_M,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(e),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const r=typeof n=="string"?document.getElementById(n):n;H(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new A8:new I8,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){const i=_t()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(UT()&&!$T(),this.auth,"internal-error"),await R8(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await RH(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function R8(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=uo._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function b8(t,e,n){if(st(t.app))return Promise.reject(kt(t));const i=at(t),r=await Jp(i,e,ee(n));return new YT(r,s=>Hp(i,s))}async function x8(t,e,n){const i=ee(t);await zp(!1,i,"phone");const r=await Jp(i.auth,e,ee(n));return new YT(r,s=>oM(i,s))}async function N8(t,e,n){const i=ee(t);if(st(i.auth.app))return Promise.reject(kt(i.auth));const r=await Jp(i.auth,e,ee(n));return new YT(r,s=>aM(i,s))}async function Jp(t,e,n){var i;const r=await n.verify();try{H(typeof r=="string",t,"argument-error"),H(n.type===_M,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return H(o.type==="enroll",t,"internal-error"),(await X9(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{H(o.type==="signin",t,"internal-error");const a=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return H(a,t,"missing-multi-factor-info"),(await p8(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await p9(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return o}}finally{n._reset()}}async function D8(t,e){const n=ee(t);if(st(n.auth.app))return Promise.reject(kt(n.auth));await FT(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo=class Of{constructor(e){this.providerId=Of.PROVIDER_ID,this.auth=at(e)}verifyPhoneNumber(e,n){return Jp(this.auth,e,ee(n))}static credential(e,n){return uo._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Of.credentialFromTaggedObject(n)}static credentialFromError(e){return Of.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:i}=e;return n&&i?uo._fromTokenResponse(n,i):null}};bo.PROVIDER_ID="phone";bo.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t,e){return e?Mn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT extends Ll{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ar(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ar(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ar(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function P8(t){return sM(t.auth,new JT(t),t.bypassAuthState)}function M8(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),rM(n,new JT(t),t.bypassAuthState)}async function k8(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),FT(n,new JT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P8;case"linkViaPopup":case"linkViaRedirect":return k8;case"reauthViaPopup":case"reauthViaRedirect":return M8;default:Ht(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=new dd(2e3,1e4);async function U8(t,e,n){if(st(t.app))return Promise.reject(St(t,"operation-not-supported-in-this-environment"));const i=at(t);Ul(t,e,Cr);const r=Go(i,n);return new tr(i,"signInViaPopup",e,r).executeNotNull()}async function L8(t,e,n){const i=ee(t);if(st(i.auth.app))return Promise.reject(St(i.auth,"operation-not-supported-in-this-environment"));Ul(i.auth,e,Cr);const r=Go(i.auth,n);return new tr(i.auth,"reauthViaPopup",e,r,i).executeNotNull()}async function O8(t,e,n){const i=ee(t);Ul(i.auth,e,Cr);const r=Go(i.auth,n);return new tr(i.auth,"linkViaPopup",e,r,i).executeNotNull()}class tr extends yM{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,tr.currentPopupAction&&tr.currentPopupAction.cancel(),tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=gd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(St(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,V8.get())};e()}}tr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8="pendingRedirect",ju=new Map;class q8 extends yM{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const i=await B8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B8(t,e){const n=TM(e),i=vM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function QT(t,e){return vM(t)._set(TM(e),"true")}function G8(){ju.clear()}function WT(t,e){ju.set(t._key(),e)}function vM(t){return Mn(t._redirectPersistence)}function TM(t){return lo(F8,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t,e,n){return H8(t,e,n)}async function H8(t,e,n){if(st(t.app))return Promise.reject(kt(t));const i=at(t);Ul(t,e,Cr),await i._initializationPromise;const r=Go(i,n);return await QT(r,i),r._openRedirect(i,e,"signInViaRedirect")}function K8(t,e,n){return $8(t,e,n)}async function $8(t,e,n){const i=ee(t);if(Ul(i.auth,e,Cr),st(i.auth.app))return Promise.reject(kt(i.auth));await i.auth._initializationPromise;const r=Go(i.auth,n);await QT(r,i.auth);const s=await EM(i);return r._openRedirect(i.auth,e,"reauthViaRedirect",s)}function Y8(t,e,n){return J8(t,e,n)}async function J8(t,e,n){const i=ee(t);Ul(i.auth,e,Cr),await i.auth._initializationPromise;const r=Go(i.auth,n);await zp(!1,i,e.providerId),await QT(r,i.auth);const s=await EM(i);return r._openRedirect(i.auth,e,"linkViaRedirect",s)}async function Q8(t,e){return await at(t)._initializationPromise,Qp(t,e,!1)}async function Qp(t,e,n=!1){if(st(t.app))return Promise.reject(kt(t));const i=at(t),r=Go(i,e),o=await new q8(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function EM(t){const e=gd(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8=10*60*1e3;class IM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X8(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!SM(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(St(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W8&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dw(e))}saveEventToCache(e){this.cachedEventUids.add(Dw(e)),this.lastProcessedEventTime=Date.now()}}function Dw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM(t,e={}){return ut(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j8=/^https?/;async function e7(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AM(t);for(const n of e)try{if(t7(n))return}catch{}Ht(t,"unauthorized-domain")}function t7(t){const e=Mc(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!j8.test(n))return!1;if(Z8.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n7=new dd(3e4,6e4);function Pw(){const t=_t().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i7(t){return new Promise((e,n)=>{var i,r,s;function o(){Pw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pw(),n(St(t,"network-request-failed"))},timeout:n7.get()})}if(!((r=(i=_t().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=_t().gapi)===null||s===void 0)&&s.load)o();else{const a=ZP("iframefcb");return _t()[a]=()=>{gapi.load?o():n(St(t,"network-request-failed"))},OT(`${QH()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ff=null,e})}let Ff=null;function r7(t){return Ff=Ff||i7(t),Ff}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=new dd(5e3,15e3),o7="__/auth/iframe",a7="emulator/auth/iframe",l7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c7(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?LT(e,a7):`https://${t.config.authDomain}/${o7}`,i={apiKey:e.apiKey,appName:t.name,v:Tr},r=u7.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Cl(i).slice(1)}`}async function d7(t){const e=await r7(t),n=_t().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:c7(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l7,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=St(t,"network-request-failed"),a=_t().setTimeout(()=>{s(o)},s7.get());function l(){_t().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h7=500,p7=600,m7="_blank",g7="http://localhost";class Mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _7(t,e,n,i=h7,r=p7){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},f7),{width:i.toString(),height:r.toString(),top:s,left:o}),u=je().toLowerCase();n&&(a=$P(u)?m7:n),HP(u)&&(e=e||g7,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[_,S])=>`${m}${_}=${S},`,"");if(FH(u)&&a!=="_self")return y7(e||"",a),new Mw(null);const p=window.open(e||"",a,f);H(p,t,"popup-blocked");try{p.focus()}catch{}return new Mw(p)}function y7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="__/auth/handler",T7="emulator/auth/handler",E7=encodeURIComponent("fac");async function ry(t,e,n,i,r,s){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Tr,eventId:r};if(e instanceof Cr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",oB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof Ol){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),u=l?`#${E7}=${encodeURIComponent(l)}`:"";return`${I7(t)}?${Cl(a).slice(1)}${u}`}function I7({config:t}){return t.emulator?LT(t,T7):`https://${t.authDomain}/${v7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="webStorageSupport";class S7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ro,this._completeRedirectFn=Qp,this._overrideRedirectResult=WT}async _openPopup(e,n,i,r){var s;di((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ry(e,n,i,Mc(),r);return _7(e,o,gd())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await ry(e,n,i,Mc(),r);return s8(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(di(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await d7(e),i=new IM(e);return n.register("authEvent",r=>(H(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gg,{type:gg},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[gg];o!==void 0&&n(!!o),Ht(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e7(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WP()||KP()||hd()}}const A7=S7;class w7{constructor(e){this.factorId=e}_process(e,n,i){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,i);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ri("unexpected MultiFactorSessionType")}}}class XT extends w7{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new XT(e)}_finalizeEnroll(e,n,i){return Z9(e,{idToken:n,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return m8(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class wM{constructor(){}static assertion(e){return XT._fromCredential(e)}}wM.FACTOR_ID="phone";var kw="@firebase/auth",Vw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b7(t){pr(new ri("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;H(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XP(t)},u=new KH(i,r,s,l);return jH(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),pr(new ri("auth-internal",e=>{const n=at(e.getProvider("auth").getImmediate());return(i=>new C7(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(kw,Vw,R7(t)),On(kw,Vw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=5*60;Xq("authIdTokenMaxAge");function N7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$H({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=St("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",N7().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b7("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7=2e3;async function P7(t,e,n){var i;const{BuildInfo:r}=xo();di(e.sessionId,"AuthEvent did not contain a session ID");const s=await L7(e.sessionId),o={};return hd()?o.ibi=r.packageName:fd()?o.apn=r.packageName:Ht(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,ry(t,n,e.type,void 0,(i=e.eventId)!==null&&i!==void 0?i:void 0,o)}async function M7(t){const{BuildInfo:e}=xo(),n={};hd()?n.iosBundleId=e.packageName:fd()?n.androidPackageName=e.packageName:Ht(t,"operation-not-supported-in-this-environment"),await AM(t,n)}function k7(t){const{cordova:e}=xo();return new Promise(n=>{e.plugins.browsertab.isAvailable(i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,OH()?"_blank":"_system","location=yes"),n(r)})})}async function V7(t,e,n){const{cordova:i}=xo();let r=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var p;s();const m=(p=i.plugins.browsertab)===null||p===void 0?void 0:p.close;typeof m=="function"&&m(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(St(t,"redirect-cancelled-by-user"))},D7))}function f(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),fd()&&document.addEventListener("visibilitychange",f,!1),r=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",f,!1),a&&window.clearTimeout(a)}})}finally{r()}}function U7(t){var e,n,i,r,s,o,a,l,u,f;const p=xo();H(typeof((e=p==null?void 0:p.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof((n=p==null?void 0:p.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H(typeof((s=(r=(i=p==null?void 0:p.cordova)===null||i===void 0?void 0:i.plugins)===null||r===void 0?void 0:r.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((l=(a=(o=p==null?void 0:p.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((f=(u=p==null?void 0:p.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||f===void 0?void 0:f.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function L7(t){const e=O7(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}function O7(t){if(di(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7=20;class q7 extends IM{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function B7(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:H7(),postBody:null,tenantId:t.tenantId,error:St(t,"no-auth-event")}}function G7(t,e){return sy()._set(oy(t),e)}async function Uw(t){const e=await sy()._get(oy(t));return e&&await sy()._remove(oy(t)),e}function z7(t,e){var n,i;const r=$7(e);if(r.includes("/__/auth/callback")){const s=qf(r),o=s.firebaseError?K7(decodeURIComponent(s.firebaseError)):null,a=(i=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||i===void 0?void 0:i[1],l=a?St(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}function H7(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<F7;n++){const i=Math.floor(Math.random()*e.length);t.push(e.charAt(i))}return t.join("")}function sy(){return Mn(KT)}function oy(t){return lo("authEvent",t.config.apiKey,t.name)}function K7(t){try{return JSON.parse(t)}catch{return null}}function $7(t){const e=qf(t),n=e.link?decodeURIComponent(e.link):void 0,i=qf(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return qf(r).link||r||i||n||t}function qf(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Sa(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=500;class J7{constructor(){this._redirectPersistence=Ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qp,this._overrideRedirectResult=WT}async _initialize(e){const n=e._key();let i=this.eventManagers.get(n);return i||(i=new q7(e),this.eventManagers.set(n,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Ht(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,i,r){U7(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),G8(),await this._originValidation(e);const o=B7(e,i,r);await G7(e,o);const a=await P7(e,o,n),l=await k7(a);return V7(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=M7(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:i,handleOpenURL:r,BuildInfo:s}=xo(),o=setTimeout(async()=>{await Uw(e),n.onEvent(Lw())},Y7),a=async f=>{clearTimeout(o);const p=await Uw(e);let m=null;p&&(f!=null&&f.url)&&(m=z7(p,f.url)),n.onEvent(m||Lw())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,a);const l=r,u=`${s.packageName.toLowerCase()}://`;xo().handleOpenURL=async f=>{if(f.toLowerCase().startsWith(u)&&a({url:f}),typeof l=="function")try{l(f)}catch(p){console.error(p)}}}}const Q7=J7;function Lw(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t,e){at(t)._logFramework(e)}var X7="@firebase/auth-compat",Z7="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=1e3;function ec(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function eK(){return ec()==="http:"||ec()==="https:"}function CM(t=je()){return!!((ec()==="file:"||ec()==="ionic:"||ec()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function tK(){return vv()||yv()}function nK(){return Rx()&&(document==null?void 0:document.documentMode)===11}function iK(t=je()){return/Edge\/\d+/.test(t)}function rK(t=je()){return nK()||iK(t)}function RM(){try{const t=self.localStorage,e=gd();if(t)return t.setItem(e,"1"),t.removeItem(e),rK()?mc():!0}catch{return ZT()&&mc()}return!1}function ZT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function _g(){return(eK()||Cx()||CM())&&!tK()&&RM()&&!ZT()}function bM(){return CM()&&typeof document<"u"}async function sK(){return bM()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},j7);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function oK(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn={LOCAL:"local",NONE:"none",SESSION:"session"},_u=H,xM="persistence";function aK(t,e){if(_u(Object.values(Nn).includes(e),t,"invalid-persistence-type"),vv()){_u(e!==Nn.SESSION,t,"unsupported-persistence-type");return}if(yv()){_u(e===Nn.NONE,t,"unsupported-persistence-type");return}if(ZT()){_u(e===Nn.NONE||e===Nn.LOCAL&&mc(),t,"unsupported-persistence-type");return}_u(e===Nn.NONE||RM(),t,"unsupported-persistence-type")}async function ay(t){await t._initializationPromise;const e=NM(),n=lo(xM,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function lK(t,e){const n=NM();if(!n)return[];const i=lo(xM,t,e);switch(n.getItem(i)){case Nn.NONE:return[hl];case Nn.LOCAL:return[Lc,Ro];case Nn.SESSION:return[Ro];default:return[]}}function NM(){var t;try{return((t=oK())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=H;class jr{constructor(){this.browserResolver=Mn(A7),this.cordovaResolver=Mn(Q7),this.underlyingResolver=null,this._redirectPersistence=Ro,this._completeRedirectFn=Qp,this._overrideRedirectResult=WT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,i,r)}async _openRedirect(e,n,i,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,i,r)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return bM()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return uK(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await sK();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){return t.unwrap()}function cK(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t){return PM(t)}function fK(t,e){var n;const i=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const r=e;r.resolver=new hK(t,W9(t,e))}else if(i){const r=PM(e),s=e;r&&(s.credential=r,s.tenantId=i.tenantId||void 0,s.email=i.email||void 0,s.phoneNumber=i.phoneNumber||void 0)}}function PM(t){const{_tokenResponse:e}=t instanceof Zt?t.customData:t;if(!e)return null;if(!(t instanceof Zt)&&"temporaryProof"in e&&"phoneNumber"in e)return bo.credentialFromResult(t);const n=e.providerId;if(!n||n===gu.PASSWORD)return null;let i;switch(n){case gu.GOOGLE:i=vi;break;case gu.FACEBOOK:i=yi;break;case gu.GITHUB:i=Ti;break;case gu.TWITTER:i=Ei;break;default:const{oauthIdToken:r,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!r&&!a?null:a?n.startsWith("saml.")?pl._create(n,a):Vi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:r,accessToken:s}):new Fa(n).credential({idToken:r,accessToken:s,rawNonce:l})}return t instanceof Zt?i.credentialFromError(t):i.credentialFromResult(t)}function vn(t,e){return e.catch(n=>{throw n instanceof Zt&&fK(t,n),n}).then(n=>{const i=n.operationType,r=n.user;return{operationType:i,credential:dK(n),additionalUserInfo:Q9(n),user:nr.getOrCreate(r)}})}async function ly(t,e){const n=await e;return{verificationId:n.verificationId,confirm:i=>vn(t,n.confirm(i))}}class hK{constructor(e,n){this.resolver=n,this.auth=cK(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return vn(DM(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._delegate=e,this.multiFactor=e8(e)}static getOrCreate(e){return nr.USER_MAP.has(e)||nr.USER_MAP.set(e,new nr(e)),nr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return vn(this.auth,oM(this._delegate,e))}async linkWithPhoneNumber(e,n){return ly(this.auth,x8(this._delegate,e,n))}async linkWithPopup(e){return vn(this.auth,O8(this._delegate,e,jr))}async linkWithRedirect(e){return await ay(at(this.auth)),Y8(this._delegate,e,jr)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return vn(this.auth,aM(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return ly(this.auth,N8(this._delegate,e,n))}reauthenticateWithPopup(e){return vn(this.auth,L8(this._delegate,e,jr))}async reauthenticateWithRedirect(e){return await ay(at(this.auth)),K8(this._delegate,e,jr)}sendEmailVerification(e){return O9(this._delegate,e)}async unlink(e){return await A9(this._delegate,e),this}updateEmail(e){return G9(this._delegate,e)}updatePassword(e){return z9(this._delegate,e)}updatePhoneNumber(e){return D8(this._delegate,e)}updateProfile(e){return B9(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return F9(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}nr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=H;class uy{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;yu(i,"invalid-api-key",{appName:e.name}),yu(i,"invalid-api-key",{appName:e.name});const r=typeof window<"u"?jr:void 0;this._delegate=n.initialize({options:{persistence:pK(i,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(_H),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?nr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){e9(this._delegate,e,n)}applyActionCode(e){return x9(this._delegate,e)}checkActionCode(e){return lM(this._delegate,e)}confirmPasswordReset(e,n){return b9(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return vn(this._delegate,D9(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return L9(this._delegate,e)}isSignInWithEmailLink(e){return k9(this._delegate,e)}async getRedirectResult(){yu(_g(),this._delegate,"operation-not-supported-in-this-environment");const e=await Q8(this._delegate,jr);return e?vn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){W7(this._delegate,e)}onAuthStateChanged(e,n,i){const{next:r,error:s,complete:o}=Ow(e,n,i);return this._delegate.onAuthStateChanged(r,s,o)}onIdTokenChanged(e,n,i){const{next:r,error:s,complete:o}=Ow(e,n,i);return this._delegate.onIdTokenChanged(r,s,o)}sendSignInLinkToEmail(e,n){return M9(this._delegate,e,n)}sendPasswordResetEmail(e,n){return R9(this._delegate,e,n||void 0)}async setPersistence(e){aK(this._delegate,e);let n;switch(e){case Nn.SESSION:n=Ro;break;case Nn.LOCAL:n=await Mn(Lc)._isAvailable()?Lc:KT;break;case Nn.NONE:n=hl;break;default:return Ht("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return vn(this._delegate,S9(this._delegate))}signInWithCredential(e){return vn(this._delegate,Hp(this._delegate,e))}signInWithCustomToken(e){return vn(this._delegate,C9(this._delegate,e))}signInWithEmailAndPassword(e,n){return vn(this._delegate,P9(this._delegate,e,n))}signInWithEmailLink(e,n){return vn(this._delegate,V9(this._delegate,e,n))}signInWithPhoneNumber(e,n){return ly(this._delegate,b8(this._delegate,e,n))}async signInWithPopup(e){return yu(_g(),this._delegate,"operation-not-supported-in-this-environment"),vn(this._delegate,U8(this._delegate,e,jr))}async signInWithRedirect(e){return yu(_g(),this._delegate,"operation-not-supported-in-this-environment"),await ay(this._delegate),z8(this._delegate,e,jr)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return N9(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}uy.Persistence=Nn;function Ow(t,e,n){let i=t;typeof t!="function"&&({next:i,error:e,complete:n}=t);const r=i;return{next:o=>r(o&&nr.getOrCreate(o)),error:e,complete:n}}function pK(t,e){const n=lK(t,e);if(typeof self<"u"&&!n.includes(Lc)&&n.push(Lc),typeof window<"u")for(const i of[KT,Ro])n.includes(i)||n.push(i);return n.includes(hl)||n.push(hl),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.providerId="phone",this._delegate=new bo(DM(pi.auth()))}static credential(e,n){return bo.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}jT.PHONE_SIGN_IN_METHOD=bo.PHONE_SIGN_IN_METHOD;jT.PROVIDER_ID=bo.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=H;class gK{constructor(e,n,i=pi.app()){var r;mK((r=i.options)===null||r===void 0?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new C8(i.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K="auth-compat";function yK(t){t.INTERNAL.registerComponent(new ri(_K,e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new uy(n,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ta.EMAIL_SIGNIN,PASSWORD_RESET:ta.PASSWORD_RESET,RECOVER_EMAIL:ta.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ta.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ta.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ta.VERIFY_EMAIL}},EmailAuthProvider:Ms,FacebookAuthProvider:yi,GithubAuthProvider:Ti,GoogleAuthProvider:vi,OAuthProvider:Fa,SAMLAuthProvider:Oh,PhoneAuthProvider:jT,PhoneMultiFactorGenerator:wM,RecaptchaVerifier:gK,TwitterAuthProvider:Ei,Auth:uy,AuthCredential:Ll,Error:Zt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(X7,Z7)}yK(pi);const vK={apiKey:"AIzaSyC7ep2vb7UhYTAVZAj78WR2iQcRH_JNxQg",authDomain:"course-results-jesus.firebaseapp.com",projectId:"course-results-jesus",storageBucket:"course-results-jesus.appspot.com",messagingSenderId:"683397242327",appId:"1:683397242327:web:880331411333ec502a7f92",measurementId:"G-MEC27E63R5"};pi.initializeApp(vK);const df=pi.firestore();pi.storage();const yg=pi.auth(),Bf=()=>R.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),Fw=[{text:"          ",reference:" 18: 20"},{text:"      .",reference:" 4: 13"},{text:"    .",reference:" 23: 1"},{text:"      :    .",reference:" 16: 33"},{text:"   .    .      .",reference:" 41: 10"}],TK=()=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-4 0h4"})}),EK=()=>{const[t,e]=W.useState({text:"",reference:""});return W.useEffect(()=>{const n=Math.floor(Math.random()*Fw.length);e(Fw[n])},[]),t.text?R.jsxs("div",{className:"w-full mt-10 pt-6 border-t border-[var(--card-border-rgba)] text-center",children:[R.jsx("h3",{className:"text-sm font-bold text-[rgb(var(--color-primary-light-text-rgb))]/90 mb-2 tracking-widest uppercase",children:" "}),R.jsxs("blockquote",{className:"text-white/80 text-lg",style:{fontFamily:"'Amiri', serif"},children:[R.jsxs("p",{children:['"',t.text,'"']}),R.jsxs("footer",{className:"mt-2 text-xs text-white/50",children:["(",t.reference,")"]})]})]}):null},IK=({query:t,setQuery:e,onSearch:n,isLoading:i,error:r,onShowTutorial:s})=>{const o=a=>{a.preventDefault(),n()};return R.jsx("div",{className:"w-full flex items-center justify-center p-4",children:R.jsxs("div",{className:"relative w-full max-w-lg bg-[var(--card-bg-light-rgba)] dark:bg-[var(--card-bg-dark-rgba)] backdrop-blur-[var(--card-backdrop-blur)] rounded-2xl p-10 md:p-14 shadow-2xl border border-[var(--card-border-rgba)] text-center animate-fade-in-up",children:[R.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white mb-3",style:{fontFamily:"'El Messiri', sans-serif"},children:"  "}),R.jsx("p",{className:"text-white/80 mb-8 max-w-md mx-auto",children:"        ."}),R.jsxs("form",{onSubmit:o,className:"w-full max-w-sm mx-auto",children:[R.jsxs("div",{className:"relative mb-4",children:[R.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:R.jsx(TK,{})}),R.jsx("input",{type:"text",value:t,onChange:a=>e(a.target.value),placeholder:" (   )",className:"w-full px-4 py-4 pr-12 text-lg text-[var(--main-text-color-light)] dark:text-white bg-white/80 dark:bg-white/10 border-2 border-transparent focus:bg-white dark:focus:bg-white/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[rgb(var(--color-primary-rgb))] transition-all duration-300",disabled:i})]}),R.jsx("button",{type:"submit",className:"w-full px-8 py-4 bg-[rgb(var(--color-primary-rgb))] hover:bg-[rgb(var(--color-primary-accent-rgb))] text-white font-bold text-lg rounded-xl focus:outline-none focus:ring-4 focus:ring-[rgb(var(--color-primary-rgb))]/50 disabled:bg-[rgb(var(--color-primary-accent-rgb))] disabled:opacity-70 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 shadow-lg shadow-indigo-500/30",disabled:i,children:i?R.jsx(Bf,{}):""})]}),r&&R.jsx("p",{className:"text-red-300 bg-red-900/50 p-2 rounded-md mt-4 font-semibold",children:r}),R.jsx("div",{className:"mt-8",children:R.jsxs("button",{onClick:s,className:"flex items-center justify-center gap-2 text-sm text-[rgb(var(--color-primary-light-text-rgb))] hover:text-white font-semibold hover:underline",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"  "]})}),R.jsx(EK,{})]})})},SK="https://i.postimg.cc/y8htBK2y/1.png",eE=({className:t,alt:e="    ",style:n})=>R.jsx("img",{src:SK,alt:e,className:t,style:n}),AK=t=>t>=90?"":t>=80?" ":t>=70?"":t>=60?"":"",qw={gold:{border:"#D4AF37",text:"#5D4037",header:"#4A2C2A",background:"#FDFBF5",frameAccent:"#EADCB3"},blue:{border:"#4A90E2",text:"#004085",header:"#002752",background:"#F0F8FF",frameAccent:"#B0C4DE"},green:{border:"#2E7D32",text:"#1B5E20",header:"#003300",background:"#F5FFF5",frameAccent:"#A5D6A7"},maroon:{border:"#880E4F",text:"#560027",header:"#4A001F",background:"#FFF5F8",frameAccent:"#F48FB1"}},wK=({result:t,fontFamily:e,colorScheme:n,certificateDesign:i,fontColor:r,certificateRef:s,certificateTexts:o})=>{const a=qw[n]||qw.gold,u=((_,S)=>{const b={textShadow:"1px 1px 3px rgba(0, 0, 0, 0.25)"};if(S==="default")return{...b,color:_};switch(S){case"shinyGold":return{...b,color:"#B8860B"};case"royalBlue":return{...b,color:"#4169E1"};case"emeraldGreen":return{...b,color:"#2ECC71"};case"deepMaroon":return{...b,color:"#AD1457"};default:return{...b,color:_}}})(a.header,r),f={color:a.text},p=e==="'Amiri', serif"?"text-base sm:text-xl md:text-2xl leading-relaxed max-w-3xl":"text-sm sm:text-lg md:text-xl leading-relaxed max-w-3xl",m=({children:_})=>{const S="pt-0 pb-4 sm:pb-6 px-4 sm:px-6";switch(i){case"nader":case"rare":return R.jsx("div",{style:{backgroundImage:"url('https://i.postimg.cc/Fs1d8n0C/2.png')",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"h-full flex flex-col pt-8 pb-6 px-10 sm:pt-10 sm:pb-8 sm:px-12",children:_});case"nader_new_ar":return R.jsx("div",{style:{backgroundImage:"url('https://i.postimg.cc/28Q2tymW/6.png')",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"h-full flex flex-col pt-8 pb-6 px-10 sm:pt-10 sm:pb-8 sm:px-12",children:_});case"nader_new_en":return R.jsx("div",{style:{backgroundImage:"url('https://i.postimg.cc/hjJgzp5P/5.png')",backgroundSize:"100% 100%",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"h-full flex flex-col pt-8 pb-6 px-10 sm:pt-10 sm:pb-8 sm:px-12",children:_});case"modern":return R.jsx("div",{style:{padding:"8px",border:`2px solid ${a.border}`},className:"h-full flex flex-col",children:R.jsx("div",{style:{border:`6px solid ${a.frameAccent}`},className:`h-full flex flex-col ${S}`,children:_})});case"formal":return R.jsx("div",{style:{padding:"4px",border:`1px solid ${a.border}`},className:"h-full flex flex-col",children:R.jsx("div",{style:{padding:"4px",border:`4px solid ${a.border}`},className:"h-full flex flex-col",children:R.jsx("div",{style:{border:`1px solid ${a.border}`},className:`h-full flex flex-col ${S}`,children:_})})});case"vintage":return R.jsx("div",{style:{padding:"4px",border:`1px solid ${a.frameAccent}`},className:"h-full flex flex-col",children:R.jsx("div",{style:{padding:"8px",border:`6px groove ${a.border}`},className:"h-full flex flex-col",children:R.jsx("div",{style:{border:`1px solid ${a.frameAccent}`},className:`h-full flex flex-col ${S}`,children:_})})});case"classic":default:return R.jsx("div",{style:{padding:"12px",border:`12px double ${a.border}`},className:`h-full flex flex-col ${S}`,children:_})}};return R.jsx("div",{ref:s,className:"w-full max-w-5xl bg-white shadow-lg flex flex-col",style:{backgroundColor:a.background,aspectRatio:"297 / 210"},children:R.jsx(m,{children:R.jsxs("div",{className:"w-full h-full relative",children:[R.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"url('https://i.postimg.cc/3NwDhXRv/image.png')",backgroundSize:"35%",backgroundPosition:"center 65%",backgroundRepeat:"no-repeat",opacity:.1}}),R.jsxs("div",{className:"w-full h-full flex flex-col text-center",style:{fontFamily:e,position:"relative"},children:[R.jsxs("header",{className:"flex flex-row items-start justify-between gap-x-4 mb-2 sm:mb-4 md:mb-6 px-1 md:px-4",children:[R.jsx("img",{src:"https://i.postimg.cc/7YGfNYTP/Add-a-new-certificate-design-option-called-minimalist-with-a-simple-clean-border-and-minimal-deco.png",alt:"  ",className:"w-16 h-16 sm:w-24 sm:h-24 md:w-32 md:h-32 object-contain flex-shrink-0"}),R.jsxs("div",{className:"text-center mt-0 sm:mt-2 md:mt-3",children:[R.jsx("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold",style:{...u,fontFamily:"'El Messiri', sans-serif"},children:o.mainTitle}),R.jsx("p",{className:"text-xs sm:text-base md:text-lg mt-5 sm:mt-6 font-semibold whitespace-pre-wrap",style:{...f,fontFamily:"'Cairo', sans-serif"},children:o.subTitle})]}),R.jsx(eE,{className:"w-16 h-16 sm:w-24 sm:h-24 md:w-32 md:h-32 object-contain flex-shrink-0"})]}),R.jsxs("main",{className:"flex-grow flex flex-col items-center justify-center px-1 md:px-4",children:[R.jsx("p",{className:"mt-1 sm:mt-2 md:mt-4 text-xs sm:text-base md:text-lg",style:f,children:o.introLine}),R.jsx("h3",{className:"my-1 sm:my-2 md:my-4 text-xl sm:text-3xl md:text-4xl font-bold",style:{...u,fontFamily:e},children:t.name}),R.jsxs("p",{className:p,style:f,children:[o.bodyLine1," ",R.jsx("strong",{style:u,children:t.service})," ",o.bodyLine2," ",R.jsx("strong",{style:u,children:o.bodyLine3})," ",o.bodyLine4," ",R.jsx("strong",{style:u,children:typeof t.score=="number"?AK(t.score):""}),"."]})]}),R.jsxs("footer",{className:"mt-auto pt-2 sm:pt-4 md:pt-8 pb-4 sm:pb-6 md:pb-8 px-2 sm:px-4 md:px-8 flex justify-between items-center w-full",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-[10px] sm:text-sm md:text-base font-semibold",style:f,children:o.patronageTitle}),R.jsx("p",{className:"text-[10px] sm:text-sm md:text-base whitespace-pre-wrap",style:f,children:o.patronName})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-[10px] sm:text-sm md:text-base font-semibold",style:f,children:o.responsiblePriestTitle}),R.jsx("div",{className:"border-t mt-8 sm:mt-10 w-20 sm:w-32 md:w-44",style:{borderColor:a.text}})]})]})]})]})})})},CK={"'Noto Naskh Arabic', serif":" (Naskh)","'Cairo', sans-serif":" (Cairo)","'Amiri', serif":" (Amiri)","'El Messiri', sans-serif":" (El Messiri)","'Dancing Script', cursive":"Dancing Script","'Lobster', cursive":"Lobster"},RK={gold:" ",blue:" ",green:" ",maroon:" "},bK={default:"  ",shinyGold:"",royalBlue:" ",emeraldGreen:" ",deepMaroon:" "},xK={classic:" ()",modern:" ()",formal:" ()",vintage:" ( )",rare:" ",nader_new_ar:"",nader_new_en:"Nader"},NK=({fontFamily:t,setFontFamily:e,colorScheme:n,setColorScheme:i,certificateDesign:r,setCertificateDesign:s,fontColor:o,setFontColor:a})=>R.jsx("div",{className:"w-full max-w-5xl mb-6 bg-gray-50/80 backdrop-blur-sm p-4 rounded-lg border border-gray-200 shadow-sm",children:R.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"font-family",className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),R.jsx("select",{id:"font-family",value:t,onChange:l=>e(l.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(CK).map(([l,u])=>R.jsx("option",{value:l,style:{fontFamily:l},children:u},l))})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"color-scheme",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),R.jsx("select",{id:"color-scheme",value:n,onChange:l=>i(l.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(RK).map(([l,u])=>R.jsx("option",{value:l,children:u},l))})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"font-color",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),R.jsx("select",{id:"font-color",value:o,onChange:l=>a(l.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(bK).map(([l,u])=>R.jsx("option",{value:l,children:u},l))})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"certificate-design",className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),R.jsx("select",{id:"certificate-design",value:r,onChange:l=>s(l.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.entries(xK).map(([l,u])=>R.jsx("option",{value:l,children:u},l))})]})]})}),DK=({certData:t,onBackToResult:e,certificateTexts:n,customStyles:i})=>{const[r,s]=W.useState("'Noto Naskh Arabic', serif"),[o,a]=W.useState("blue"),[l,u]=W.useState("vintage"),[f,p]=W.useState("default"),[m,_]=W.useState(!1),[S,b]=W.useState(!1),{paperSize:P,qualityScale:T}=i,v=W.useRef(null),A={...n,bodyLine3:t.courseName},N=()=>{const F=v.current;if(!F||!window.html2canvas||!window.jspdf){alert("        .");return}_(!0);const{jsPDF:C}=window.jspdf;window.html2canvas(F,{scale:T,useCORS:!0,backgroundColor:null}).then(E=>{const w=E.toDataURL("image/png"),x=new C({orientation:"landscape",unit:"px",format:P}),M=x.internal.pageSize.getWidth(),k=x.internal.pageSize.getHeight();x.addImage(w,"PNG",0,0,M,k),x.save(`-${t.name}.pdf`)}).catch(E=>{console.error("Error generating PDF:",E),alert("     PDF.")}).finally(()=>{_(!1)})},L=()=>{const F=v.current;if(!F||!window.html2canvas){alert("         .");return}b(!0),window.html2canvas(F,{scale:T,useCORS:!0,backgroundColor:null}).then(C=>{const E=document.createElement("a");E.href=C.toDataURL("image/png"),E.download=`-${t.name}.png`,document.body.appendChild(E),E.click(),document.body.removeChild(E)}).catch(C=>{console.error("Error generating image:",C),alert("    .")}).finally(()=>{b(!1)})};return R.jsxs("div",{className:"flex flex-col items-center w-full",children:[R.jsx("div",{className:"no-print w-full",children:R.jsx(NK,{fontFamily:r,setFontFamily:s,colorScheme:o,setColorScheme:a,certificateDesign:l,setCertificateDesign:u,fontColor:f,setFontColor:p})}),R.jsx("div",{id:"certificate-print-area",className:"w-full mt-4 sm:mt-6",children:R.jsx(wK,{result:{name:t.name,service:t.service,score:t.score},fontFamily:r,colorScheme:o,certificateDesign:l,fontColor:f,certificateRef:v,certificateTexts:A})}),R.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 mt-4 sm:mt-6 w-full max-w-5xl no-print",children:[R.jsx("button",{onClick:N,disabled:m||S,className:"w-full sm:w-auto bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75 transition-transform transform hover:scale-105 disabled:bg-green-300 disabled:cursor-wait",children:m?" ...":"  PDF"}),R.jsx("button",{onClick:L,disabled:m||S,className:"w-full sm:w-auto bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-opacity-75 transition-transform transform hover:scale-105 disabled:bg-sky-300 disabled:cursor-wait",children:S?" ...":"  "}),R.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-gray-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75 transition-transform transform hover:scale-105",children:" "})]})]})},Bw=()=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0m-7.072 0L3 21m18-9a9 9 0 11-18 0 9 9 0 0118 0z"})}),PK=()=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),MM=({className:t="h-6 w-6"})=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-4 0h4"})}),MK=()=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-300 dark:text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),kK=()=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),VK=()=>R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.52 4.674c.3.921-.755 1.688-1.54 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976-2.888c-.784.57-1.838-.197-1.539-1.118l1.52-4.674a1 1 0 00-.363-1.118L2.98 9.11c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.52-4.674z"})}),UK=()=>R.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:[R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6m-4-3v3m8-3v3"})]}),Gw=["bg-blue-500 text-white","bg-emerald-500 text-white","bg-amber-500 text-black","bg-rose-500 text-white","bg-violet-500 text-white","bg-cyan-500 text-white","bg-fuchsia-500 text-white","bg-lime-600 text-white","bg-teal-500 text-white","bg-orange-500 text-white","bg-indigo-500 text-white","bg-pink-500 text-white"],LK=t=>{let e=0;for(let i=0;i<t.length;i++)e=t.charCodeAt(i)+((e<<5)-e);const n=Math.abs(e%Gw.length);return Gw[n]},Oc="bg-[var(--card-bg-light-rgba)] dark:bg-[var(--card-bg-dark-rgba)] backdrop-blur-[var(--card-backdrop-blur)] rounded-2xl shadow-lg border-2",kM=t=>t===""||t===0?{grade:"",borderColor:"border-red-500",bgColor:"bg-red-500",textColor:"text-red-300",pointColor:"fill-red-500"}:t>=90?{grade:"",borderColor:"border-green-500",bgColor:"bg-green-500",textColor:"text-green-300",pointColor:"fill-green-400"}:t>=80?{grade:" ",borderColor:"border-sky-500",bgColor:"bg-sky-500",textColor:"text-sky-300",pointColor:"fill-sky-400"}:t>=70?{grade:"",borderColor:"border-amber-500",bgColor:"bg-amber-500",textColor:"text-amber-300",pointColor:"fill-amber-400"}:t>=60?{grade:"",borderColor:"border-orange-500",bgColor:"bg-orange-500",textColor:"text-orange-300",pointColor:"fill-orange-400"}:{grade:"",borderColor:"border-slate-500",bgColor:"bg-slate-500",textColor:"text-slate-300",pointColor:"fill-slate-400"},OK=({services:t,onSelect:e,onClose:n})=>Kh.createPortal(R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity duration-300",onClick:n,children:R.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-lg m-4 animate-fade-in-up",onClick:i=>i.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"service-select-title",children:[R.jsx("h3",{id:"service-select-title",className:"text-xl font-bold text-[var(--main-text-color-light)] dark:text-[var(--main-text-color-dark)] mb-2",children:"  "}),R.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-6",children:"       .           ."}),R.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:t.map(i=>R.jsxs("button",{onClick:()=>e(i),className:"w-full text-right px-4 py-3 bg-gray-50 dark:bg-slate-700 text-[var(--main-text-color-light)] dark:text-[var(--main-text-color-dark)] font-semibold rounded-lg hover:bg-[rgb(var(--color-primary-light-rgb))] hover:text-[rgb(var(--color-primary-dark-text-rgb))] dark:hover:bg-slate-600 transition-all duration-200 flex items-center gap-3 border border-gray-200 dark:border-slate-600",children:[R.jsx(MK,{}),R.jsx("span",{children:i})]},i))})]})}),document.body),vg=({icon:t,value:e,label:n,valueLabel:i,borderColorClass:r})=>R.jsxs("div",{className:`${Oc} border-l-8 border-b-8 ${r} p-6 flex flex-col items-center justify-center text-center transition-all duration-300 hover:-translate-y-1 hover:shadow-2xl`,children:[R.jsx("div",{className:"text-white",children:t}),R.jsxs("p",{className:"text-4xl font-bold text-white mt-2",children:[e,R.jsx("span",{className:"text-xl text-white/80",children:i})]}),R.jsx("p",{className:"text-sm text-white/80 mt-1",children:n})]}),FK=({result:t,onInitiateCertificate:e})=>{const{grade:n,borderColor:i,bgColor:r,textColor:s}=kM(t.score),o=Math.round(t.attendance<=1?t.attendance*100:t.attendance);return R.jsxs("div",{className:`${Oc} border-l-8 border-b-8 ${i} p-6 mb-6`,children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h3",{className:`text-xl font-bold text-white px-4 py-1.5 rounded-lg ${r}`,children:t.courseName}),R.jsx("span",{className:`font-bold text-lg text-white ${r} px-4 py-1.5 rounded-full`,children:n})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center my-6",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-slate-200 font-semibold text-base",children:""}),R.jsxs("p",{className:"text-white font-bold text-3xl mt-1",children:[o,"%"]}),R.jsx("div",{className:"w-full bg-gray-200/20 rounded-full h-2.5 mt-2",children:R.jsx("div",{className:`${r} h-2.5 rounded-full`,style:{width:`${o}%`}})})]}),R.jsxs("div",{className:"text-center",children:[R.jsx("p",{className:"text-slate-200 font-semibold text-base",children:""}),t.score!==""?R.jsxs("p",{className:"text-white font-bold text-3xl mt-1",children:[R.jsx("span",{className:s,children:t.score}),R.jsx("span",{className:"text-white/70",children:" / 100"})]}):R.jsx("p",{className:`text-3xl font-bold mt-1 ${s}`,children:""})]})]}),t.score!==""&&R.jsx("div",{className:"text-center mt-6",children:R.jsx("button",{onClick:()=>e(t),className:"px-8 py-3 bg-[rgb(var(--color-primary-rgb))] text-white font-bold rounded-lg hover:bg-[rgb(var(--color-primary-accent-rgb))] transition-transform transform hover:scale-105 shadow-lg",children:" "})})]})},qK=({profile:t,onGenerateMessage:e,motivationalMessage:n,isMessageLoading:i,onGenerateAdvice:r,spiritualAdvice:s,isAdviceLoading:o,onGenerateSpecialMessage:a,specialMessage:l,isSpecialMessageLoading:u})=>{const f=i||o||u,p=l||s||n,m=W.useMemo(()=>{if(!t||!t.results||t.results.length===0)return!1;const _=[...t.results].sort((b,P)=>P.year-b.year)[0];return _?(typeof _.attendance=="number"?_.attendance<=1?_.attendance*100:_.attendance:0)<50:!1},[t]);return R.jsxs("div",{className:`my-8 ${Oc} border-transparent p-6`,children:[R.jsxs("h3",{className:"text-xl font-bold text-white dark:text-slate-100 mb-6 text-center flex items-center justify-center gap-3",children:[R.jsx(Bw,{}),"  "]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("button",{onClick:e,disabled:f,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-amber-500/80 text-white font-semibold rounded-lg hover:bg-amber-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[i?R.jsx(Bf,{}):R.jsx(Bw,{}),R.jsx("span",{children:" "})]}),R.jsxs("button",{onClick:r,disabled:f,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-teal-500/80 text-white font-semibold rounded-lg hover:bg-teal-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[o?R.jsx(Bf,{}):R.jsx(PK,{}),R.jsx("span",{children:" "})]}),m&&R.jsxs("button",{onClick:a,disabled:f,className:"w-full md:col-span-2 flex items-center justify-center gap-2 px-4 py-3 bg-rose-500/80 text-white font-semibold rounded-lg hover:bg-rose-600 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[u?R.jsx(Bf,{}):R.jsx(MM,{className:"h-5 w-5"}),R.jsx("span",{children:" "})]})]}),R.jsx("div",{className:"mt-6 pt-6 border-t border-[var(--card-border-rgba)]",children:R.jsx("div",{className:"min-h-[10rem] flex items-center justify-center text-center",children:f?R.jsxs("div",{className:"flex flex-col items-center justify-center",role:"status",children:[R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-slate-500"}),R.jsx("p",{className:"text-slate-400 mt-3 text-sm",children:"  ..."})]}):p?R.jsx("blockquote",{className:"relative w-full animate-fade-in-up",children:R.jsx("p",{className:"text-lg md:text-xl text-white dark:text-slate-100 leading-loose whitespace-pre-wrap",style:{fontFamily:"'Amiri', serif"},children:p})}):R.jsx("p",{className:"text-slate-300 dark:text-slate-400",children:"         ."})})})]})},BK=({results:t})=>{const[e,n]=W.useState(null),i=W.useMemo(()=>t.map(T=>({...T,score:T.score===""?0:T.score})).filter(T=>typeof T.score=="number").sort((T,v)=>v.year-T.year||v.courseName.localeCompare(T.courseName)),[t]);if(i.length<2)return R.jsx("p",{className:"text-center text-slate-400 py-8",children:"       ."});const r=800,s=400,o={top:50,right:60,bottom:80,left:40},a=r-o.left-o.right,l=s-o.top-o.bottom,u=T=>o.left+a-T/(i.length-1)*a,f=T=>o.top+l-T/100*l,p=i.map((T,v)=>`${v===0?"M":"L"} ${u(v)} ${f(T.score)}`).join(" "),m=`${p} L ${u(i.length-1)} ${s-o.bottom} L ${u(0)} ${s-o.bottom} Z`,_=[{score:100,label:"100"},{score:90,label:""},{score:80,label:" "},{score:70,label:""},{score:60,label:""},{score:0,label:"0"}],S=i[0],b=S?u(0):0,P=S?f(S.score):0;return R.jsx("div",{className:"w-full overflow-x-auto py-4 flex justify-start",children:R.jsxs("svg",{viewBox:`0 0 ${r} ${s}`,className:"min-w-[${width}px] font-sans",onClick:()=>n(null),children:[R.jsxs("defs",{children:[R.jsxs("linearGradient",{id:"pathGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[R.jsx("stop",{offset:"0%",stopColor:"rgb(var(--color-primary-accent-rgb))"}),R.jsx("stop",{offset:"100%",stopColor:"rgb(var(--color-primary-rgb))"})]}),R.jsxs("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[R.jsx("stop",{offset:"0%",stopColor:"rgb(var(--color-primary-accent-rgb))",stopOpacity:"0.1"}),R.jsx("stop",{offset:"100%",stopColor:"rgb(var(--color-primary-rgb))",stopOpacity:"0.01"})]})]}),R.jsx("path",{d:"M0 300 C 150 200, 250 350, 400 250 S 550 150, 700 220 L 800 180 V 400 H 0 Z",fill:"rgba(100, 116, 139, 0.05)"}),_.map(({score:T,label:v})=>R.jsxs("g",{children:[R.jsx("line",{x1:o.left,y1:f(T),x2:r-o.right,y2:f(T),stroke:"rgba(148, 163, 179, 0.6)",strokeWidth:"1",strokeDasharray:"4 4"}),R.jsx("text",{x:r-o.right+8,y:f(T)+4,fill:"rgb(148, 163, 179)",className:"text-xs font-semibold",children:v})]},T)),R.jsx("path",{d:m,fill:"url(#areaGradient)"}),R.jsx("path",{d:p,fill:"none",stroke:"url(#pathGradient)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-draw-line"}),i.map((T,v)=>{const{pointColor:A}=kM(T.score);return R.jsxs("g",{onClick:N=>{N.stopPropagation(),n(e===v?null:v)},children:[R.jsx("circle",{cx:u(v),cy:f(T.score),r:"12",fill:"transparent",className:"cursor-pointer"}),R.jsx("circle",{cx:u(v),cy:f(T.score),r:e===v?8:5,className:`${A} stroke-slate-800/50 transition-all duration-200 cursor-pointer`,strokeWidth:"2"})]},v)}),R.jsxs("g",{transform:`translate(${b}, ${P})`,children:[R.jsx("circle",{cx:"0",cy:"-14",r:"4",fill:"white"}),R.jsx("path",{d:"M -5 -12 L 5 -12 L 0 -4 Z",fill:"white"})]}),e!==null&&(()=>{const T=i[e],v=u(e),A=f(T.score),N=`${T.courseName} (${T.year})  |  ${T.score}/100`,L=N.length*6.5+20,F=36,C=10;let E=A-20,w=-F;E+w<C&&(E=A+20,w=0);let x=-L/2;if(v+x+L>r-C){const M=v+x+L-(r-C);x-=M}if(v+x<C){const M=C-(v+x);x+=M}return R.jsxs("g",{transform:`translate(${v}, ${E})`,className:"pointer-events-none",children:[R.jsx("rect",{x,y:w,width:L,height:F,rx:"10",fill:"rgba(30, 41, 59, 0.95)",stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),R.jsx("text",{x:x+L/2,y:w+F/2,textAnchor:"middle",alignmentBaseline:"middle",fill:"white",className:"text-xs font-bold",style:{direction:"rtl"},children:N})]})})()]})})},GK=t=>{const{profile:e,onShowCertificate:n,onNewSearch:i}=t,[r,s]=W.useState(null),{servant:o,results:a}=e,l=W.useMemo(()=>{if(!a||a.length===0)return{avgAttendance:0,avgScore:0,attendedCourses:0,totalCourses:0};const _=a.reduce((N,L)=>{const F=typeof L.attendance=="number"?L.attendance:0,C=F<=1?F*100:F;return N+C},0),S=Math.round(_/a.length),b=a.filter(N=>typeof N.score=="number"),P=b.reduce((N,L)=>N+L.score,0),T=b.length>0?Math.round(P/b.length):0,v=b.length,A=a.length;return{avgAttendance:S,avgScore:T,attendedCourses:v,totalCourses:A}},[a]);W.useEffect(()=>(!!r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]);const f=[...W.useMemo(()=>{const _=new Set;return a.filter(S=>{const b=`${S.courseName}|${S.year}`;return _.has(b)?!1:(_.add(b),!0)})},[a])].sort((_,S)=>S.year-_.year),p=_=>{const S=(Array.isArray(o.allServices)&&o.allServices.length>0?o.allServices:[o.primaryService]).filter(Boolean);S.length>1?s(_):n({name:o.name,service:S[0]||"  ",courseName:_.courseName,score:_.score})},m=_=>{r&&n({name:o.name,service:_,courseName:r.courseName,score:r.score}),s(null)};return R.jsxs("div",{className:"animate-fade-in-up p-4 w-full max-w-4xl mx-auto",children:[r&&R.jsx(OK,{services:(Array.isArray(o.allServices)&&o.allServices.length>0?o.allServices:[o.primaryService]).filter(Boolean),onSelect:m,onClose:()=>s(null)}),R.jsxs("div",{className:`${Oc} border-transparent p-6 mb-8 flex items-center justify-between gap-6`,children:[R.jsx("div",{className:"flex-shrink-0",children:R.jsx("img",{src:o.avatarUrl||"https://i.postimg.cc/9XJjqvFn/tsmym-bdwn-nwan.png",alt:` ${o.name}`,className:"w-32 h-32 rounded-full object-cover border-4 border-white/20 shadow-lg"})}),R.jsxs("div",{className:"flex-grow text-right",children:[R.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 bg-clip-text text-transparent",style:{fontFamily:"'El Messiri', sans-serif"},children:o.name}),R.jsxs("div",{className:"inline-flex items-center gap-2 mt-3 bg-[rgb(var(--color-primary-rgb))] text-white px-4 py-2 rounded-full text-lg font-semibold",children:[R.jsx(MM,{className:"h-6 w-6"}),R.jsxs("span",{children:[": ",o.code]})]}),R.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 mt-4",children:(Array.isArray(o.allServices)&&o.allServices.length>0?o.allServices:[o.primaryService]).filter(Boolean).map(_=>R.jsx("span",{className:`px-4 py-1.5 text-base font-semibold rounded-full ${LK(_)}`,children:_},_))})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[R.jsx(vg,{icon:R.jsx(kK,{}),value:`${l.avgAttendance}`,valueLabel:"%",label:" ",borderColorClass:"border-sky-400"}),R.jsx(vg,{icon:R.jsx(VK,{}),value:`${l.avgScore}`,valueLabel:"/100",label:" ",borderColorClass:"border-amber-400"}),R.jsx(vg,{icon:R.jsx(UK,{}),value:`${l.attendedCourses}/${l.totalCourses}`,label:"  ",borderColorClass:"border-emerald-400"})]}),f.map((_,S)=>R.jsx("div",{style:{animationDelay:`${S*100}ms`},children:R.jsx(FK,{result:_,onInitiateCertificate:p})},`${_.courseName}-${_.year}`)),R.jsxs("div",{className:`${Oc} border-transparent p-6 mt-12`,children:[R.jsx("h3",{className:"text-2xl font-bold text-white dark:text-slate-100 mb-4 text-center",children:" "}),R.jsx("p",{className:"text-center text-lg text-slate-100 max-w-2xl mx-auto mb-6",children:"      .        .      (    )    .           ."}),R.jsx(BK,{results:e.results})]}),R.jsx(qK,{...t}),R.jsx("div",{className:"text-center",children:R.jsxs("button",{onClick:i,className:"mt-12 px-6 py-3 bg-[var(--card-bg-light-rgba)] dark:bg-[var(--card-bg-dark-rgba)] text-white font-semibold rounded-lg hover:bg-black/20 dark:hover:bg-black/30 backdrop-blur-md border border-[var(--card-border-rgba)] focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 mx-auto",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),R.jsx("span",{children:" "})]})})]})},zK=({onClose:t,onLogin:e,isLoggingIn:n,loginError:i})=>{const[r,s]=W.useState(""),[o,a]=W.useState("");W.useEffect(()=>{const u=localStorage.getItem("loginEmail");u&&s(u)},[]);const l=u=>{u.preventDefault(),e(r,o)};return Kh.createPortal(R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity duration-300",children:R.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm m-4 animate-fade-in-up",role:"dialog","aria-modal":"true","aria-labelledby":"login-modal-title",children:[R.jsxs("div",{className:"text-center",children:[R.jsx(eE,{className:"w-24 h-24 object-contain mx-auto mb-4"}),R.jsx("h3",{id:"login-modal-title",className:"text-xl font-bold text-slate-800",children:" "}),R.jsx("p",{className:"text-slate-600 mb-6",children:"      ."})]}),R.jsxs("form",{onSubmit:l,noValidate:!0,children:[R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:" "}),R.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:u=>s(u.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:" "}),R.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o,onChange:u=>a(u.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),i&&R.jsx("p",{className:"text-red-500 mt-4 text-sm font-semibold text-center",role:"alert",children:i}),R.jsxs("div",{className:"flex justify-end items-center gap-4 mt-8",children:[R.jsx("button",{type:"button",onClick:t,disabled:n,className:"px-5 py-2 bg-gray-100 text-slate-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:""}),R.jsx("button",{type:"submit",disabled:n||!r||!o,className:"w-28 px-5 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-indigo-300 disabled:cursor-wait flex justify-center items-center",children:n?R.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}):""})]})]})]})}),document.body)},HK={success:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},KK={success:"bg-green-50 border-green-200 dark:bg-green-900/30 dark:border-green-700",error:"bg-red-50 border-red-200 dark:bg-red-900/30 dark:border-red-700",info:"bg-blue-50 border-blue-200 dark:bg-blue-900/30 dark:border-blue-700"},$K={success:"text-gray-800 dark:text-green-200",error:"text-gray-800 dark:text-red-200",info:"text-gray-800 dark:text-blue-200"},YK=({message:t,type:e,onDismiss:n})=>{const[i,r]=W.useState(!1);W.useEffect(()=>{const o=setTimeout(()=>{r(!0);const a=setTimeout(n,300);return()=>clearTimeout(a)},4e3);return()=>clearTimeout(o)},[n]);const s=()=>{r(!0),setTimeout(n,300)};return R.jsxs("div",{className:`
        w-full max-w-sm p-4 rounded-xl shadow-lg border flex items-start gap-4 transition-all duration-300 ease-in-out
        ${KK[e]}
        ${i?"opacity-0 -translate-x-full":"opacity-100 translate-x-0"}
      `,style:{animation:"toast-in-left 0.5s ease"},children:[R.jsx("div",{className:"flex-shrink-0",children:HK[e]}),R.jsx("div",{className:"flex-grow",children:R.jsx("p",{className:`text-sm font-semibold ${$K[e]}`,children:t})}),R.jsx("button",{onClick:s,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 flex-shrink-0",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},VM=W.createContext(void 0),h$=()=>{const t=W.useContext(VM);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},JK=({children:t})=>{const[e,n]=W.useState([]),i=W.useCallback((s,o)=>{const a=Date.now();n(l=>[...l,{id:a,message:s,type:o}])},[]),r=W.useCallback(s=>{n(o=>o.filter(a=>a.id!==s))},[]);return R.jsxs(VM.Provider,{value:{addToast:i},children:[t,Kh.createPortal(R.jsx("div",{className:"fixed top-5 left-5 z-[100] w-full max-w-sm space-y-3",children:e.map(s=>R.jsx(YK,{message:s.message,type:s.type,onDismiss:()=>r(s.id)},s.id))}),document.body)]})},QK=W.lazy(()=>Yb(()=>import("./AdminView-Co5qTWNQ.js"),[])),WK=W.lazy(()=>Yb(()=>import("./TutorialModal-Db3dQo0B.js"),[])),Tg=(t,e)=>{console.error("Error during content generation:",t),e("          .     .")},Eg="https://i.postimg.cc/4yWkhPNC/0c86e3d51827469990f639e43138f4ba.jpg",XK=()=>{const[t,e]=W.useState(""),[n,i]=W.useState(null),[r,s]=W.useState(!1),[o,a]=W.useState(""),[l,u]=W.useState(null),[f,p]=W.useState(""),[m,_]=W.useState(!1),[S,b]=W.useState(""),[P,T]=W.useState(!1),[v,A]=W.useState(""),[N,L]=W.useState(!1),[F,C]=W.useState(!1),[E,w]=W.useState(!0),[x,M]=W.useState(!1),[k,D]=W.useState(!1),[Kt,Ct]=W.useState(""),[K,ie]=W.useState(!1),[re,De]=W.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"indigo"),[ke,Rr]=W.useState(()=>typeof window<"u"?localStorage.getItem("darkMode")==="true":!1),[Rt,tt]=W.useState(()=>typeof window<"u"&&localStorage.getItem("backgroundUrl")||Eg),Gn=["https://i.postimg.cc/Sx5hC2FK/2642ef1dd290b3ad3d2a1193e3110ae0.jpg","https://i.postimg.cc/Y043yK6L/fd3ab396167b3ee5ec021a44cf182f7d.jpg","https://i.postimg.cc/CLBPcD76/d4d5bd701ebd58c342ef9f74886e2cbc.jpg",Eg],[hn,Wp]=W.useState(()=>{if(typeof window<"u"){const ne=localStorage.getItem("backgroundGallery");return ne?JSON.parse(ne):Gn}return Gn}),[mt,Xp]=W.useState(()=>{const ne=typeof window<"u"?localStorage.getItem("customStyles"):null,j={cardOpacity:.2,cardBlur:16,cardBorderOpacity:.2,mainTextBrightness:1,cardColor:"#000000",mainTextColorLight:"#374151",mainTextColorDark:"#e2e8f0",primaryColor:"#4f46e5",paperSize:"a4",qualityScale:3};return ne?{...j,...JSON.parse(ne)}:j}),[yd,zo]=W.useState({mainTitle:" ",subTitle:"         ",introLine:"          ",bodyLine1:" ",bodyLine2:"  ",bodyLine3:"  ",bodyLine4:"    ",patronageTitle:" ",patronName:`   
   `,responsiblePriestTitle:"  "}),{ai:oi,apiKeyError:mi}=W.useMemo(()=>{const ne="PLACEHOLDER_API_KEY",j="          .     .";try{return{ai:new zq({apiKey:ne}),apiKeyError:""}}catch(le){return console.error("Error initializing GoogleGenAI:",le),{ai:null,apiKeyError:j}}},[]),Oi=ne=>{const j=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ne);return j?`${parseInt(j[1],16)} ${parseInt(j[2],16)} ${parseInt(j[3],16)}`:null},ks=(ne,j)=>{let le=parseInt(ne.substring(1,3),16),Ve=parseInt(ne.substring(3,5),16),Xe=parseInt(ne.substring(5,7),16);const bt=j/100;j>0?(le=Math.round(le+(255-le)*bt),Ve=Math.round(Ve+(255-Ve)*bt),Xe=Math.round(Xe+(255-Xe)*bt)):(le=Math.round(le*(1+bt)),Ve=Math.round(Ve*(1+bt)),Xe=Math.round(Xe*(1+bt)));const Cn=en=>("00"+Math.max(0,Math.min(255,en)).toString(16)).slice(-2);return`#${Cn(le)}${Cn(Ve)}${Cn(Xe)}`};W.useEffect(()=>{const ne=yg.onAuthStateChanged(j=>{C(!!j),w(!1)});return()=>ne()},[]),W.useEffect(()=>(x||K?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[x,K]),W.useEffect(()=>{document.documentElement.classList.remove("theme-indigo","theme-teal","theme-rose","theme-purple","theme-green","theme-amber","theme-cyan","theme-lime"),re&&(document.documentElement.classList.add(`theme-${re}`),localStorage.setItem("theme",re))},[re]),W.useEffect(()=>{const ne=window.document.documentElement;ke?(ne.classList.add("dark"),localStorage.setItem("darkMode","true")):(ne.classList.remove("dark"),localStorage.setItem("darkMode","false"))},[ke]),W.useEffect(()=>{localStorage.setItem("backgroundUrl",Rt)},[Rt]),W.useEffect(()=>{localStorage.setItem("backgroundGallery",JSON.stringify(hn))},[hn]),W.useEffect(()=>{const ne=document.documentElement,j=Oi(mt.cardColor)||"0 0 0";ne.style.setProperty("--card-bg-light-rgba",`rgba(${j.replace(/ /g,",")}, ${mt.cardOpacity*.5})`),ne.style.setProperty("--card-bg-dark-rgba",`rgba(${j.replace(/ /g,",")}, ${mt.cardOpacity})`),ne.style.setProperty("--card-backdrop-blur",`${mt.cardBlur}px`),ne.style.setProperty("--card-border-rgba",`rgba(255, 255, 255, ${mt.cardBorderOpacity})`),ne.style.setProperty("--main-text-color-light",mt.mainTextColorLight),ne.style.setProperty("--main-text-color-dark",mt.mainTextColorDark);const le=Oi(mt.primaryColor);if(le){ne.style.setProperty("--color-primary-rgb",le);const Ve=ks(mt.primaryColor,-10),Xe=Oi(Ve);Xe&&ne.style.setProperty("--color-primary-accent-rgb",Xe);const bt=ks(mt.primaryColor,90),Cn=Oi(bt);Cn&&ne.style.setProperty("--color-primary-light-rgb",Cn),ne.style.setProperty("--color-primary-dark-text-rgb",le);const en=ks(mt.primaryColor,20),br=Oi(en);br&&ne.style.setProperty("--color-primary-light-text-rgb",br)}localStorage.setItem("customStyles",JSON.stringify(mt))},[mt]);const Fl=W.useCallback(async()=>{if(!t.trim()){a("     "),i(null);return}s(!0),a(""),i(null);const ne={searchedId:t,timestamp:pi.firestore.FieldValue.serverTimestamp(),foundCode:"",foundName:""};try{const j=t.trim();if(j.startsWith("0")){a("      "),s(!1);return}const le=df.collection("servants");let Ve=null,Xe=null;if(isNaN(Number(j))){a("    .      ."),s(!1);return}else{const bt=await le.doc(j).get();if(bt.exists)Ve=bt.data(),Xe=bt.id;else{let Cn,en;j.startsWith("0")?(Cn=j,en=j.substring(1)):(Cn="0"+j,en=j);const br=parseInt(en,10),Vs=await le.where("mobileNumber","in",[Cn,en,br]).limit(1).get();if(!Vs.empty){const ai=Vs.docs[0];Ve=ai.data(),Xe=ai.id}}}if(Ve&&Xe){ne.foundCode=Xe,ne.foundName=Ve.name;const bt=parseInt(Xe,10),Vs=(await df.collection("courseResults").where("servantCode","in",[Xe,bt]).get()).docs.map(Re=>Re.data()),ai=new Map;for(const Re of Vs){const $t=`${Re.courseName}|${Re.year}`,Fi=ai.get($t);if(!Fi)ai.set($t,Re);else{const zn=Fi.score===""?-1:Fi.score;(Re.score===""?-1:Re.score)>zn&&ai.set($t,Re)}}const em=Array.from(ai.values()),zl=(await df.collection("evaluations").where("servantCode","in",[Xe,bt]).get()).docs.map(Re=>{const $t=Re.data();if($t.scores&&typeof $t.overallAverage=="number")return{id:Re.id,...$t};const zn=($t.rating||0)*20,xr={spiritualLife:zn,commitment:zn,preparationAndDelivery:zn,relationshipWithPeers:zn,relationshipWithCongregation:zn,personalGrowth:zn};return{id:Re.id,servantCode:$t.servantCode,serviceName:$t.serviceName,year:$t.year,evaluatorName:$t.evaluatorName,scores:xr,overallAverage:zn,generalNotes:$t.notes}}),gi=new Set;Array.isArray(Ve.allServices)&&Ve.allServices.length>0?Ve.allServices.forEach(Re=>{Re&&Re.trim()&&gi.add(Re.trim())}):(Ve.primaryService&&Ve.primaryService.trim()&&gi.add(Ve.primaryService.trim()),zl.forEach(Re=>{Re.serviceName&&Re.serviceName.trim()&&gi.add(Re.serviceName.trim())}));const Hl=Array.from(gi),Kl={...Ve,code:Xe,allServices:Hl};i({servant:Kl,results:em,evaluations:zl})}else i(null),a("      ")}catch(j){console.error("Error searching Firestore:",j),j.code==="permission-denied"?a("  .      .    ."):a("   .    .")}finally{if(s(!1),ne.foundCode)try{await df.collection("queryLogs").add(ne)}catch(j){console.error("Error writing to query log:",j)}}},[t]),vd=()=>{e(""),i(null),u(null),a(""),p(""),b(""),A("")},Zp=ne=>{u(ne)},jp=async()=>{if(!n)return;if(_(!0),p(""),b(""),A(""),mi||!oi){p(mi),_(!1);return}const ne=n.results.find(j=>j.score!=="");try{const j=`     (  )     "${n.servant.name}"       . ${ne?`       ${ne.score}  100.`:""}`,le=await oi.models.generateContent({model:"gemini-2.5-flash",contents:j});p(le.text)}catch(j){Tg(j,p)}finally{_(!1)}},Td=async()=>{if(n){if(T(!0),b(""),p(""),A(""),mi||!oi){b(mi),T(!1);return}try{const ne=`    ( 3  5 )   "${n.servant.name}"           .`,j=await oi.models.generateContent({model:"gemini-2.5-flash",contents:ne});b(j.text)}catch(ne){Tg(ne,b)}finally{T(!1)}}},ql=async()=>{if(n){if(L(!0),A(""),p(""),b(""),mi||!oi){A(mi),L(!1);return}try{const ne=n.servant.name,j=ne.split(" ")[0],le=`        ${ne}.
             ${ne} .
             "${j}"    .
                                 .
             12 .
         :              .`,Xe=(await oi.models.generateContent({model:"gemini-2.5-flash",contents:le})).text.trim()+`

   /   `;A(Xe)}catch(ne){Tg(ne,A)}finally{L(!1)}}},Ed=async(ne,j)=>{D(!0),Ct("");try{await yg.signInWithEmailAndPassword(ne,j),localStorage.setItem("loginEmail",ne),M(!1)}catch(le){le.code==="auth/user-not-found"||le.code==="auth/wrong-password"||le.code==="auth/invalid-credential"?Ct("      ."):le.code==="auth/network-request-failed"?Ct("   .        ."):Ct("   .    ."),console.error("Login failed:",le)}finally{D(!1)}},Id=async()=>{await yg.signOut()},Bl=()=>l?R.jsx(DK,{certData:l,onBackToResult:()=>u(null),certificateTexts:yd,customStyles:mt}):n?R.jsx(GK,{profile:n,onShowCertificate:Zp,onGenerateMessage:jp,motivationalMessage:f,isMessageLoading:m,onGenerateAdvice:Td,spiritualAdvice:S,isAdviceLoading:P,onGenerateSpecialMessage:ql,specialMessage:v,isSpecialMessageLoading:N,onNewSearch:vd}):R.jsx(IK,{query:t,setQuery:e,onSearch:Fl,isLoading:r,error:o,onShowTutorial:()=>ie(!0)}),Gl=R.jsx("main",{className:"w-full max-w-7xl mx-auto flex-grow flex items-center justify-center",children:R.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"})});return R.jsx(JK,{children:R.jsxs("div",{className:"relative min-h-screen bg-gray-100 text-[var(--main-text-color-light)] flex flex-col items-center p-4 transition-colors duration-300",children:[R.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:`url('${Rt}')`}}),R.jsx("div",{className:`absolute inset-0 bg-black/75 transition-opacity duration-500 ${ke?"opacity-100":"opacity-0"} pointer-events-none`}),R.jsxs("div",{className:"relative z-10 w-full flex flex-col flex-grow items-center dark:text-[var(--main-text-color-dark)]",children:[R.jsxs("header",{className:"w-full max-w-7xl mx-auto text-center py-8 no-print",children:[R.jsx(eE,{className:"w-40 h-40 object-contain mx-auto",alt:"     "}),R.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white [text-shadow:_0_2px_4px_rgb(0_0_0_/_40%)] dark:text-[rgb(var(--color-primary-light-text-rgb))] mt-4",children:"    "}),R.jsx("p",{className:"text-2xl text-slate-100 [text-shadow:_0_2px_4px_rgb(0_0_0_/_40%)] dark:text-slate-300 mt-1",children:"  "}),R.jsx("p",{className:"text-xl text-slate-200 [text-shadow:_0_2px_4px_rgb(0_0_0_/_40%)] dark:text-slate-400 mt-2",children:"      "})]}),F?R.jsx(W.Suspense,{fallback:Gl,children:R.jsx(QK,{onLogout:Id,certificateTexts:yd,setCertificateTexts:zo,setTheme:De,isDarkMode:ke,setIsDarkMode:Rr,customStyles:mt,setCustomStyles:Xp,setBackgroundUrl:tt,backgroundUrl:Rt,backgroundGallery:hn,setBackgroundGallery:Wp})}):R.jsx("main",{className:"w-full max-w-7xl mx-auto flex-grow flex items-center justify-center",children:Bl()}),x&&R.jsx(zK,{onClose:()=>M(!1),onLogin:Ed,isLoggingIn:k,loginError:Kt}),K&&R.jsx(W.Suspense,{fallback:null,children:R.jsx(WK,{onClose:()=>ie(!1)})}),R.jsxs("footer",{className:"w-full text-center p-4 text-slate-200 [text-shadow:_0_1px_2px_rgb(0_0_0_/_30%)] dark:text-slate-400 mt-8 no-print",children:[R.jsxs("p",{children:[" ",new Date().getFullYear(),"     .   ."]}),!E&&R.jsx("div",{className:"flex justify-center items-center gap-4",children:F?R.jsx("button",{onClick:Id,className:"mt-2 text-slate-200 hover:text-white dark:text-slate-400 dark:hover:text-slate-200 underline text-sm",children:""}):R.jsx("button",{onClick:()=>{Ct(""),M(!0)},className:"mt-2 text-transparent hover:text-slate-200 dark:hover:text-slate-200 underline text-sm",children:" "})})]})]})]})})},zw=document.getElementById("root");zw&&n2.createRoot(zw).render(R.jsx(S1.StrictMode,{children:R.jsx(XK,{})}));export{zq as G,Kh as a,Eg as b,df as d,R as j,W as r,h$ as u};
